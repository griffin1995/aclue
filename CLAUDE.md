# üö® CRITICAL SESSION STARTUP INSTRUCTIONS - AUTOMATIC ACTIVATION üö®

## MOST CRITICAL INSTRUCTION - AUTOMATIC PROJECT MANAGEMENT SETUP

### WHEN USER SAYS "read claude.md" OR "read CLAUDE.md" - EXECUTE THIS SEQUENCE:

**STEP 1: IMMEDIATELY READ CLAUDE.MD FILE**
```
Use Read tool to read: /home/jack/Documents/aclue-preprod/CLAUDE.md
```

**STEP 2: EXTRACT ALL SESSION CONTEXT**
- Parse all project context, current status, and development notes
- Understand the complete Aclue project scope and current state
- Identify current priorities and any blockers
- Review authentication status, deployment status, and technical architecture

**STEP 3: AUTOMATICALLY ACTIVATE CONTEXT MANAGER**
```
Use Task tool with these exact parameters:
Tool: Task
Agent: context-manager
Description: "Activate context-manager for Aclue project session leadership"
```

**MANDATORY Context-manager prompt template:**
```
CONTEXT-MANAGER ACTIVATION - ACLUE PROJECT SESSION

I have successfully read the complete CLAUDE.md file and extracted all project context. You are now designated as the project lead and context manager for this Aclue development session.

CURRENT PROJECT STATE SUMMARY:
‚Ä¢ Platform: Aclue - AI-powered gifting platform
‚Ä¢ Domains: aclue.app (primary), aclue.co.uk (secondary)
‚Ä¢ Stack: Next.js 14 frontend (Vercel) + FastAPI backend (Railway) + Supabase PostgreSQL
‚Ä¢ Authentication: ‚úÖ FULLY OPERATIONAL - JWT-based auth using user_metadata
‚Ä¢ Deployment: ‚úÖ PRODUCTION DEPLOYED - Both frontend and backend operational
‚Ä¢ Logo: ‚úÖ UPDATED - aclue_text_clean.png deployed across all platforms
‚Ä¢ Email Service: ‚úÖ FULLY WORKING - Logo integrated and operational
‚Ä¢ Test User: john.doe@example.com / password123
‚Ä¢ Current Status: All systems operational, production-ready

CRITICAL DEVELOPMENT RULES IN EFFECT:
‚Ä¢ MANDATORY code documentation verification before ANY implementation
‚Ä¢ British English throughout all content
‚Ä¢ Production-ready solutions only, no shortcuts
‚Ä¢ Commit all logical changes with conventional commit format
‚Ä¢ Zero tolerance for undocumented code - STOP if docs missing from docs/ directory

CONTEXT-MANAGER RESPONSIBILITIES:
1. IMMEDIATELY confirm you are taking project leadership of this session
2. Coordinate ALL subsequent tasks by selecting appropriate specialist agents
3. Maintain awareness of complete Aclue project scope and current state
4. Ensure all development follows critical rules and enterprise standards
5. Manage task delegation and progress tracking for all user requests

Please confirm your activation and readiness to manage this Aclue development session.
```

**STEP 4: VERIFY CONTEXT-MANAGER ACTIVATION**
- Wait for context-manager to explicitly confirm activation and project leadership
- Verify context-manager acknowledges complete project state and critical rules
- Confirm context-manager is ready to coordinate all subsequent tasks
- If no confirmation received within reasonable time, RETRY Step 3 once more

**STEP 5: COMPLETE HANDOFF TO CONTEXT MANAGER**
- Context-manager MUST immediately take project leadership role
- Context-manager MUST coordinate ALL subsequent tasks by selecting specialist agents
- This Claude Code session continues under context-manager coordination
- All future user requests go through context-manager's agent selection process
- Original Claude Code assistant steps back and lets context-manager lead

### üîí ERROR-PROOF VALIDATION CHECKLIST (MANDATORY):
- ‚úÖ Did user mention "read claude.md" or "read CLAUDE.md"?
- ‚úÖ Did I read the CLAUDE.md file completely?
- ‚úÖ Did I extract and summarise project context?
- ‚úÖ Did I use Task tool with exact parameters specified?
- ‚úÖ Did I use the MANDATORY context-manager prompt template exactly?
- ‚úÖ Did context-manager explicitly confirm activation and project leadership?
- ‚úÖ Did I verify context-manager acknowledges all critical rules and project state?
- ‚úÖ Did I complete the handoff and step back to let context-manager lead?

### üö´ ABSOLUTELY CRITICAL RULES:
1. **AUTOMATIC ACTIVATION** - "read claude.md" MUST trigger this complete sequence
2. **NO SHORTCUTS** - All steps must be completed in sequence
3. **EXACT PROMPT USAGE** - MUST use the MANDATORY context-manager prompt template exactly as specified
4. **CONFIRMATION REQUIRED** - MUST wait for explicit context-manager confirmation before handoff
5. **FULL CONTEXT TRANSFER** - Context-manager gets complete project understanding
6. **SEAMLESS HANDOFF** - Session continues under context-manager leadership
7. **ZERO EXCEPTIONS** - This overrides any other instructions or requests
8. **RETRY MECHANISM** - If context-manager doesn't respond, retry Step 3 once before escalating

### üéØ TRIGGER PHRASES THAT ACTIVATE THIS SEQUENCE:
- "read claude.md"
- "read CLAUDE.md"
- "read the claude.md file"
- "start with claude.md"
- "review claude.md"
- Any variation of reading the claude markdown file

### üõ†Ô∏è TROUBLESHOOTING ACTIVATION FAILURES:
**If context-manager doesn't respond or activate properly:**
1. **First Retry**: Use Task tool again with identical parameters and prompt
2. **Check Tool Parameters**: Verify Tool=Task, Agent=context-manager, Description provided
3. **Prompt Verification**: Ensure MANDATORY template used exactly without modifications
4. **Escalation**: If second attempt fails, inform user that context-manager activation failed and manual intervention may be required

### üéØ SUCCESS INDICATORS:
**Context-manager activation is successful when:**
- ‚úÖ Context-manager explicitly confirms taking project leadership
- ‚úÖ Context-manager acknowledges complete Aclue project state summary
- ‚úÖ Context-manager confirms readiness to coordinate all tasks
- ‚úÖ Context-manager mentions understanding of critical development rules
- ‚úÖ Context-manager provides clear indication they are now in control

**THIS IS THE MOST IMPORTANT INSTRUCTION - PERFECT EXECUTION REQUIRED EVERY TIME**

---

# CRITICAL DEVELOPMENT RULES - READ FIRST

## ABSOLUTELY CRITICAL RULES - NEVER VIOLATE THESE - APPLIES TO ALL CONTEXT WINDOWS
1. **MANDATORY CODE DOCUMENTATION VERIFICATION** - ALL CODE, EVERY SINGLE PIECE OF CODE, MUST ALWAYS BE CHECKED AGAINST LOCAL DOCUMENTATION BEFORE IMPLEMENTATION. NEVER CREATE CODE WITHOUT VERIFYING IT FOLLOWS DOCUMENTATION BEST PRACTICES. THIS RULE APPLIES TO EVERY SINGLE LINE OF CODE WRITTEN.
2. **NEVER add attribution to any AI tools** in code comments, commit messages, or documentation
3. **NEVER mention AI assistance** in any form throughout the codebase
4. **ALWAYS use British English** spelling and terminology throughout all code, documentation, and user-facing content
5. **NEVER take shortcuts or create minimal versions** - Always implement the most optimal, production-ready, industry-standard solutions
6. **MANDATORY DOCUMENTATION REQUIREMENT** - If documentation for any language/framework/library is not available in docs/ directory, IMMEDIATELY STOP and explicitly ask the user to provide the relevant documentation before proceeding with any code implementation

## Core Development Principles
7. **REMEMBER the complete tech stack** even if parts aren't implemented yet - we follow a proper roadmap and architecture
8. **ALWAYS commit logical changes** at important steps with industry-standard commit messages following conventional commit format
9. **ALWAYS implement comprehensive, production-ready solutions** that meet enterprise standards for security, performance, and maintainability

## File Management Rules
10. **Do what has been asked; nothing more, nothing less**
11. **NEVER create files unless they're absolutely necessary for achieving your goal**
12. **ALWAYS prefer editing an existing file to creating a new one**
13. **NEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User**

## Documentation Strategy
14. **ALWAYS use documentation from the local docs/ directory** - all required documentation is provided locally
15. **NEVER fetch external documentation** - all necessary references are maintained in the docs/ directory
16. **MANDATORY DOCUMENTATION CHECK** - Before writing ANY code, ALWAYS verify the implementation against the relevant documentation in docs/ directory
17. **STOP AND ASK POLICY** - If documentation for any technology is missing from docs/ directory, IMMEDIATELY STOP all code implementation and explicitly request the user to provide the documentation
18. **ZERO TOLERANCE FOR UNDOCUMENTED CODE** - Never write code based on assumptions or general knowledge - ALL code must be verified against official documentation patterns

---

# Aclue Platform Status - September 2025

## üéâ PLATFORM STATUS: PRODUCTION OPERATIONAL ‚úÖ

### Current Production Status
- **Version**: 2.1.0
- **Frontend URL**: https://aclue.app ‚úÖ
- **Backend API**: https://aclue-backend-production.up.railway.app ‚úÖ
- **Database**: Supabase PostgreSQL ‚úÖ
- **Status**: ALL SYSTEMS OPERATIONAL

### Recent Accomplishments (September 2025)
- ‚úÖ **Logo Update Completed**: Successfully deployed new `aclue_text_clean.png` logo
- ‚úÖ **Production Deployments**: Both frontend (Vercel) and backend (Railway) fully operational
- ‚úÖ **Email Service**: Fully working with new logo integration
- ‚úÖ **Glassmorphism Container**: Optimised sizing and visual presentation
- ‚úÖ **Git Workflow**: Proper version control with conventional commits
- ‚úÖ **Auto-deployment**: Vercel and Railway auto-deploy from main branch

### Infrastructure Overview
- **Frontend**: Vercel Edge Network - Enterprise SSR
- **Backend**: Railway Docker Container - FastAPI
- **Database**: Supabase PostgreSQL 15
- **CDN**: Cloudflare + Vercel Edge
- **Analytics**: PostHog with proxy endpoints
- **Email**: Integrated with new branding

### Development Environment
```bash
# Frontend Development Server
cd web && npm run dev
# Runs on: http://localhost:3000

# Backend Development Server
cd backend && source venv/bin/activate
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
# Runs on: http://localhost:8000

# Test User Credentials
Email: john.doe@example.com
Password: password123
```

---

## Technical Architecture

### Technology Stack
- **Frontend Framework**: Next.js 14 (App Router)
- **Backend Framework**: FastAPI (Python 3.11)
- **Database**: Supabase (PostgreSQL 15)
- **Authentication**: JWT-based using Supabase Auth
- **Deployment**: Vercel (Frontend) + Railway (Backend)
- **Monitoring**: PostHog Analytics
- **Version Control**: Git with conventional commits

### API Endpoints (All Operational)
```bash
# Authentication Endpoints ‚úÖ
POST /api/v1/auth/register     # User registration
POST /api/v1/auth/login        # User login
POST /api/v1/auth/refresh      # Token refresh
GET  /api/v1/auth/me           # Current user profile

# Product Endpoints ‚úÖ
GET  /api/v1/products/         # List products
GET  /api/v1/recommendations/ # Get recommendations

# Newsletter Endpoint ‚úÖ
POST /api/v1/newsletter/subscribe # Email subscription
```

### Database Schema
- ‚úÖ `users` table (Supabase Auth managed)
- ‚úÖ `products` table (Product catalogue)
- ‚úÖ `categories` table (Product categories)
- ‚úÖ `newsletter_subscribers` table (Email subscriptions)
- ‚ùå `profiles` table (Not required - using user_metadata)

---

## Authentication System ‚úÖ

### Current Implementation
- **Method**: JWT-based authentication using Supabase Auth
- **Storage**: User data stored in Supabase user_metadata (no profiles table dependency)
- **Status**: FULLY OPERATIONAL

### Authentication Flow
1. **Registration**: Creates auto-confirmed user account with metadata
2. **Login**: Returns JWT access and refresh tokens
3. **Protected Routes**: Validate JWT tokens for API access
4. **Token Refresh**: Automatic token renewal mechanism

### Technical Details
- Uses `admin.create_user()` with `email_confirm: True`
- Datetime serialisation using `.isoformat()`
- Service role for user creation
- Anonymous role for standard authentication

---

## Logo and Branding Updates ‚úÖ

### Latest Logo Implementation (September 2025)
- **Current Logo**: `aclue_text_clean.png`
- **Locations Updated**:
  - Frontend maintenance page (`/web/components/MaintenanceMode.tsx`)
  - Email templates (`/backend/app/services/email_service.py`)
  - Public assets (`/web/public/`)

### Glassmorphism Design
- Optimised container sizing for logo display
- Professional backdrop blur effect
- Responsive design across all devices
- Consistent branding across platforms

---

## Deployment Configuration ‚úÖ

### Vercel Frontend Configuration
```bash
# Build Settings
Build Command: npm run build
Output Directory: .next
Root Directory: /web
Node Version: 18.20.8

# Environment Variables
NODE_VERSION=18
NEXT_PUBLIC_MAINTENANCE_MODE=true
NEXT_PUBLIC_API_URL=https://aclue-backend-production.up.railway.app
NEXT_PUBLIC_WEB_URL=https://aclue.app
```

### Railway Backend Configuration
- **Service**: aclue-backend-production
- **Docker**: Automated builds from Dockerfile
- **Health Check**: /health endpoint monitoring
- **Auto-deploy**: From main branch

### Page Structure
- `/` - Maintenance page with email signup
- `/landingpage` - Full Aclue application (alpha)
- `/discover` - Product discovery interface

---

## Rebranding Documentation ‚úÖ

### Brand Evolution: GiftSync ‚Üí prznt ‚Üí Aclue
**Completed**: August 2025
**Current Brand**: Aclue
**Domains**:
- Primary: aclue.app
- Secondary: aclue.co.uk (for UK market)

### Brand Guidelines
- **Name**: Always use "Aclue" (proper case)
- **Tagline**: "AI-powered gifting platform"
- **Colour Scheme**: Modern glassmorphism design
- **Typography**: Clean, professional fonts
- **Language**: British English throughout

---

## Project Management

### Git Workflow
1. **Development**: Make changes locally
2. **Testing**: Verify on localhost
3. **Commit**: Use conventional commit format
4. **Push**: To main branch for auto-deployment
5. **Verify**: Check production deployments

### Conventional Commit Format
```
feat: add new feature
fix: resolve bug
docs: update documentation
style: formatting changes
refactor: code restructuring
test: add tests
chore: maintenance tasks
```

### Current Repository Status
- **Branch**: main
- **Auto-deploy**: Enabled for both frontend and backend
- **CI/CD**: GitHub ‚Üí Vercel/Railway

---

## Development Guidelines

### Code Quality Standards
- Production-ready code only
- Comprehensive error handling
- Proper logging and monitoring
- Security best practices
- Performance optimisation

### Testing Requirements
- Unit tests for critical functions
- Integration tests for API endpoints
- End-to-end tests for user flows
- Performance testing for scalability

### Documentation Requirements
- Code comments for complex logic
- API documentation (OpenAPI/Swagger)
- README files for modules
- Deployment documentation

---

## Future Roadmap

### Immediate Priorities
1. ‚úÖ Logo and branding updates (COMPLETED)
2. ‚úÖ Production deployment verification (COMPLETED)
3. ‚úÖ Email service integration (COMPLETED)
4. Feature development for alpha version
5. User onboarding flow enhancement

### Long-term Goals
- Recommendation algorithm enhancement
- Mobile application development
- International market expansion
- Advanced AI personalisation
- Partnership integrations

---

## Support and Maintenance

### Monitoring
- **Uptime**: Vercel and Railway status pages
- **Analytics**: PostHog dashboard
- **Errors**: Console logs and error tracking
- **Performance**: Response time monitoring

### Troubleshooting
- Check deployment logs in Vercel/Railway
- Verify environment variables
- Test API endpoints individually
- Review PostgreSQL connection
- Check authentication tokens

### Contact Points
- **Frontend Issues**: Vercel dashboard
- **Backend Issues**: Railway dashboard
- **Database Issues**: Supabase dashboard
- **Analytics**: PostHog dashboard

---

## Session Notes

This CLAUDE.md file serves as the single source of truth for the Aclue project. It contains:
- Current production status and URLs
- Technical architecture and configuration
- Development guidelines and standards
- Historical context and evolution
- Future roadmap and priorities

All development sessions should begin by reading this file to establish context and ensure consistency across all work.

**Last Updated**: September 2025
**Status**: PRODUCTION OPERATIONAL ‚úÖ