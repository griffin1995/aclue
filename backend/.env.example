# ===============================================================================
# aclue Backend Environment Configuration Template
# ===============================================================================
#
# SECURITY WARNING: This file contains template values only.
# Copy this file to .env and replace all placeholder values with actual secrets.
# NEVER commit .env files with real values to version control.
#
# For production deployment, use your platform's environment variable system:
# - Railway: Environment Variables section in dashboard
# - Heroku: Config Vars in dashboard
# - Docker: Environment variables in docker-compose or deployment config
#
# Last Updated: September 2025
# Environment Schema Version: 2.1.0
# ===============================================================================

# ===============================================================================
# APPLICATION CONFIGURATION
# ===============================================================================

# Environment type - REQUIRED
# Valid values: development, staging, production
# Used for: Environment-specific configuration and feature flags
ENVIRONMENT=development

# Debug mode - REQUIRED
# Valid values: true, false
# Used for: Enhanced logging and error details (disable in production)
DEBUG=true

# Logging configuration - REQUIRED
# Valid values: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Used for: Log level filtering and monitoring
LOG_LEVEL=INFO

# Application name and version - REQUIRED
# Used for: Monitoring, logging, and service identification
APP_NAME=aclue-backend
APP_VERSION=2.1.0

# ===============================================================================
# SECURITY CONFIGURATION
# ===============================================================================

# Secret key for JWT signing - REQUIRED - CRITICAL SECURITY
# Requirements: Minimum 64 characters, cryptographically secure random string
# Used for: JWT token signing and session security
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=your-secret-key-change-in-production-minimum-64-characters-required

# JWT algorithm - REQUIRED
# Valid values: HS256, HS384, HS512 (recommended: HS256)
# Used for: JWT token signing algorithm
ALGORITHM=HS256

# Token expiration settings - REQUIRED
# Valid values: Integer (minutes/days)
# Used for: JWT token lifecycle management
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS origins - REQUIRED
# Format: JSON array of allowed origins
# Used for: Cross-origin request security
# Development example: ["http://localhost:3000", "http://127.0.0.1:3000"]
# Production example: ["https://aclue.app", "https://www.aclue.app"]
CORS_ORIGINS=["http://localhost:3000"]

# Allowed hosts - REQUIRED
# Format: JSON array of allowed hostnames
# Used for: Host header validation
ALLOWED_HOSTS=["localhost", "127.0.0.1", "0.0.0.0"]

# ===============================================================================
# DATABASE CONFIGURATION
# ===============================================================================

# Primary database URL - REQUIRED - CRITICAL
# Format: postgresql://username:password@host:port/database_name
# Used for: Primary application database connection
# Development: Use local PostgreSQL instance
# Production: Use managed database service (Supabase, AWS RDS, etc.)
DATABASE_URL=postgresql://username:password@localhost:5432/aclue_dev

# Database connection pool settings - REQUIRED
# Used for: Database connection optimisation
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Database migration settings - REQUIRED
# Used for: Alembic database migrations
DB_MIGRATION_TIMEOUT=300

# ===============================================================================
# SUPABASE CONFIGURATION
# ===============================================================================

# Supabase project URL - REQUIRED
# Format: https://your-project-id.supabase.co
# Used for: Supabase client initialisation
SUPABASE_URL=https://your-project-id.supabase.co

# Supabase anonymous key - REQUIRED
# Used for: Client-side authentication and authorised operations
# Note: This key can be exposed to frontend (read-only operations)
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Supabase service role key - REQUIRED - CRITICAL SECURITY
# Used for: Server-side admin operations and bypassing RLS
# WARNING: This key grants full database access - keep secure
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# ===============================================================================
# REDIS CONFIGURATION (OPTIONAL - Used for caching and rate limiting)
# ===============================================================================

# Redis connection URL - OPTIONAL
# Format: redis://username:password@host:port/database_number
# Used for: Caching, session storage, and rate limiting
# Development: Use local Redis instance or disable caching
# Production: Use managed Redis service (Upstash, AWS ElastiCache, etc.)
REDIS_URL=redis://localhost:6379/0

# Redis settings - OPTIONAL
# Used for: Redis connection optimisation
REDIS_TTL=3600
REDIS_MAX_CONNECTIONS=10

# ===============================================================================
# EMAIL CONFIGURATION
# ===============================================================================

# Email service enabled - REQUIRED
# Valid values: true, false
# Used for: Email functionality toggle
EMAIL_ENABLED=true

# Resend API configuration - REQUIRED for email functionality
# Used for: Email sending service
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key_here

# Email sender configuration - REQUIRED for email functionality
# Used for: From address in sent emails
# Note: Domain must be verified in Resend dashboard
FROM_EMAIL=hello@aclue.app
FROM_NAME=aclue

# Email templates configuration - OPTIONAL
# Used for: Email template customisation
EMAIL_TEMPLATE_DIR=app/templates/emails

# ===============================================================================
# EXTERNAL API INTEGRATIONS
# ===============================================================================

# OpenAI API configuration - OPTIONAL
# Used for: AI-powered features and recommendations
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=1000

# PostHog analytics - OPTIONAL
# Used for: User analytics and feature tracking
# Get your API key from: https://app.posthog.com/project/settings
POSTHOG_API_KEY=phc_your_posthog_api_key_here
POSTHOG_HOST=https://app.posthog.com

# Amazon Associates API - OPTIONAL
# Used for: Product recommendations and affiliate tracking
# Register at: https://affiliate-program.amazon.com/
AMAZON_ACCESS_KEY=your-amazon-access-key
AMAZON_SECRET_KEY=your-amazon-secret-key
AMAZON_ASSOCIATE_TAG=your-associate-tag
AMAZON_REGION=us-east-1

# ===============================================================================
# API CONFIGURATION
# ===============================================================================

# API version prefix - REQUIRED
# Used for: API versioning and routing
API_V1_STR=/api/v1

# API server configuration - REQUIRED
# Used for: Server binding and networking
HOST=0.0.0.0
PORT=8000

# Request configuration - REQUIRED
# Used for: Request processing limits
MAX_REQUEST_SIZE=10485760  # 10MB
REQUEST_TIMEOUT=30

# ===============================================================================
# RATE LIMITING CONFIGURATION
# ===============================================================================

# Rate limiting enabled - REQUIRED
# Valid values: true, false
# Used for: API protection against abuse
RATE_LIMIT_ENABLED=true

# Rate limiting settings - REQUIRED when rate limiting enabled
# Used for: Rate limit enforcement
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=3600  # 1 hour in seconds
RATE_LIMIT_BURST=20

# ===============================================================================
# FILE STORAGE CONFIGURATION
# ===============================================================================

# File upload settings - REQUIRED
# Used for: File upload validation and processing
UPLOAD_MAX_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=["jpg", "jpeg", "png", "gif", "webp", "pdf"]

# File storage backend - REQUIRED
# Valid values: local, s3, supabase
# Used for: File storage strategy
STORAGE_BACKEND=local

# Local storage configuration - REQUIRED when using local storage
# Used for: Local file storage paths
STORAGE_LOCAL_PATH=./uploads
STORAGE_LOCAL_URL=/static/uploads

# S3 storage configuration - OPTIONAL (when using S3)
# Used for: AWS S3 file storage
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-s3-bucket-name

# ===============================================================================
# MONITORING AND OBSERVABILITY
# ===============================================================================

# Sentry error tracking - OPTIONAL
# Used for: Error monitoring and alerting
# Get your DSN from: https://sentry.io/
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Sentry configuration - OPTIONAL
# Used for: Sentry error tracking optimisation
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0

# Prometheus metrics - OPTIONAL
# Used for: Application metrics collection
PROMETHEUS_ENABLED=false
METRICS_PORT=9090

# Health check configuration - REQUIRED
# Used for: Application health monitoring
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# ===============================================================================
# FEATURE FLAGS
# ===============================================================================

# Analytics features - OPTIONAL
# Used for: Analytics functionality toggle
ENABLE_ANALYTICS=true

# Caching features - OPTIONAL
# Used for: Caching functionality toggle
ENABLE_CACHING=true

# Email notifications - OPTIONAL
# Used for: Email notification toggle
ENABLE_EMAIL_NOTIFICATIONS=true

# Push notifications - OPTIONAL
# Used for: Push notification toggle
ENABLE_PUSH_NOTIFICATIONS=false

# Machine learning features - OPTIONAL
# Used for: ML-powered features toggle
ENABLE_ML_RECOMMENDATIONS=true

# ===============================================================================
# DEVELOPMENT AND TESTING
# ===============================================================================

# Testing configuration - OPTIONAL (development only)
# Used for: Test environment setup
PYTEST_TIMEOUT=30
PYTEST_MAXFAIL=10
COVERAGE_THRESHOLD=80

# Database seeding - OPTIONAL (development only)
# Used for: Development data seeding
SEED_DATABASE=false
SEED_ADMIN_EMAIL=admin@aclue.app
SEED_ADMIN_PASSWORD=change_me_in_production

# Debug features - OPTIONAL (development only)
# Used for: Development debugging
ENABLE_DEBUG_TOOLBAR=false
ENABLE_SQL_LOGGING=false

# ===============================================================================
# PRODUCTION-SPECIFIC CONFIGURATION
# ===============================================================================

# Production optimisation settings
# Used for: Production performance optimisation
# Uncomment and configure for production deployment:

# GUNICORN_WORKERS=4
# GUNICORN_MAX_REQUESTS=1000
# GUNICORN_TIMEOUT=30
# GUNICORN_KEEPALIVE=2

# SSL/TLS configuration
# FORCE_HTTPS=true
# SECURE_COOKIES=true
# SECURE_HEADERS=true

# ===============================================================================
# ENVIRONMENT VALIDATION CHECKLIST
# ===============================================================================
#
# Before deploying, ensure all REQUIRED variables are set:
# □ ENVIRONMENT (development/staging/production)
# □ SECRET_KEY (minimum 64 characters)
# □ DATABASE_URL (valid PostgreSQL connection string)
# □ SUPABASE_URL (valid Supabase project URL)
# □ SUPABASE_ANON_KEY (valid Supabase anonymous key)
# □ SUPABASE_SERVICE_ROLE_KEY (valid Supabase service role key)
# □ CORS_ORIGINS (properly formatted JSON array)
# □ ALLOWED_HOSTS (properly formatted JSON array)
#
# For production deployment, also ensure:
# □ DEBUG=false
# □ LOG_LEVEL=INFO or WARNING
# □ Strong SECRET_KEY (generate new for production)
# □ Secure database credentials
# □ HTTPS-only origins in CORS_ORIGINS
# □ Production hostnames in ALLOWED_HOSTS
# □ All external API keys are production keys
# □ Monitoring services configured (Sentry, etc.)
#
# ===============================================================================
