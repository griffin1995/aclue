# Aclue Production Environment Variables Template
# Copy this file to .env.production and update with your actual values
# SECURITY: NEVER commit actual production credentials to version control

# ============================================================================
# CORE CONFIGURATION
# ============================================================================

# Environment settings
ENVIRONMENT=production
DEBUG=false
PROJECT_NAME=Aclue API
VERSION=1.0.0

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# CRITICAL: Generate secure keys using:
# python3 -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=${SECRET_KEY}
JWT_SECRET_KEY=${JWT_SECRET_KEY}

# JWT settings
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=30

# ============================================================================
# DOMAIN & CORS CONFIGURATION
# ============================================================================

# Primary domains
ALLOWED_HOSTS=aclue.app,www.aclue.app,aclue.co.uk,www.aclue.co.uk,api.aclue.app
CORS_ORIGINS=https://aclue.app,https://www.aclue.app,https://aclue.co.uk

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Supabase (Primary Database)
SUPABASE_URL=${SUPABASE_URL}
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}

# PostgreSQL Direct Connection (if needed)
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:5432/${DB_NAME}

# Redis Cache
REDIS_URL=redis://${REDIS_HOST}:6379
REDIS_CACHE_TTL=3600

# ============================================================================
# API SERVICES
# ============================================================================

# Backend API
API_BASE_URL=https://aclue-backend-production.up.railway.app

# Railway deployment
RAILWAY_ENVIRONMENT=production
RAILWAY_PROJECT_ID=${RAILWAY_PROJECT_ID}

# ============================================================================
# EXTERNAL INTEGRATIONS
# ============================================================================

# Amazon Affiliate Program
AMAZON_ASSOCIATE_TAG=aclue-21
AMAZON_ACCESS_KEY=${AMAZON_ACCESS_KEY}
AMAZON_SECRET_KEY=${AMAZON_SECRET_KEY}

# Email Service (Resend)
RESEND_API_KEY=${RESEND_API_KEY}
FROM_EMAIL=noreply@aclue.app
FROM_NAME=Aclue

# Analytics
POSTHOG_API_KEY=${POSTHOG_API_KEY}
POSTHOG_HOST=https://app.posthog.com

# ============================================================================
# RATE LIMITING & PERFORMANCE
# ============================================================================

# Rate limits
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=100

# Worker configuration
WORKERS=4
WORKER_TIMEOUT=30
MAX_CONNECTIONS=1000

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Error tracking
SENTRY_DSN=${SENTRY_DSN}

# Metrics
PROMETHEUS_ENABLED=true

# Logging
LOG_LEVEL=INFO

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Core features
ENABLE_REGISTRATION=true
ENABLE_ML_RECOMMENDATIONS=true
ENABLE_AFFILIATE_TRACKING=true
ENABLE_SOCIAL_LOGIN=false

# Beta features
ENABLE_VOICE_SEARCH=false
ENABLE_AR_FEATURES=false

# ============================================================================
# BUSINESS CONFIGURATION
# ============================================================================

# Recommendation engine
MAX_RECOMMENDATIONS_PER_USER=50
MAX_SWIPES_PER_SESSION=50
MIN_SWIPES_FOR_RECOMMENDATIONS=10
RECOMMENDATION_CACHE_TTL=43200

# Commission settings
COMMISSION_RATE_DEFAULT=0.075
REVENUE_SHARE_USER_PERCENTAGE=20

# ML model settings
ML_BATCH_SIZE=32
ML_UPDATE_INTERVAL_MINUTES=5
MODEL_UPDATE_FREQUENCY=daily

# ============================================================================
# SECURITY POLICIES
# ============================================================================

# Password requirements
MIN_PASSWORD_LENGTH=8
REQUIRE_UPPERCASE=true
REQUIRE_LOWERCASE=true
REQUIRE_NUMBERS=true
REQUIRE_SPECIAL_CHARS=true

# Session security
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900
PASSWORD_RESET_EXPIRY=3600
SESSION_TIMEOUT=86400

# Cookie settings
SECURE_COOKIES=true
HTTPONLY_COOKIES=true
SAMESITE_COOKIES=strict

# ============================================================================
# FILE STORAGE
# ============================================================================

# AWS S3 (optional)
AWS_REGION=eu-west-2
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
S3_BUCKET_NAME=aclue-assets

# Upload limits
MAX_FILE_SIZE_MB=10
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,webp

# ============================================================================
# DEPLOYMENT CHECKLIST
# ============================================================================
#
# Before deploying to production, ensure:
#
# 1. [ ] Generate cryptographically secure SECRET_KEY
# 2. [ ] Set DEBUG=false
# 3. [ ] Configure production database credentials
# 4. [ ] Set up monitoring (Sentry, Prometheus)
# 5. [ ] Configure rate limiting appropriately
# 6. [ ] Review and restrict ALLOWED_HOSTS
# 7. [ ] Enable HTTPS and configure SSL certificates
# 8. [ ] Set up backup strategy
# 9. [ ] Configure log aggregation
# 10. [ ] Test all integrations with production keys
#
# SECURITY REMINDERS:
# - Rotate secrets regularly (quarterly minimum)
# - Never expose service keys in client-side code
# - Use environment variables, never hardcode secrets
# - Implement proper access controls
# - Monitor for suspicious activity