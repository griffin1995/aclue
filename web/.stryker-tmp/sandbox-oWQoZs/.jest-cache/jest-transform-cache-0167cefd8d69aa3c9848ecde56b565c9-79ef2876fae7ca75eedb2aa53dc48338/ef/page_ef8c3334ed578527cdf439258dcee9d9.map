{"version":3,"names":["default","cov_1250yeja6b","f","s","LoginPage","dynamic","metadata","title","description","searchParams","currentUser","_auth","getCurrentUser","b","redirectTo","redirect","_navigation","_jsxruntime","jsx","className","_LoginForm","LoginForm","loginAction","redirectUrl","error"],"sources":["/home/jack/Documents/aclue-preprod/web/src/app/(auth)/login/page.tsx"],"sourcesContent":["import React from 'react'\nimport { redirect } from 'next/navigation'\nimport { loginAction, getCurrentUser } from '@/app/actions/auth'\nimport { LoginForm } from '@/components/auth/LoginForm'\n\n// Force dynamic rendering for authentication check\nexport const dynamic = 'force-dynamic'\n\n/**\n * Enhanced Login Page - App Router Implementation\n *\n * Server-rendered authentication page with enhanced security and performance.\n * Part of Phase 3: Tier 1 Migration (85% server components).\n *\n * Features:\n * - Server-side rendering for optimal performance\n * - Server actions for secure form processing\n * - Automatic authentication check and redirect\n * - Enhanced security with minimal client-side JavaScript\n * - Full compatibility with existing Supabase auth system\n *\n * Security Improvements:\n * - Server-side form validation\n * - HTTP-only cookie authentication\n * - CSRF protection\n * - Automatic session validation\n */\n\ninterface LoginPageProps {\n  searchParams: {\n    redirect?: string\n    error?: string\n  }\n}\n\nexport const metadata = {\n  title: 'Sign in - aclue',\n  description: 'Sign in to your aclue account to access personalised gift recommendations',\n}\n\nexport default async function LoginPage({ searchParams }: LoginPageProps) {\n  // Server-side authentication check - redirect if already authenticated\n  const currentUser = await getCurrentUser()\n\n  if (currentUser) {\n    const redirectTo = searchParams.redirect || '/dashboard'\n    redirect(redirectTo)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50 flex flex-col\">\n      <LoginForm\n        loginAction={loginAction}\n        redirectUrl={searchParams.redirect}\n        error={searchParams.error}\n      />\n    </div>\n  )\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAwCAA,OAkBC,WAAAA,CAAA;IAAA;IAAAC,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;WAlB6BC,SAAA;;EAlCjBC,OAAO,WAAAA,CAAA;IAAA;IAAAJ,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;WAAPE,OAAA;;EA6BAC,QAAQ,WAAAA,CAAA;IAAA;IAAAL,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;WAARG,QAAA;;;;;;;;wEAnCK;;;kCACO;;;mCACmB;;;mCAClB;;;;;;;;;;;;;;;AAGnB,MAAMD,OAAA;AAAA;AAAA,CAAAJ,cAAA,GAAAE,CAAA,QAAU;AA6BhB,MAAMG,QAAA;AAAA;AAAA,CAAAL,cAAA,GAAAE,CAAA,QAAW;EACtBI,KAAA,EAAO;EACPC,WAAA,EAAa;AACf;AAEe,eAAeJ,UAAU;EAAEK;AAAY,CAAkB;EAAA;EAAAR,cAAA,GAAAC,CAAA;EACtE;EACA,MAAMQ,WAAA;EAAA;EAAA,CAAAT,cAAA,GAAAE,CAAA,QAAc,MAAM,IAAAQ,KAAA,CAAAC,cAAc;EAAA;EAAAX,cAAA,GAAAE,CAAA;EAExC,IAAIO,WAAA,EAAa;IAAA;IAAAT,cAAA,GAAAY,CAAA;IACf,MAAMC,UAAA;IAAA;IAAA,CAAAb,cAAA,GAAAE,CAAA;IAAa;IAAA,CAAAF,cAAA,GAAAY,CAAA,UAAAJ,YAAA,CAAaM,QAAQ;IAAA;IAAA,CAAAd,cAAA,GAAAY,CAAA,UAAI;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAC5C,IAAAa,WAAA,CAAAD,QAAQ,EAACD,UAAA;EACX;EAAA;EAAA;IAAAb,cAAA,GAAAY,CAAA;EAAA;EAAAZ,cAAA,GAAAE,CAAA;EAEA,oBACE,IAAAc,WAAA,CAAAC,GAAA,EAAC;IAAIC,SAAA,EAAU;cACb,iBAAAF,WAAA,CAAAC,GAAA,EAACE,UAAA,CAAAC,SAAS;MACRC,WAAA,EAAaX,KAAA,CAAAW,WAAW;MACxBC,WAAA,EAAad,YAAA,CAAaM,QAAQ;MAClCS,KAAA,EAAOf,YAAA,CAAae;;;AAI5B","ignoreList":[]}