{"version":3,"sources":["/home/jack/Documents/aclue-preprod/web/src/hooks/useDarkMode.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { appConfig } from '@/config';\n\nexport type Theme = 'light' | 'dark' | 'system';\n\ninterface UseDarkModeReturn {\n  theme: Theme;\n  isDark: boolean;\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n}\n\nexport function useDarkMode(): UseDarkModeReturn {\n  const [theme, setThemeState] = useState<Theme>('system');\n  const [isDark, setIsDark] = useState(false);\n\n  // Initialize theme from localStorage\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const savedTheme = localStorage.getItem(appConfig.storage.theme) as Theme;\n      if (savedTheme && ['light', 'dark', 'system'].includes(savedTheme)) {\n        setThemeState(savedTheme);\n      }\n    }\n  }, []);\n\n  // Update dark mode state based on theme preference\n  useEffect(() => {\n    const updateDarkMode = () => {\n      let shouldBeDark = false;\n\n      if (theme === 'dark') {\n        shouldBeDark = true;\n      } else if (theme === 'light') {\n        shouldBeDark = false;\n      } else if (theme === 'system') {\n        shouldBeDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      }\n\n      setIsDark(shouldBeDark);\n\n      // Update DOM\n      if (typeof window !== 'undefined') {\n        const root = window.document.documentElement;\n        if (shouldBeDark) {\n          root.classList.add('dark');\n        } else {\n          root.classList.remove('dark');\n        }\n      }\n    };\n\n    updateDarkMode();\n\n    // Listen for system theme changes\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n    const handleChange = () => {\n      if (theme === 'system') {\n        updateDarkMode();\n      }\n    };\n\n    mediaQuery.addEventListener('change', handleChange);\n    return () => mediaQuery.removeEventListener('change', handleChange);\n  }, [theme]);\n\n  // Set theme and persist to localStorage\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(appConfig.storage.theme, newTheme);\n    }\n  };\n\n  // Toggle between light and dark mode\n  const toggleTheme = () => {\n    if (theme === 'system') {\n      // If currently system, toggle to the opposite of current dark state\n      setTheme(isDark ? 'light' : 'dark');\n    } else {\n      // If manually set, toggle between light and dark\n      setTheme(theme === 'light' ? 'dark' : 'light');\n    }\n  };\n\n  return {\n    theme,\n    isDark,\n    setTheme,\n    toggleTheme,\n  };\n}"],"names":["useDarkMode","theme","setThemeState","useState","isDark","setIsDark","useEffect","window","savedTheme","localStorage","getItem","appConfig","storage","includes","updateDarkMode","shouldBeDark","matchMedia","matches","root","document","documentElement","classList","add","remove","mediaQuery","handleChange","addEventListener","removeEventListener","setTheme","newTheme","setItem","toggleTheme"],"mappings":";;;;+BAYgBA;;;eAAAA;;;uBAZoB;wBACV;AAWnB,SAASA;IACd,MAAM,CAACC,OAAOC,cAAc,GAAGC,IAAAA,eAAQ,EAAQ;IAC/C,MAAM,CAACC,QAAQC,UAAU,GAAGF,IAAAA,eAAQ,EAAC;IAErC,qCAAqC;IACrCG,IAAAA,gBAAS,EAAC;QACR,IAAI,OAAOC,WAAW,aAAa;YACjC,MAAMC,aAAaC,aAAaC,OAAO,CAACC,iBAAS,CAACC,OAAO,CAACX,KAAK;YAC/D,IAAIO,cAAc;gBAAC;gBAAS;gBAAQ;aAAS,CAACK,QAAQ,CAACL,aAAa;gBAClEN,cAAcM;YAChB;QACF;IACF,GAAG,EAAE;IAEL,mDAAmD;IACnDF,IAAAA,gBAAS,EAAC;QACR,MAAMQ,iBAAiB;YACrB,IAAIC,eAAe;YAEnB,IAAId,UAAU,QAAQ;gBACpBc,eAAe;YACjB,OAAO,IAAId,UAAU,SAAS;gBAC5Bc,eAAe;YACjB,OAAO,IAAId,UAAU,UAAU;gBAC7Bc,eAAeR,OAAOS,UAAU,CAAC,gCAAgCC,OAAO;YAC1E;YAEAZ,UAAUU;YAEV,aAAa;YACb,IAAI,OAAOR,WAAW,aAAa;gBACjC,MAAMW,OAAOX,OAAOY,QAAQ,CAACC,eAAe;gBAC5C,IAAIL,cAAc;oBAChBG,KAAKG,SAAS,CAACC,GAAG,CAAC;gBACrB,OAAO;oBACLJ,KAAKG,SAAS,CAACE,MAAM,CAAC;gBACxB;YACF;QACF;QAEAT;QAEA,kCAAkC;QAClC,MAAMU,aAAajB,OAAOS,UAAU,CAAC;QACrC,MAAMS,eAAe;YACnB,IAAIxB,UAAU,UAAU;gBACtBa;YACF;QACF;QAEAU,WAAWE,gBAAgB,CAAC,UAAUD;QACtC,OAAO,IAAMD,WAAWG,mBAAmB,CAAC,UAAUF;IACxD,GAAG;QAACxB;KAAM;IAEV,wCAAwC;IACxC,MAAM2B,WAAW,CAACC;QAChB3B,cAAc2B;QACd,IAAI,OAAOtB,WAAW,aAAa;YACjCE,aAAaqB,OAAO,CAACnB,iBAAS,CAACC,OAAO,CAACX,KAAK,EAAE4B;QAChD;IACF;IAEA,qCAAqC;IACrC,MAAME,cAAc;QAClB,IAAI9B,UAAU,UAAU;YACtB,oEAAoE;YACpE2B,SAASxB,SAAS,UAAU;QAC9B,OAAO;YACL,iDAAiD;YACjDwB,SAAS3B,UAAU,UAAU,SAAS;QACxC;IACF;IAEA,OAAO;QACLA;QACAG;QACAwB;QACAG;IACF;AACF"}