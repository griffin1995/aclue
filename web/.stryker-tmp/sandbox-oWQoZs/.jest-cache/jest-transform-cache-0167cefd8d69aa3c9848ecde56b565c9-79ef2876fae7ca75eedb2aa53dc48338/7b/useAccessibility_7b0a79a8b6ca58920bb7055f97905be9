343b2943aeac0897b8d2be033c473c64
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "useAccessibility", {
    enumerable: true,
    get: function() {
        return useAccessibility;
    }
});
const _react = require("react");
function useAccessibility(options = {}) {
    const { announcePageChanges = true, enableKeyboardNavigation = true, reducedMotion = true } = options;
    const [isReducedMotion, setIsReducedMotion] = (0, _react.useState)(false);
    // Check for reduced motion preference
    (0, _react.useEffect)(()=>{
        if (!reducedMotion) return;
        const mediaQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
        setIsReducedMotion(mediaQuery.matches);
        const handleChange = (event)=>{
            setIsReducedMotion(event.matches);
        };
        mediaQuery.addEventListener("change", handleChange);
        return ()=>mediaQuery.removeEventListener("change", handleChange);
    }, [
        reducedMotion
    ]);
    // Announce messages to screen readers
    const announceToScreenReader = (0, _react.useCallback)((message)=>{
        const announcement = document.createElement("div");
        announcement.setAttribute("aria-live", "polite");
        announcement.setAttribute("aria-atomic", "true");
        announcement.setAttribute("class", "sr-only");
        announcement.textContent = message;
        document.body.appendChild(announcement);
        // Remove after announcement
        setTimeout(()=>{
            document.body.removeChild(announcement);
        }, 1000);
    }, []);
    // Focus on an element by selector
    const focusOnElement = (0, _react.useCallback)((selector)=>{
        const element = document.querySelector(selector);
        if (element) {
            element.focus();
            // Scroll into view if needed
            element.scrollIntoView({
                behavior: isReducedMotion ? "auto" : "smooth",
                block: "center"
            });
        }
    }, [
        isReducedMotion
    ]);
    // Trap focus within a container (for modals, etc.)
    const trapFocus = (0, _react.useCallback)((container)=>{
        const focusableElements = container.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];
        const handleTabKey = (event)=>{
            if (event.key !== "Tab") return;
            if (event.shiftKey) {
                // Shift + Tab
                if (document.activeElement === firstElement && lastElement) {
                    lastElement.focus();
                    event.preventDefault();
                }
            } else {
                // Tab
                if (document.activeElement === lastElement && firstElement) {
                    firstElement.focus();
                    event.preventDefault();
                }
            }
        };
        const handleEscapeKey = (event)=>{
            if (event.key === "Escape") {
                // Close modal or return focus
                const closeButton = container.querySelector("[data-close]");
                if (closeButton) {
                    closeButton.click();
                }
            }
        };
        document.addEventListener("keydown", handleTabKey);
        document.addEventListener("keydown", handleEscapeKey);
        // Focus first element
        if (firstElement) {
            firstElement.focus();
        }
        // Return cleanup function
        return ()=>{
            document.removeEventListener("keydown", handleTabKey);
            document.removeEventListener("keydown", handleEscapeKey);
        };
    }, []);
    // Get skip navigation links
    const getSkipLinks = (0, _react.useCallback)(()=>{
        return [
            {
                href: "#main-content",
                label: "Skip to main content"
            },
            {
                href: "#navigation",
                label: "Skip to navigation"
            },
            {
                href: "#footer",
                label: "Skip to footer"
            }
        ];
    }, []);
    // Set up keyboard navigation
    (0, _react.useEffect)(()=>{
        if (!enableKeyboardNavigation) return;
        const handleKeyDown = (event)=>{
            // Global keyboard shortcuts
            if (event.altKey) {
                switch(event.key){
                    case "h":
                        // Alt + H: Go to home
                        event.preventDefault();
                        window.location.href = "/";
                        break;
                    case "d":
                        // Alt + D: Go to dashboard
                        event.preventDefault();
                        window.location.href = "/dashboard";
                        break;
                    case "s":
                        // Alt + S: Go to search/discover
                        event.preventDefault();
                        window.location.href = "/discover";
                        break;
                    case "/":
                        // Alt + /: Focus search
                        event.preventDefault();
                        focusOnElement('input[type="search"], input[placeholder*="search" i]');
                        break;
                }
            }
            // Tab navigation enhancements
            if (event.key === "Tab") {
                // Add visible focus indicators
                document.body.classList.add("keyboard-navigation");
            }
        };
        const handleMouseDown = ()=>{
            // Remove keyboard navigation class on mouse use
            document.body.classList.remove("keyboard-navigation");
        };
        document.addEventListener("keydown", handleKeyDown);
        document.addEventListener("mousedown", handleMouseDown);
        return ()=>{
            document.removeEventListener("keydown", handleKeyDown);
            document.removeEventListener("mousedown", handleMouseDown);
        };
    }, [
        enableKeyboardNavigation,
        focusOnElement
    ]);
    // Announce page changes for screen readers
    (0, _react.useEffect)(()=>{
        if (!announcePageChanges) return;
        const announcePageTitle = ()=>{
            const title = document.title;
            if (title) {
                announceToScreenReader(`Page loaded: ${title}`);
            }
        };
        // Announce initial page load
        setTimeout(announcePageTitle, 100);
        // Listen for navigation changes (for SPA routing)
        const handlePopState = ()=>{
            setTimeout(announcePageTitle, 100);
        };
        window.addEventListener("popstate", handlePopState);
        return ()=>window.removeEventListener("popstate", handlePopState);
    }, [
        announcePageChanges,
        announceToScreenReader
    ]);
    return {
        isReducedMotion,
        announceToScreenReader,
        focusOnElement,
        trapFocus,
        getSkipLinks
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2phY2svRG9jdW1lbnRzL2FjbHVlLXByZXByb2Qvd2ViL3NyYy9ob29rcy91c2VBY2Nlc3NpYmlsaXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgVXNlQWNjZXNzaWJpbGl0eU9wdGlvbnMge1xuICBhbm5vdW5jZVBhZ2VDaGFuZ2VzPzogYm9vbGVhbjtcbiAgZW5hYmxlS2V5Ym9hcmROYXZpZ2F0aW9uPzogYm9vbGVhbjtcbiAgcmVkdWNlZE1vdGlvbj86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBVc2VBY2Nlc3NpYmlsaXR5UmV0dXJuIHtcbiAgaXNSZWR1Y2VkTW90aW9uOiBib29sZWFuO1xuICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyOiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICBmb2N1c09uRWxlbWVudDogKHNlbGVjdG9yOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHRyYXBGb2N1czogKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpID0+ICgpID0+IHZvaWQ7XG4gIGdldFNraXBMaW5rczogKCkgPT4geyBocmVmOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfVtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQWNjZXNzaWJpbGl0eShvcHRpb25zOiBVc2VBY2Nlc3NpYmlsaXR5T3B0aW9ucyA9IHt9KTogVXNlQWNjZXNzaWJpbGl0eVJldHVybiB7XG4gIGNvbnN0IHtcbiAgICBhbm5vdW5jZVBhZ2VDaGFuZ2VzID0gdHJ1ZSxcbiAgICBlbmFibGVLZXlib2FyZE5hdmlnYXRpb24gPSB0cnVlLFxuICAgIHJlZHVjZWRNb3Rpb24gPSB0cnVlLFxuICB9ID0gb3B0aW9ucztcblxuICBjb25zdCBbaXNSZWR1Y2VkTW90aW9uLCBzZXRJc1JlZHVjZWRNb3Rpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIENoZWNrIGZvciByZWR1Y2VkIG1vdGlvbiBwcmVmZXJlbmNlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFyZWR1Y2VkTW90aW9uKSByZXR1cm47XG5cbiAgICBjb25zdCBtZWRpYVF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpJyk7XG4gICAgc2V0SXNSZWR1Y2VkTW90aW9uKG1lZGlhUXVlcnkubWF0Y2hlcyk7XG5cbiAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZXZlbnQ6IE1lZGlhUXVlcnlMaXN0RXZlbnQpID0+IHtcbiAgICAgIHNldElzUmVkdWNlZE1vdGlvbihldmVudC5tYXRjaGVzKTtcbiAgICB9O1xuXG4gICAgbWVkaWFRdWVyeS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVDaGFuZ2UpO1xuICAgIHJldHVybiAoKSA9PiBtZWRpYVF1ZXJ5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZUNoYW5nZSk7XG4gIH0sIFtyZWR1Y2VkTW90aW9uXSk7XG5cbiAgLy8gQW5ub3VuY2UgbWVzc2FnZXMgdG8gc2NyZWVuIHJlYWRlcnNcbiAgY29uc3QgYW5ub3VuY2VUb1NjcmVlblJlYWRlciA9IHVzZUNhbGxiYWNrKChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBhbm5vdW5jZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBhbm5vdW5jZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7XG4gICAgYW5ub3VuY2VtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1hdG9taWMnLCAndHJ1ZScpO1xuICAgIGFubm91bmNlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NyLW9ubHknKTtcbiAgICBhbm5vdW5jZW1lbnQudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbm5vdW5jZW1lbnQpO1xuXG4gICAgLy8gUmVtb3ZlIGFmdGVyIGFubm91bmNlbWVudFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhbm5vdW5jZW1lbnQpO1xuICAgIH0sIDEwMDApO1xuICB9LCBbXSk7XG5cbiAgLy8gRm9jdXMgb24gYW4gZWxlbWVudCBieSBzZWxlY3RvclxuICBjb25zdCBmb2N1c09uRWxlbWVudCA9IHVzZUNhbGxiYWNrKChzZWxlY3Rvcjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICBcbiAgICAgIC8vIFNjcm9sbCBpbnRvIHZpZXcgaWYgbmVlZGVkXG4gICAgICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgYmVoYXZpb3I6IGlzUmVkdWNlZE1vdGlvbiA/ICdhdXRvJyA6ICdzbW9vdGgnLFxuICAgICAgICBibG9jazogJ2NlbnRlcicsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtpc1JlZHVjZWRNb3Rpb25dKTtcblxuICAvLyBUcmFwIGZvY3VzIHdpdGhpbiBhIGNvbnRhaW5lciAoZm9yIG1vZGFscywgZXRjLilcbiAgY29uc3QgdHJhcEZvY3VzID0gdXNlQ2FsbGJhY2soKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBmb2N1c2FibGVFbGVtZW50cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgJ2J1dHRvbiwgW2hyZWZdLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJ1xuICAgICkgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG5cbiAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSBmb2N1c2FibGVFbGVtZW50c1swXTtcbiAgICBjb25zdCBsYXN0RWxlbWVudCA9IGZvY3VzYWJsZUVsZW1lbnRzW2ZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgY29uc3QgaGFuZGxlVGFiS2V5ID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ICE9PSAnVGFiJykgcmV0dXJuO1xuXG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgLy8gU2hpZnQgKyBUYWJcbiAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGZpcnN0RWxlbWVudCAmJiBsYXN0RWxlbWVudCkge1xuICAgICAgICAgIGxhc3RFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGFiXG4gICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBsYXN0RWxlbWVudCAmJiBmaXJzdEVsZW1lbnQpIHtcbiAgICAgICAgICBmaXJzdEVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUVzY2FwZUtleSA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgLy8gQ2xvc2UgbW9kYWwgb3IgcmV0dXJuIGZvY3VzXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWNsb3NlXScpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoY2xvc2VCdXR0b24pIHtcbiAgICAgICAgICBjbG9zZUJ1dHRvbi5jbGljaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVUYWJLZXkpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVFc2NhcGVLZXkpO1xuXG4gICAgLy8gRm9jdXMgZmlyc3QgZWxlbWVudFxuICAgIGlmIChmaXJzdEVsZW1lbnQpIHtcbiAgICAgIGZpcnN0RWxlbWVudC5mb2N1cygpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiBjbGVhbnVwIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVUYWJLZXkpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUVzY2FwZUtleSk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIC8vIEdldCBza2lwIG5hdmlnYXRpb24gbGlua3NcbiAgY29uc3QgZ2V0U2tpcExpbmtzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBbXG4gICAgICB7IGhyZWY6ICcjbWFpbi1jb250ZW50JywgbGFiZWw6ICdTa2lwIHRvIG1haW4gY29udGVudCcgfSxcbiAgICAgIHsgaHJlZjogJyNuYXZpZ2F0aW9uJywgbGFiZWw6ICdTa2lwIHRvIG5hdmlnYXRpb24nIH0sXG4gICAgICB7IGhyZWY6ICcjZm9vdGVyJywgbGFiZWw6ICdTa2lwIHRvIGZvb3RlcicgfSxcbiAgICBdO1xuICB9LCBbXSk7XG5cbiAgLy8gU2V0IHVwIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWVuYWJsZUtleWJvYXJkTmF2aWdhdGlvbikgcmV0dXJuO1xuXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgLy8gR2xvYmFsIGtleWJvYXJkIHNob3J0Y3V0c1xuICAgICAgaWYgKGV2ZW50LmFsdEtleSkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgICAgIGNhc2UgJ2gnOlxuICAgICAgICAgICAgLy8gQWx0ICsgSDogR28gdG8gaG9tZVxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAvLyBBbHQgKyBEOiBHbyB0byBkYXNoYm9hcmRcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZGFzaGJvYXJkJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgICAgLy8gQWx0ICsgUzogR28gdG8gc2VhcmNoL2Rpc2NvdmVyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2Rpc2NvdmVyJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJy8nOlxuICAgICAgICAgICAgLy8gQWx0ICsgLzogRm9jdXMgc2VhcmNoXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZm9jdXNPbkVsZW1lbnQoJ2lucHV0W3R5cGU9XCJzZWFyY2hcIl0sIGlucHV0W3BsYWNlaG9sZGVyKj1cInNlYXJjaFwiIGldJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUYWIgbmF2aWdhdGlvbiBlbmhhbmNlbWVudHNcbiAgICAgIGlmIChldmVudC5rZXkgPT09ICdUYWInKSB7XG4gICAgICAgIC8vIEFkZCB2aXNpYmxlIGZvY3VzIGluZGljYXRvcnNcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZC1uYXZpZ2F0aW9uJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZU1vdXNlRG93biA9ICgpID0+IHtcbiAgICAgIC8vIFJlbW92ZSBrZXlib2FyZCBuYXZpZ2F0aW9uIGNsYXNzIG9uIG1vdXNlIHVzZVxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdrZXlib2FyZC1uYXZpZ2F0aW9uJyk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZURvd24pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGhhbmRsZU1vdXNlRG93bik7XG4gICAgfTtcbiAgfSwgW2VuYWJsZUtleWJvYXJkTmF2aWdhdGlvbiwgZm9jdXNPbkVsZW1lbnRdKTtcblxuICAvLyBBbm5vdW5jZSBwYWdlIGNoYW5nZXMgZm9yIHNjcmVlbiByZWFkZXJzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhbm5vdW5jZVBhZ2VDaGFuZ2VzKSByZXR1cm47XG5cbiAgICBjb25zdCBhbm5vdW5jZVBhZ2VUaXRsZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQudGl0bGU7XG4gICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgYW5ub3VuY2VUb1NjcmVlblJlYWRlcihgUGFnZSBsb2FkZWQ6ICR7dGl0bGV9YCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIEFubm91bmNlIGluaXRpYWwgcGFnZSBsb2FkXG4gICAgc2V0VGltZW91dChhbm5vdW5jZVBhZ2VUaXRsZSwgMTAwKTtcblxuICAgIC8vIExpc3RlbiBmb3IgbmF2aWdhdGlvbiBjaGFuZ2VzIChmb3IgU1BBIHJvdXRpbmcpXG4gICAgY29uc3QgaGFuZGxlUG9wU3RhdGUgPSAoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KGFubm91bmNlUGFnZVRpdGxlLCAxMDApO1xuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBoYW5kbGVQb3BTdGF0ZSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIGhhbmRsZVBvcFN0YXRlKTtcbiAgfSwgW2Fubm91bmNlUGFnZUNoYW5nZXMsIGFubm91bmNlVG9TY3JlZW5SZWFkZXJdKTtcblxuICByZXR1cm4ge1xuICAgIGlzUmVkdWNlZE1vdGlvbixcbiAgICBhbm5vdW5jZVRvU2NyZWVuUmVhZGVyLFxuICAgIGZvY3VzT25FbGVtZW50LFxuICAgIHRyYXBGb2N1cyxcbiAgICBnZXRTa2lwTGlua3MsXG4gIH07XG59Il0sIm5hbWVzIjpbInVzZUFjY2Vzc2liaWxpdHkiLCJvcHRpb25zIiwiYW5ub3VuY2VQYWdlQ2hhbmdlcyIsImVuYWJsZUtleWJvYXJkTmF2aWdhdGlvbiIsInJlZHVjZWRNb3Rpb24iLCJpc1JlZHVjZWRNb3Rpb24iLCJzZXRJc1JlZHVjZWRNb3Rpb24iLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIm1lZGlhUXVlcnkiLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImhhbmRsZUNoYW5nZSIsImV2ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhbm5vdW5jZVRvU2NyZWVuUmVhZGVyIiwidXNlQ2FsbGJhY2siLCJtZXNzYWdlIiwiYW5ub3VuY2VtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwidGV4dENvbnRlbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2hpbGQiLCJmb2N1c09uRWxlbWVudCIsInNlbGVjdG9yIiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmb2N1cyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJibG9jayIsInRyYXBGb2N1cyIsImNvbnRhaW5lciIsImZvY3VzYWJsZUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZpcnN0RWxlbWVudCIsImxhc3RFbGVtZW50IiwibGVuZ3RoIiwiaGFuZGxlVGFiS2V5Iiwia2V5Iiwic2hpZnRLZXkiLCJhY3RpdmVFbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVFc2NhcGVLZXkiLCJjbG9zZUJ1dHRvbiIsImNsaWNrIiwiZ2V0U2tpcExpbmtzIiwiaHJlZiIsImxhYmVsIiwiaGFuZGxlS2V5RG93biIsImFsdEtleSIsImxvY2F0aW9uIiwiY2xhc3NMaXN0IiwiYWRkIiwiaGFuZGxlTW91c2VEb3duIiwicmVtb3ZlIiwiYW5ub3VuY2VQYWdlVGl0bGUiLCJ0aXRsZSIsImhhbmRsZVBvcFN0YXRlIl0sIm1hcHBpbmdzIjoiOzs7OytCQWdCZ0JBOzs7ZUFBQUE7Ozt1QkFoQmlDO0FBZ0IxQyxTQUFTQSxpQkFBaUJDLFVBQW1DLENBQUMsQ0FBQztJQUNwRSxNQUFNLEVBQ0pDLHNCQUFzQixJQUFJLEVBQzFCQywyQkFBMkIsSUFBSSxFQUMvQkMsZ0JBQWdCLElBQUksRUFDckIsR0FBR0g7SUFFSixNQUFNLENBQUNJLGlCQUFpQkMsbUJBQW1CLEdBQUdDLElBQUFBLGVBQVEsRUFBQztJQUV2RCxzQ0FBc0M7SUFDdENDLElBQUFBLGdCQUFTLEVBQUM7UUFDUixJQUFJLENBQUNKLGVBQWU7UUFFcEIsTUFBTUssYUFBYUMsT0FBT0MsVUFBVSxDQUFDO1FBQ3JDTCxtQkFBbUJHLFdBQVdHLE9BQU87UUFFckMsTUFBTUMsZUFBZSxDQUFDQztZQUNwQlIsbUJBQW1CUSxNQUFNRixPQUFPO1FBQ2xDO1FBRUFILFdBQVdNLGdCQUFnQixDQUFDLFVBQVVGO1FB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