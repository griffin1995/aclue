{"version":3,"names":["ServerProductCard","product","priority","cov_22ak7rt3ef","b","className","f","s","formatPrice","price","currency","Intl","NumberFormat","style","toUpperCase","format","renderStars","rating","stars","fullStars","Math","floor","hasHalfStar","i","push","_jsxruntime","jsx","viewBox","d","jsxs","id","offset","stopColor","fill","itemScope","itemType","_image","default","src","image_url","alt","name","sizes","itemProp","description","content","category","affiliate_url","href","target","rel","_link"],"sources":["/home/jack/Documents/aclue-preprod/web/src/components/server/products/ServerProductCard.tsx"],"sourcesContent":["import Image from 'next/image'\nimport Link from 'next/link'\n\ninterface Product {\n  id: string\n  name: string\n  description: string\n  price: number\n  currency: string\n  image_url: string\n  category: string\n  rating?: number\n  affiliate_url?: string\n}\n\ninterface ServerProductCardProps {\n  product: Product\n  priority?: boolean\n  className?: string\n}\n\n/**\n * Server Product Card Component\n *\n * Product card rendered on the server for optimal performance.\n * Displays product information with SEO optimisation.\n *\n * Features:\n * - Server-side rendering for SEO\n * - Optimised image loading\n * - Price formatting\n * - Structured data support\n *\n * @param product - Product data\n * @param priority - Whether to prioritise image loading\n * @param className - Additional CSS classes\n */\nexport default function ServerProductCard({\n  product,\n  priority = false,\n  className = ''\n}: ServerProductCardProps) {\n  const formatPrice = (price: number, currency: string) => {\n    return new Intl.NumberFormat('en-GB', {\n      style: 'currency',\n      currency: currency.toUpperCase()\n    }).format(price)\n  }\n\n  const renderStars = (rating?: number) => {\n    if (!rating) return null\n\n    const stars = []\n    const fullStars = Math.floor(rating)\n    const hasHalfStar = rating % 1 !== 0\n\n    for (let i = 0; i < fullStars; i++) {\n      stars.push(\n        <svg key={i} className=\"w-4 h-4 text-yellow-400 fill-current\" viewBox=\"0 0 20 20\">\n          <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n        </svg>\n      )\n    }\n\n    if (hasHalfStar) {\n      stars.push(\n        <svg key=\"half\" className=\"w-4 h-4 text-yellow-400 fill-current\" viewBox=\"0 0 20 20\">\n          <defs>\n            <linearGradient id=\"half-star\">\n              <stop offset=\"50%\" stopColor=\"currentColor\" />\n              <stop offset=\"50%\" stopColor=\"transparent\" />\n            </linearGradient>\n          </defs>\n          <path fill=\"url(#half-star)\" d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n        </svg>\n      )\n    }\n\n    return <div className=\"flex items-center space-x-1\">{stars}</div>\n  }\n\n  return (\n    <article\n      className={`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200 ${className}`}\n      itemScope\n      itemType=\"https://schema.org/Product\"\n    >\n      {/* Product Image */}\n      <div className=\"aspect-square relative overflow-hidden bg-gray-50\">\n        <Image\n          src={product.image_url}\n          alt={product.name}\n          fill\n          sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n          className=\"object-cover hover:scale-105 transition-transform duration-200\"\n          priority={priority}\n          itemProp=\"image\"\n        />\n      </div>\n\n      {/* Product Details */}\n      <div className=\"p-4 space-y-2\">\n        <div className=\"space-y-1\">\n          <h3\n            className=\"font-semibold text-gray-900 line-clamp-2 text-sm\"\n            itemProp=\"name\"\n          >\n            {product.name}\n          </h3>\n          <p\n            className=\"text-gray-600 text-xs line-clamp-2\"\n            itemProp=\"description\"\n          >\n            {product.description}\n          </p>\n        </div>\n\n        {/* Rating */}\n        {product.rating && (\n          <div className=\"flex items-center space-x-2\" itemProp=\"aggregateRating\" itemScope itemType=\"https://schema.org/AggregateRating\">\n            {renderStars(product.rating)}\n            <span className=\"text-xs text-gray-500\" itemProp=\"ratingValue\">{product.rating}</span>\n          </div>\n        )}\n\n        {/* Price */}\n        <div className=\"flex items-center justify-between\">\n          <span\n            className=\"font-bold text-lg text-gray-900\"\n            itemProp=\"offers\"\n            itemScope\n            itemType=\"https://schema.org/Offer\"\n          >\n            <span itemProp=\"price\">{formatPrice(product.price, product.currency)}</span>\n            <meta itemProp=\"priceCurrency\" content={product.currency.toUpperCase()} />\n          </span>\n          <span className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded\">\n            {product.category}\n          </span>\n        </div>\n\n        {/* Action Button */}\n        <div className=\"pt-2\">\n          {product.affiliate_url ? (\n            <a\n              href={product.affiliate_url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-4 rounded-lg transition-colors duration-200 block text-center\"\n            >\n              View Product\n            </a>\n          ) : (\n            <Link\n              href={`/products/${product.id}`}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium py-2 px-4 rounded-lg transition-colors duration-200 block text-center\"\n            >\n              View Details\n            </Link>\n          )}\n        </div>\n      </div>\n    </article>\n  )\n}"],"mappings":"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","ignoreList":[]}