{"version":3,"names":["SearchResults","formatPrice","price","currency","cov_2ii2lj3y01","b","f","s","Intl","NumberFormat","style","format","products","totalResults","currentQuery","sortBy","getSortLabel","_jsxruntime","jsxs","className","jsx","map","product","productName","title","name","_link","default","href","id","_image","src","image_url","alt","fill","sizes","category","affiliate_url","url","target","rel","onClick","e","stopPropagation","_lucidereact","ExternalLink","brand","description","rating","Star","toFixed","length"],"sources":["/home/jack/Documents/aclue-preprod/web/src/components/shop/SearchResults.tsx"],"sourcesContent":["/**\n * Search Results - Server Component with Client Interactivity\n *\n * Displays search results in a grid layout with server-side rendering\n * and client-side interactions for optimal performance.\n */\n\n'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Star, ExternalLink } from 'lucide-react';\n\ninterface Product {\n  id: string;\n  title: string;\n  name?: string;\n  description: string;\n  price: number;\n  currency?: string;\n  image_url: string;\n  brand?: string;\n  category?: {\n    id: string;\n    name: string;\n  };\n  rating?: number;\n  affiliate_url?: string;\n  url?: string;\n}\n\ninterface SearchResultsProps {\n  products: Product[];\n  totalResults: number;\n  currentQuery: string;\n  sortBy: string;\n}\n\nfunction formatPrice(price: number, currency: string = 'GBP'): string {\n  return new Intl.NumberFormat('en-GB', {\n    style: 'currency',\n    currency: currency,\n  }).format(price);\n}\n\nexport function SearchResults({ products, totalResults, currentQuery, sortBy }: SearchResultsProps) {\n  const getSortLabel = (sortBy: string) => {\n    switch (sortBy) {\n      case 'price_asc': return 'Price: Low to High';\n      case 'price_desc': return 'Price: High to Low';\n      case 'rating': return 'Highest Rated';\n      default: return 'Relevance';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Results Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            {currentQuery ? `Results for \"${currentQuery}\"` : 'All Products'}\n          </h2>\n          <p className=\"text-sm text-gray-600\">\n            {totalResults} products found â€¢ Sorted by {getSortLabel(sortBy)}\n          </p>\n        </div>\n      </div>\n\n      {/* Product Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n        {products.map((product) => {\n          const productName = product.title || product.name || 'Product';\n\n          return (\n            <div\n              key={product.id}\n              className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow group\"\n            >\n              {/* Product Image */}\n              <Link href={`/products/${product.id}`} className=\"block\">\n                <div className=\"relative aspect-square bg-gray-100\">\n                  <Image\n                    src={product.image_url}\n                    alt={productName}\n                    fill\n                    className=\"object-cover group-hover:scale-105 transition-transform duration-300\"\n                    sizes=\"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, (max-width: 1280px) 33vw, 25vw\"\n                  />\n\n                  {/* Category Badge */}\n                  {product.category && (\n                    <div className=\"absolute top-3 left-3\">\n                      <span className=\"bg-white/90 backdrop-blur-sm text-gray-800 px-2 py-1 rounded-full text-xs font-medium\">\n                        {product.category.name}\n                      </span>\n                    </div>\n                  )}\n\n                  {/* Quick View Button */}\n                  {(product.affiliate_url || product.url) && (\n                    <div className=\"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <a\n                        href={product.affiliate_url || product.url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        onClick={(e) => e.stopPropagation()}\n                        className=\"bg-white/90 backdrop-blur-sm text-gray-800 p-2 rounded-full hover:bg-white transition-colors\"\n                        title=\"View product\"\n                      >\n                        <ExternalLink className=\"w-4 h-4\" />\n                      </a>\n                    </div>\n                  )}\n                </div>\n              </Link>\n\n              {/* Product Details */}\n              <div className=\"p-4\">\n                <Link href={`/products/${product.id}`}>\n                  <h3 className=\"font-semibold text-gray-900 line-clamp-2 mb-1 group-hover:text-primary-600 transition-colors\">\n                    {productName}\n                  </h3>\n                </Link>\n\n                {product.brand && (\n                  <p className=\"text-sm text-gray-600 mb-2\">{product.brand}</p>\n                )}\n\n                <p className=\"text-sm text-gray-600 line-clamp-2 mb-3\">\n                  {product.description}\n                </p>\n\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-lg font-bold text-gray-900\">\n                    {formatPrice(product.price, product.currency)}\n                  </span>\n\n                  {product.rating && (\n                    <div className=\"flex items-center gap-1\">\n                      <Star className=\"w-4 h-4 text-yellow-400 fill-yellow-400\" />\n                      <span className=\"text-sm font-medium text-gray-900\">\n                        {product.rating.toFixed(1)}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Load More / Pagination */}\n      {products.length >= 20 && (\n        <div className=\"text-center pt-8\">\n          <p className=\"text-sm text-gray-600 mb-4\">\n            Showing {products.length} of {totalResults} results\n          </p>\n          {/* Pagination could be implemented here */}\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]}