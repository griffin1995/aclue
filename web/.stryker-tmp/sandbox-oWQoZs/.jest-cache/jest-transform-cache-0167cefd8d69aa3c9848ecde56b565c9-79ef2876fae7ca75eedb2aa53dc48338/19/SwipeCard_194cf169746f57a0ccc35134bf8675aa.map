{"version":3,"sources":["/home/jack/Documents/aclue-preprod/web/src/components/swipe/SwipeCard.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { motion, useMotionValue, useTransform, PanInfo } from 'framer-motion';\nimport { Heart, X, Star, ExternalLink, Sparkles } from 'lucide-react';\nimport Image from 'next/image';\nimport { Product, SwipeGesture } from '@/types';\nimport { appConfig } from '@/config';\nimport { generateAffiliateLink, trackAffiliateClick, isValidAmazonUrl, extractASIN } from '@/lib/affiliate';\n\ninterface SwipeCardProps {\n  product: Product;\n  index: number;\n  isActive: boolean;\n  onSwipe: (direction: 'left' | 'right' | 'up' | 'down', gesture: SwipeGesture) => void;\n  onProductClick?: (product: Product) => void;\n  className?: string;\n}\n\nexport const SwipeCard: React.FC<SwipeCardProps> = ({\n  product,\n  index,\n  isActive,\n  onSwipe,\n  onProductClick,\n  className = '',\n}) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const [gestureStartTime, setGestureStartTime] = useState(0);\n  const cardRef = useRef<HTMLDivElement>(null);\n  \n  // Motion values for drag tracking - enhanced for mobile\n  const x = useMotionValue(0);\n  const y = useMotionValue(0);\n  const rotate = useTransform(x, [-300, 300], [-30, 30]);\n  const opacity = useTransform(x, [-300, -150, 0, 150, 300], [0, 1, 1, 1, 0]);\n  const scale = useTransform(x, [-150, 0, 150], [0.95, 1, 0.95]);\n  \n  // Transform values for overlay indicators\n  const likeOpacity = useTransform(x, [0, 150], [0, 1]);\n  const dislikeOpacity = useTransform(x, [0, -150], [0, 1]);\n  const superlikeOpacity = useTransform(y, [0, -150], [0, 1]);\n\n  // Format price with currency\n  const formatPrice = (price: number, currency: string = 'USD') => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency,\n    }).format(price);\n  };\n\n  // Calculate discount percentage\n  const discountPercentage = product.original_price \n    ? Math.round(((product.original_price - product.price) / product.original_price) * 100)\n    : 0;\n\n  // Handle pan start - enhanced for mobile\n  const handlePanStart = () => {\n    setIsDragging(true);\n    setGestureStartTime(Date.now());\n    \n    // Haptic feedback on touch start (mobile)\n    if (typeof window !== 'undefined' && 'vibrate' in navigator) {\n      navigator.vibrate(10);\n    }\n    \n    // Prevent scroll on mobile during drag\n    if (typeof document !== 'undefined') {\n      document.body.style.overflow = 'hidden';\n    }\n  };\n\n  // Handle pan end - enhanced for mobile\n  const handlePanEnd = (_event: any, info: PanInfo) => {\n    setIsDragging(false);\n    \n    // Re-enable scroll\n    if (typeof document !== 'undefined') {\n      document.body.style.overflow = 'auto';\n    }\n    \n    const { offset, velocity } = info;\n    const swipeThreshold = appConfig.swipe.distanceThreshold;\n    const velocityThreshold = appConfig.swipe.velocityThreshold;\n    \n    const gestureEndTime = Date.now();\n    const duration = gestureEndTime - gestureStartTime;\n    \n    const gesture: SwipeGesture = {\n      direction: 'right', // Will be updated below\n      velocity: Math.sqrt(velocity.x ** 2 + velocity.y ** 2),\n      distance: Math.sqrt(offset.x ** 2 + offset.y ** 2),\n      duration,\n      startPosition: { x: 0, y: 0 }, // Relative to card center\n      endPosition: { x: offset.x, y: offset.y },\n    };\n\n    // Determine swipe direction\n    const isHorizontalSwipe = Math.abs(offset.x) > Math.abs(offset.y);\n    const isVerticalSwipe = Math.abs(offset.y) > Math.abs(offset.x);\n    \n    let shouldSwipe = false;\n    let direction: 'left' | 'right' | 'up' | 'down' = 'right';\n\n    if (isHorizontalSwipe) {\n      if (Math.abs(offset.x) > swipeThreshold || Math.abs(velocity.x) > velocityThreshold) {\n        shouldSwipe = true;\n        direction = offset.x > 0 ? 'right' : 'left';\n      }\n    } else if (isVerticalSwipe) {\n      if (Math.abs(offset.y) > swipeThreshold || Math.abs(velocity.y) > velocityThreshold) {\n        shouldSwipe = true;\n        direction = offset.y > 0 ? 'down' : 'up';\n      }\n    }\n\n    if (shouldSwipe) {\n      gesture.direction = direction;\n      \n      // Enhanced haptic feedback for mobile\n      if (typeof window !== 'undefined' && 'vibrate' in navigator) {\n        const vibrationPattern = {\n          'right': 50,  // Like - short pleasant buzz\n          'up': [30, 20, 30],  // Super like - double buzz\n          'left': 100,  // Dislike - longer buzz\n          'down': 75   // Down swipe\n        }[direction] || 50;\n        \n        navigator.vibrate(vibrationPattern);\n      }\n      \n      onSwipe(direction, gesture);\n    } else {\n      // Snap back to center\n      x.set(0);\n      y.set(0);\n    }\n  };\n\n  // Handle button clicks\n  const handleDislike = () => {\n    const gesture: SwipeGesture = {\n      direction: 'left',\n      velocity: 1,\n      distance: 200,\n      duration: 300,\n      startPosition: { x: 0, y: 0 },\n      endPosition: { x: -200, y: 0 },\n    };\n    onSwipe('left', gesture);\n  };\n\n  const handleLike = () => {\n    const gesture: SwipeGesture = {\n      direction: 'right',\n      velocity: 1,\n      distance: 200,\n      duration: 300,\n      startPosition: { x: 0, y: 0 },\n      endPosition: { x: 200, y: 0 },\n    };\n    onSwipe('right', gesture);\n  };\n\n  const handleSuperlike = () => {\n    const gesture: SwipeGesture = {\n      direction: 'up',\n      velocity: 1,\n      distance: 200,\n      duration: 300,\n      startPosition: { x: 0, y: 0 },\n      endPosition: { x: 0, y: -200 },\n    };\n    onSwipe('up', gesture);\n  };\n\n  const handleProductClick = async () => {\n    if (onProductClick) {\n      onProductClick(product);\n    }\n    \n    // Generate affiliate link and track click if it's an Amazon product\n    if (product.url && isValidAmazonUrl(product.url)) {\n      const affiliateUrl = generateAffiliateLink(product.url, {\n        campaign: 'gift_recommendation',\n        medium: 'swipe_interface',\n        source: 'product_click',\n        content: 'swipe_card'\n      });\n      \n      // Track the affiliate click\n      await trackAffiliateClick({\n        productId: product.id,\n        asin: extractASIN(product.url),\n        category: product.category.name,\n        price: product.price,\n        currency: product.currency || 'GBP',\n        affiliateUrl,\n        originalUrl: product.url,\n        source: 'recommendation'\n      });\n      \n      // Open affiliate link in new tab\n      window.open(affiliateUrl, '_blank', 'noopener,noreferrer');\n    } else if (product.url) {\n      // Open regular product link\n      window.open(product.url, '_blank', 'noopener,noreferrer');\n    }\n  };\n\n  // Reset position when card becomes active\n  useEffect(() => {\n    if (isActive) {\n      x.set(0);\n      y.set(0);\n    }\n  }, [isActive, x, y]);\n\n  return (\n    <motion.div\n      ref={cardRef}\n      className={`absolute inset-0 cursor-grab active:cursor-grabbing ${className}`}\n      style={{\n        x,\n        y,\n        rotate,\n        opacity,\n        scale,\n        zIndex: isActive ? 20 : 10 - index,\n      }}\n      drag={isActive}\n      dragConstraints={{ left: 0, right: 0, top: 0, bottom: 0 }}\n      dragElastic={0.2}\n      dragMomentum={true}\n      whileDrag={{ \n        scale: 1.05,\n        cursor: 'grabbing',\n        transition: { type: 'spring', stiffness: 400, damping: 30 }\n      }}\n      onPanStart={handlePanStart}\n      onPanEnd={handlePanEnd}\n      initial={{ scale: 0.9, opacity: 0 }}\n      animate={{ \n        scale: isActive ? 1 : 0.95 - (index * 0.05),\n        opacity: isActive ? 1 : 0.7 - (index * 0.2),\n        y: isActive ? 0 : index * 10,\n      }}\n      transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n    >\n      {/* Main Card */}\n      <div className=\"relative w-full h-full bg-white rounded-2xl shadow-2xl overflow-hidden\">\n        {/* Product Image */}\n        <div className=\"relative w-full h-2/3\">\n          <Image\n            src={product.image_url}\n            alt={product.name}\n            fill\n            className=\"object-cover\"\n            sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n            priority={index < 2}\n          />\n          \n          {/* Image Overlay Gradient */}\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent\" />\n          \n          {/* Product Badges */}\n          <div className=\"absolute top-4 left-4 flex flex-col gap-2\">\n            {product.is_featured && (\n              <div className=\"bg-primary-500 text-white px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1\">\n                <Sparkles className=\"w-3 h-3\" />\n                Featured\n              </div>\n            )}\n            {product.is_trending && (\n              <div className=\"bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-medium\">\n                ðŸ”¥ Trending\n              </div>\n            )}\n            {product.is_new && (\n              <div className=\"bg-green-500 text-white px-2 py-1 rounded-full text-xs font-medium\">\n                âœ¨ New\n              </div>\n            )}\n            {discountPercentage > 0 && (\n              <div className=\"bg-red-500 text-white px-2 py-1 rounded-full text-xs font-medium\">\n                -{discountPercentage}%\n              </div>\n            )}\n          </div>\n\n          {/* Product Rating */}\n          {product.rating && (\n            <div className=\"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-full px-2 py-1 flex items-center gap-1\">\n              <Star className=\"w-3 h-3 text-yellow-400 fill-yellow-400\" />\n              <span className=\"text-white text-xs font-medium\">\n                {product.rating.toFixed(1)}\n              </span>\n              {product.review_count && (\n                <span className=\"text-white/70 text-xs\">\n                  ({product.review_count})\n                </span>\n              )}\n            </div>\n          )}\n\n          {/* Swipe Indicators */}\n          <motion.div\n            className=\"absolute inset-0 bg-green-500/90 flex items-center justify-center\"\n            style={{ opacity: likeOpacity }}\n          >\n            <div className=\"bg-white rounded-full p-4\">\n              <Heart className=\"w-8 h-8 text-green-500 fill-green-500\" />\n            </div>\n          </motion.div>\n\n          <motion.div\n            className=\"absolute inset-0 bg-red-500/90 flex items-center justify-center\"\n            style={{ opacity: dislikeOpacity }}\n          >\n            <div className=\"bg-white rounded-full p-4\">\n              <X className=\"w-8 h-8 text-red-500\" />\n            </div>\n          </motion.div>\n\n          <motion.div\n            className=\"absolute inset-0 bg-blue-500/90 flex items-center justify-center\"\n            style={{ opacity: superlikeOpacity }}\n          >\n            <div className=\"bg-white rounded-full p-4\">\n              <Star className=\"w-8 h-8 text-blue-500 fill-blue-500\" />\n            </div>\n          </motion.div>\n        </div>\n\n        {/* Product Information */}\n        <div className=\"p-6 h-1/3 flex flex-col justify-between\">\n          {/* Product Details */}\n          <div className=\"flex-1\">\n            <div className=\"flex items-start justify-between mb-2\">\n              <div className=\"flex-1 min-w-0\">\n                <h3 \n                  className=\"text-lg font-semibold text-gray-900 line-clamp-2 cursor-pointer hover:text-primary-600 transition-colors\"\n                  onClick={handleProductClick}\n                >\n                  {product.name}\n                </h3>\n                <p className=\"text-sm text-gray-600 mt-1\">{product.brand}</p>\n              </div>\n              <button\n                onClick={handleProductClick}\n                className=\"ml-2 p-2 text-gray-400 hover:text-primary-600 transition-colors\"\n                title={product.url && isValidAmazonUrl(product.url) ? 'View on Amazon (affiliate link)' : 'View product'}\n              >\n                <ExternalLink className=\"w-4 h-4\" />\n              </button>\n            </div>\n\n            {/* Price */}\n            <div className=\"flex items-center gap-2 mb-3\">\n              <span className=\"text-xl font-bold text-gray-900\">\n                {formatPrice(product.price, product.currency)}\n              </span>\n              {product.original_price && product.original_price > product.price && (\n                <span className=\"text-sm text-gray-500 line-through\">\n                  {formatPrice(product.original_price, product.currency)}\n                </span>\n              )}\n            </div>\n\n            {/* Category */}\n            <div className=\"flex items-center gap-2 text-xs text-gray-500 mb-2\">\n              <span className=\"px-2 py-1 bg-gray-100 rounded-full\">\n                {product.category.name}\n              </span>\n              <span className=\"px-2 py-1 bg-gray-100 rounded-full\">\n                {product.availability}\n              </span>\n            </div>\n\n          </div>\n\n          {/* Action Buttons */}\n          {isActive && (\n            <div className=\"flex items-center justify-center gap-4 mt-4\">\n              <button\n                onClick={handleDislike}\n                className=\"w-12 h-12 bg-gray-100 hover:bg-red-100 rounded-full flex items-center justify-center transition-colors group\"\n                disabled={isDragging}\n              >\n                <X className=\"w-6 h-6 text-gray-600 group-hover:text-red-500 transition-colors\" />\n              </button>\n\n              <button\n                onClick={handleSuperlike}\n                className=\"w-12 h-12 bg-gray-100 hover:bg-blue-100 rounded-full flex items-center justify-center transition-colors group\"\n                disabled={isDragging}\n              >\n                <Star className=\"w-6 h-6 text-gray-600 group-hover:text-blue-500 transition-colors\" />\n              </button>\n\n              <button\n                onClick={handleLike}\n                className=\"w-12 h-12 bg-gray-100 hover:bg-green-100 rounded-full flex items-center justify-center transition-colors group\"\n                disabled={isDragging}\n              >\n                <Heart className=\"w-6 h-6 text-gray-600 group-hover:text-green-500 transition-colors\" />\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default SwipeCard;"],"names":["SwipeCard","product","index","isActive","onSwipe","onProductClick","className","isDragging","setIsDragging","useState","gestureStartTime","setGestureStartTime","cardRef","useRef","x","useMotionValue","y","rotate","useTransform","opacity","scale","likeOpacity","dislikeOpacity","superlikeOpacity","formatPrice","price","currency","Intl","NumberFormat","style","format","discountPercentage","original_price","Math","round","handlePanStart","Date","now","window","navigator","vibrate","document","body","overflow","handlePanEnd","_event","info","offset","velocity","swipeThreshold","appConfig","swipe","distanceThreshold","velocityThreshold","gestureEndTime","duration","gesture","direction","sqrt","distance","startPosition","endPosition","isHorizontalSwipe","abs","isVerticalSwipe","shouldSwipe","vibrationPattern","set","handleDislike","handleLike","handleSuperlike","handleProductClick","url","isValidAmazonUrl","affiliateUrl","generateAffiliateLink","campaign","medium","source","content","trackAffiliateClick","productId","id","asin","extractASIN","category","name","originalUrl","open","useEffect","motion","div","ref","zIndex","drag","dragConstraints","left","right","top","bottom","dragElastic","dragMomentum","whileDrag","cursor","transition","type","stiffness","damping","onPanStart","onPanEnd","initial","animate","Image","src","image_url","alt","fill","sizes","priority","is_featured","Sparkles","is_trending","is_new","rating","Star","span","toFixed","review_count","Heart","X","h3","onClick","p","brand","button","title","ExternalLink","availability","disabled"],"mappings":"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"}