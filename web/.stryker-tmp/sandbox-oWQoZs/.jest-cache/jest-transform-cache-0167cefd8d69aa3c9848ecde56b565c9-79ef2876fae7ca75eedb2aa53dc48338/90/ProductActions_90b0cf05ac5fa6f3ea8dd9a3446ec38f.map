{"version":3,"names":["ProductActions","product","isAuthenticated","cov_1ymjlcszh0","f","router","s","_navigation","useRouter","isTogglingWishlist","setIsTogglingWishlist","_react","useState","isInWishlist","setIsInWishlist","productName","b","title","name","handleAddToWishlist","_reacthottoast","default","error","push","id","handleToggleWishlist","result","_products","toggleWishlistAction","success","added","message","console","handleShare","shareData","text","url","window","location","href","navigator","share","test","userAgent","Error","fallbackShare","clipboard","writeText","handleViewOnAmazon","productUrl","affiliate_url","_affiliate","isValidAmazonUrl","affiliateUrl","generateAffiliateLink","campaign","medium","source","log","productId","timestamp","Date","toISOString","open","formatPrice","price","currency","Intl","NumberFormat","style","format","_jsxruntime","jsxs","className","jsx","onClick","_lucidereact","ExternalLink","disabled","Heart","Plus","Share2"],"sources":["/home/jack/Documents/aclue-preprod/web/src/components/shop/ProductActions.tsx"],"sourcesContent":["/**\n * Product Actions - Client Component\n *\n * Interactive product action buttons for cart, wishlist, and sharing.\n * Handles user authentication and provides feedback for all actions.\n */\n\n'use client';\n\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Heart, Share2, ExternalLink, Plus } from 'lucide-react';\nimport { toggleWishlistAction } from '@/app/actions/products';\nimport { generateAffiliateLink, isValidAmazonUrl } from '@/lib/affiliate';\nimport toast from 'react-hot-toast';\n\ninterface Product {\n  id: string;\n  title: string;\n  name?: string;\n  price: number;\n  currency?: string;\n  affiliate_url?: string;\n  url?: string;\n  stock_status?: 'in_stock' | 'low_stock' | 'out_of_stock';\n}\n\ninterface ProductActionsProps {\n  product: Product;\n  isAuthenticated: boolean;\n}\n\nexport function ProductActions({ product, isAuthenticated }: ProductActionsProps) {\n  const router = useRouter();\n  const [isTogglingWishlist, setIsTogglingWishlist] = useState(false);\n  const [isInWishlist, setIsInWishlist] = useState(false); // This would normally come from props\n\n  const productName = product.title || product.name || 'Product';\n\n  const handleAddToWishlist = async () => {\n    if (!isAuthenticated) {\n      toast.error('Please sign in to save items to wishlist');\n      router.push(`/auth/login?redirect=/products/${product.id}`);\n      return;\n    }\n\n    await handleToggleWishlist();\n  };\n\n  const handleToggleWishlist = async () => {\n    if (!isAuthenticated) {\n      toast.error('Please sign in to save items to wishlist');\n      router.push(`/auth/login?redirect=/products/${product.id}`);\n      return;\n    }\n\n    setIsTogglingWishlist(true);\n\n    try {\n      const result = await toggleWishlistAction(product.id);\n\n      if (result.success) {\n        setIsInWishlist(result.added || false);\n        toast.success(result.message || 'Wishlist updated!');\n      } else {\n        toast.error(result.error || 'Failed to update wishlist');\n      }\n    } catch (error) {\n      console.error('Error updating wishlist:', error);\n      toast.error('Failed to update wishlist. Please try again.');\n    } finally {\n      setIsTogglingWishlist(false);\n    }\n  };\n\n  const handleShare = async () => {\n    const shareData = {\n      title: productName,\n      text: `Check out this product: ${productName}`,\n      url: window.location.href,\n    };\n\n    if (navigator.share && /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n      try {\n        await navigator.share(shareData);\n      } catch (error) {\n        // User cancelled sharing or error occurred\n        if (error instanceof Error && error.name !== 'AbortError') {\n          await fallbackShare();\n        }\n      }\n    } else {\n      await fallbackShare();\n    }\n  };\n\n  const fallbackShare = async () => {\n    try {\n      await navigator.clipboard.writeText(window.location.href);\n      toast.success('Product link copied to clipboard!');\n    } catch (error) {\n      console.error('Error copying to clipboard:', error);\n      toast.error('Failed to copy link. Please try again.');\n    }\n  };\n\n  const handleViewOnAmazon = () => {\n    const productUrl = product.affiliate_url || product.url;\n\n    if (!productUrl) {\n      toast.error('Amazon link not available for this product');\n      return;\n    }\n\n    // Generate affiliate tracking for revenue\n    if (isValidAmazonUrl(productUrl)) {\n      const affiliateUrl = generateAffiliateLink(productUrl, {\n        campaign: 'wishlist_redirect',\n        medium: 'view_on_amazon_button',\n        source: 'product_page',\n      });\n\n      // Track the affiliate click for analytics\n      console.log('Amazon affiliate click tracked:', {\n        productId: product.id,\n        productName,\n        affiliateUrl,\n        timestamp: new Date().toISOString()\n      });\n\n      window.open(affiliateUrl, '_blank', 'noopener,noreferrer');\n      toast.success('Redirecting to Amazon...');\n    } else {\n      window.open(productUrl, '_blank', 'noopener,noreferrer');\n    }\n  };\n\n  const formatPrice = (price: number, currency: string = 'GBP') => {\n    return new Intl.NumberFormat('en-GB', {\n      style: 'currency',\n      currency: currency,\n    }).format(price);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Price Display */}\n      <div className=\"border-t border-gray-200 pt-6\">\n        <div className=\"text-3xl font-bold text-gray-900\">\n          {formatPrice(product.price, product.currency)}\n        </div>\n      </div>\n\n      {/* Product Availability Status */}\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-2 h-2 rounded-full bg-blue-500\" />\n        <span className=\"text-sm font-medium text-blue-700\">\n          Available on Amazon\n        </span>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"space-y-3\">\n        {/* Primary Action: View on Amazon */}\n        {(product.affiliate_url || product.url) && (\n          <button\n            onClick={handleViewOnAmazon}\n            className=\"w-full flex items-center justify-center gap-2 px-6 py-3 bg-[#ff9900] text-white rounded-lg hover:bg-[#e88800] font-medium transition-colors\"\n          >\n            <ExternalLink className=\"w-5 h-5\" />\n            Buy on Amazon\n          </button>\n        )}\n\n        {/* Secondary Actions */}\n        <div className=\"grid grid-cols-2 gap-3\">\n          {/* Add to Wishlist Button */}\n          <button\n            onClick={handleAddToWishlist}\n            disabled={isTogglingWishlist}\n            className={`flex items-center justify-center gap-2 px-4 py-3 rounded-lg border transition-colors ${\n              isInWishlist\n                ? 'border-primary-300 bg-primary-50 text-primary-700 hover:bg-primary-100'\n                : 'border-gray-300 text-gray-700 hover:bg-gray-50'\n            } disabled:opacity-50`}\n          >\n            {isTogglingWishlist ? (\n              <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n            ) : isInWishlist ? (\n              <Heart className=\"w-4 h-4 fill-current\" />\n            ) : (\n              <Plus className=\"w-4 h-4\" />\n            )}\n            <span className=\"hidden sm:inline\">\n              {isInWishlist ? 'In Wishlist' : 'Add to Wishlist'}\n            </span>\n          </button>\n\n          {/* Share Button */}\n          <button\n            onClick={handleShare}\n            className=\"flex items-center justify-center gap-2 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n          >\n            <Share2 className=\"w-4 h-4\" />\n            <span className=\"hidden sm:inline\">Share</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Authentication Prompt */}\n      {!isAuthenticated && (\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4\">\n          <p className=\"text-sm text-blue-800\">\n            <strong>Sign in</strong> to save items to wishlists, share with friends, and get personalised recommendations.\n          </p>\n          <div className=\"mt-2 space-x-3\">\n            <button\n              onClick={() => router.push(`/auth/login?redirect=/products/${product.id}`)}\n              className=\"text-sm font-medium text-blue-800 underline hover:no-underline\"\n            >\n              Sign In\n            </button>\n            <button\n              onClick={() => router.push(`/auth/register?redirect=/products/${product.id}`)}\n              className=\"text-sm font-medium text-blue-800 underline hover:no-underline\"\n            >\n              Sign Up\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"AAAA;;;;;GAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}