d5858fcf71e32ced734ecdf69a21429c
/**
 * AuthGuard Component Test Suite
 * 
 * Comprehensive tests for the authentication guard component that protects
 * routes and ensures proper access control throughout the application.
 * 
 * Test Coverage:
 * - Authentication state validation
 * - Route protection and redirection logic
 * - Loading states and user experience
 * - Error handling and edge cases
 * - Integration with authentication context
 * 
 * Testing Strategy:
 * Based on React Testing Library patterns for user-centric testing,
 * focusing on behaviour rather than implementation details.
 * 
 * Authentication Context:
 * Tests the integration with AuthContext and proper handling of
 * authenticated vs unauthenticated states for route protection.
 */ // @ts-nocheck
// ==============================================================================
// IMPORTS AND DEPENDENCIES
// ==============================================================================
"use strict";
// Mock Next.js router
jest.mock("next/router", ()=>({
        useRouter: jest.fn()
    }));
// Mock authentication hook
jest.mock("@/hooks/useAuth", ()=>({
        useAuth: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _router = require("next/router");
const _AuthGuard = require("../AuthGuard");
const _useAuth = require("../../../hooks/useAuth");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// ==============================================================================
// TEST SETUP AND UTILITIES
// ==============================================================================
// Mock router implementation
const mockPush = jest.fn();
const mockRouter = {
    push: mockPush,
    pathname: "/dashboard",
    query: {},
    asPath: "/dashboard"
};
// Mock child component for testing
const MockChildComponent = ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        children: "Protected Content"
    });
// Test wrapper component
const TestWrapper = ({ children })=>{
    return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
        "data-testid": "test-wrapper",
        children: children
    });
};
// ==============================================================================
// AUTHENTICATION GUARD TESTS
// ==============================================================================
describe("AuthGuard Component", ()=>{
    // Setup mocks before each test
    beforeEach(()=>{
        jest.clearAllMocks();
        _router.useRouter.mockReturnValue(mockRouter);
    });
    describe("Authenticated User Access", ()=>{
        /**
     * Test authenticated user can access protected content.
     * 
     * Validates that when user is properly authenticated,
     * the AuthGuard renders children without redirecting.
     * 
     * Business Context:
     * Authenticated users should have seamless access to protected
     * routes without unnecessary redirects or loading states.
     */ it("should render protected content for authenticated users", async ()=>{
            // Mock authenticated user state
            _useAuth.useAuth.mockReturnValue({
                user: {
                    id: "user-123",
                    email: "test@aclue.app",
                    firstName: "Test",
                    lastName: "User"
                },
                isAuthenticated: true,
                isLoading: false,
                error: null
            });
            // Render AuthGuard with protected content
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Verify protected content is rendered
            expect(_react1.screen.getByText("Protected Content")).toBeInTheDocument();
            // Verify no redirect occurred
            expect(mockPush).not.toHaveBeenCalled();
        });
        /**
     * Test AuthGuard handles user data properly.
     * 
     * Validates that user information is correctly processed
     * and available to child components through context.
     */ it("should provide user context to protected components", async ()=>{
            const mockUser = {
                id: "user-456",
                email: "premium@aclue.app",
                firstName: "Premium",
                lastName: "User",
                subscriptionTier: "premium"
            };
            _useAuth.useAuth.mockReturnValue({
                user: mockUser,
                isAuthenticated: true,
                isLoading: false,
                error: null
            });
            // Test component that uses auth context
            const TestChildComponent = ()=>{
                const { user } = (0, _useAuth.useAuth)();
                return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            "data-testid": "user-email",
                            children: user?.email
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                            "data-testid": "user-name",
                            children: [
                                user?.firstName,
                                " ",
                                user?.lastName
                            ]
                        })
                    ]
                });
            };
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(TestChildComponent, {})
            }));
            // Verify user data is accessible
            expect(_react1.screen.getByTestId("user-email")).toHaveTextContent("premium@aclue.app");
            expect(_react1.screen.getByTestId("user-name")).toHaveTextContent("Premium User");
        });
    });
    describe("Unauthenticated User Handling", ()=>{
        /**
     * Test unauthenticated user redirection to login.
     * 
     * Validates that users without valid authentication
     * are redirected to the login page with proper return URL.
     * 
     * Security Context:
     * Critical security feature ensuring protected routes
     * are not accessible without proper authentication.
     */ it("should redirect unauthenticated users to login", async ()=>{
            // Mock unauthenticated state
            _useAuth.useAuth.mockReturnValue({
                user: null,
                isAuthenticated: false,
                isLoading: false,
                error: null
            });
            // Render AuthGuard
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Wait for redirect to occur
            await (0, _react1.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith("/auth/login?returnUrl=/dashboard");
            });
            // Verify protected content is not rendered
            expect(_react1.screen.queryByText("Protected Content")).not.toBeInTheDocument();
        });
        /**
     * Test proper return URL construction for redirects.
     * 
     * Validates that users are redirected back to their original
     * destination after successful authentication.
     */ it("should preserve return URL for post-login redirect", async ()=>{
            // Mock complex route with query parameters
            _router.useRouter.mockReturnValue({
                ...mockRouter,
                asPath: "/dashboard/recommendations?category=electronics&price=100-500"
            });
            _useAuth.useAuth.mockReturnValue({
                user: null,
                isAuthenticated: false,
                isLoading: false,
                error: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Wait for redirect with encoded return URL
            await (0, _react1.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith("/auth/login?returnUrl=" + encodeURIComponent("/dashboard/recommendations?category=electronics&price=100-500"));
            });
        });
    });
    describe("Loading States", ()=>{
        /**
     * Test loading state display during authentication check.
     * 
     * Validates that appropriate loading UI is shown while
     * authentication status is being determined.
     * 
     * User Experience Context:
     * Prevents flash of unauthenticated content and provides
     * smooth loading experience during auth state resolution.
     */ it("should display loading state during authentication check", ()=>{
            // Mock loading authentication state
            _useAuth.useAuth.mockReturnValue({
                user: null,
                isAuthenticated: false,
                isLoading: true,
                error: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Verify loading indicator is displayed
            expect(_react1.screen.getByText("Loading...")).toBeInTheDocument();
            expect(_react1.screen.queryByText("Protected Content")).not.toBeInTheDocument();
            // Verify no redirect during loading
            expect(mockPush).not.toHaveBeenCalled();
        });
        /**
     * Test loading state with custom loading component.
     * 
     * Validates that custom loading components can be provided
     * for branded loading experiences.
     */ it("should render custom loading component when provided", ()=>{
            const CustomLoader = ()=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    "data-testid": "custom-loader",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "spinner"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            children: "Authenticating..."
                        })
                    ]
                });
            _useAuth.useAuth.mockReturnValue({
                user: null,
                isAuthenticated: false,
                isLoading: true,
                error: null
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                loadingComponent: /*#__PURE__*/ (0, _jsxruntime.jsx)(CustomLoader, {}),
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Verify custom loading component is rendered
            expect(_react1.screen.getByTestId("custom-loader")).toBeInTheDocument();
            expect(_react1.screen.getByText("Authenticating...")).toBeInTheDocument();
            expect(_react1.screen.queryByText("Loading...")).not.toBeInTheDocument();
        });
    });
    describe("Error Handling", ()=>{
        /**
     * Test authentication error handling and display.
     * 
     * Validates that authentication errors are properly handled
     * with appropriate error messages and recovery options.
     * 
     * Error Handling Context:
     * Users should be informed of authentication failures
     * with clear next steps for resolution.
     */ it("should handle and display authentication errors", ()=>{
            const authError = {
                message: "Authentication failed",
                code: "AUTH_ERROR"
            };
            _useAuth.useAuth.mockReturnValue({
                user: null,
                isAuthenticated: false,
                isLoading: false,
                error: authError
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Verify error message is displayed
            expect(_react1.screen.getByText("Authentication Error")).toBeInTheDocument();
            expect(_react1.screen.getByText("Authentication failed")).toBeInTheDocument();
            // Verify protected content is not rendered
            expect(_react1.screen.queryByText("Protected Content")).not.toBeInTheDocument();
        });
        /**
     * Test token expiration handling.
     * 
     * Validates that expired tokens are handled gracefully
     * with automatic redirect to login for re-authentication.
     */ it("should handle token expiration gracefully", async ()=>{
            const tokenExpiredError = {
                message: "Token has expired",
                code: "TOKEN_EXPIRED"
            };
            _useAuth.useAuth.mockReturnValue({
                user: null,
                isAuthenticated: false,
                isLoading: false,
                error: tokenExpiredError
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Verify redirect to login occurs
            await (0, _react1.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith("/auth/login?returnUrl=/dashboard");
            });
        });
    });
    describe("Role-Based Access Control", ()=>{
        /**
     * Test role-based access restrictions.
     * 
     * Validates that users with insufficient permissions
     * are properly restricted from accessing protected content.
     * 
     * Authorization Context:
     * Different user roles (free, premium, admin) should have
     * appropriate access controls for feature gating.
     */ it("should restrict access based on required roles", ()=>{
            // Mock user with basic role
            _useAuth.useAuth.mockReturnValue({
                user: {
                    id: "user-789",
                    email: "basic@aclue.app",
                    firstName: "Basic",
                    lastName: "User",
                    subscriptionTier: "free"
                },
                isAuthenticated: true,
                isLoading: false,
                error: null
            });
            // AuthGuard with premium role requirement
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                requiredRole: "premium",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Verify access denied message
            expect(_react1.screen.getByText("Access Denied")).toBeInTheDocument();
            expect(_react1.screen.getByText("Upgrade to Premium")).toBeInTheDocument();
            expect(_react1.screen.queryByText("Protected Content")).not.toBeInTheDocument();
        });
        /**
     * Test successful role-based access.
     * 
     * Validates that users with sufficient permissions
     * can access role-protected content.
     */ it("should grant access to users with sufficient roles", ()=>{
            // Mock user with premium role
            _useAuth.useAuth.mockReturnValue({
                user: {
                    id: "user-890",
                    email: "premium@aclue.app",
                    firstName: "Premium",
                    lastName: "User",
                    subscriptionTier: "premium"
                },
                isAuthenticated: true,
                isLoading: false,
                error: null
            });
            // AuthGuard with premium role requirement
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                requiredRole: "premium",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
            }));
            // Verify access granted
            expect(_react1.screen.getByText("Protected Content")).toBeInTheDocument();
            expect(_react1.screen.queryByText("Access Denied")).not.toBeInTheDocument();
        });
    });
    describe("Integration Tests", ()=>{
        /**
     * Test integration with authentication context changes.
     * 
     * Validates that AuthGuard properly responds to changes
     * in authentication state during component lifecycle.
     */ it("should respond to authentication state changes", async ()=>{
            // Start with unauthenticated state
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
                })
            }));
            // Initially unauthenticated
            _useAuth.useAuth.mockReturnValue({
                user: null,
                isAuthenticated: false,
                isLoading: false,
                error: null
            });
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
                })
            }));
            // Should redirect to login
            await (0, _react1.waitFor)(()=>{
                expect(mockPush).toHaveBeenCalledWith("/auth/login?returnUrl=/dashboard");
            });
            // Clear the mock and update to authenticated state
            mockPush.mockClear();
            _useAuth.useAuth.mockReturnValue({
                user: {
                    id: "user-991",
                    email: "newauth@aclue.app",
                    firstName: "New",
                    lastName: "User"
                },
                isAuthenticated: true,
                isLoading: false,
                error: null
            });
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(MockChildComponent, {})
                })
            }));
            // Should now render protected content
            expect(_react1.screen.getByText("Protected Content")).toBeInTheDocument();
            expect(mockPush).not.toHaveBeenCalled();
        });
        /**
     * Test AuthGuard with multiple children components.
     * 
     * Validates that complex component trees are properly
     * handled within authentication protection.
     */ it("should handle complex component trees", ()=>{
            _useAuth.useAuth.mockReturnValue({
                user: {
                    id: "user-992",
                    email: "complex@aclue.app",
                    firstName: "Complex",
                    lastName: "User"
                },
                isAuthenticated: true,
                isLoading: false,
                error: null
            });
            const ComplexChildren = ()=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("header", {
                            "data-testid": "protected-header",
                            children: "Protected Header"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("main", {
                            "data-testid": "protected-main",
                            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("section", {
                                "data-testid": "protected-section",
                                children: "Protected Section"
                            })
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("footer", {
                            "data-testid": "protected-footer",
                            children: "Protected Footer"
                        })
                    ]
                });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_AuthGuard.AuthGuard, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(ComplexChildren, {})
            }));
            // Verify all protected elements are rendered
            expect(_react1.screen.getByTestId("protected-header")).toBeInTheDocument();
            expect(_react1.screen.getByTestId("protected-main")).toBeInTheDocument();
            expect(_react1.screen.getByTestId("protected-section")).toBeInTheDocument();
            expect(_react1.screen.getByTestId("protected-footer")).toBeInTheDocument();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2phY2svRG9jdW1lbnRzL2FjbHVlLXByZXByb2Qvd2ViLy5zdHJ5a2VyLXRtcC9zYW5kYm94LW9XUW9acy9zcmMvY29tcG9uZW50cy9hdXRoL19fdGVzdHNfXy9BdXRoR3VhcmQudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdXRoR3VhcmQgQ29tcG9uZW50IFRlc3QgU3VpdGVcbiAqIFxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0cyBmb3IgdGhlIGF1dGhlbnRpY2F0aW9uIGd1YXJkIGNvbXBvbmVudCB0aGF0IHByb3RlY3RzXG4gKiByb3V0ZXMgYW5kIGVuc3VyZXMgcHJvcGVyIGFjY2VzcyBjb250cm9sIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uLlxuICogXG4gKiBUZXN0IENvdmVyYWdlOlxuICogLSBBdXRoZW50aWNhdGlvbiBzdGF0ZSB2YWxpZGF0aW9uXG4gKiAtIFJvdXRlIHByb3RlY3Rpb24gYW5kIHJlZGlyZWN0aW9uIGxvZ2ljXG4gKiAtIExvYWRpbmcgc3RhdGVzIGFuZCB1c2VyIGV4cGVyaWVuY2VcbiAqIC0gRXJyb3IgaGFuZGxpbmcgYW5kIGVkZ2UgY2FzZXNcbiAqIC0gSW50ZWdyYXRpb24gd2l0aCBhdXRoZW50aWNhdGlvbiBjb250ZXh0XG4gKiBcbiAqIFRlc3RpbmcgU3RyYXRlZ3k6XG4gKiBCYXNlZCBvbiBSZWFjdCBUZXN0aW5nIExpYnJhcnkgcGF0dGVybnMgZm9yIHVzZXItY2VudHJpYyB0ZXN0aW5nLFxuICogZm9jdXNpbmcgb24gYmVoYXZpb3VyIHJhdGhlciB0aGFuIGltcGxlbWVudGF0aW9uIGRldGFpbHMuXG4gKiBcbiAqIEF1dGhlbnRpY2F0aW9uIENvbnRleHQ6XG4gKiBUZXN0cyB0aGUgaW50ZWdyYXRpb24gd2l0aCBBdXRoQ29udGV4dCBhbmQgcHJvcGVyIGhhbmRsaW5nIG9mXG4gKiBhdXRoZW50aWNhdGVkIHZzIHVuYXV0aGVudGljYXRlZCBzdGF0ZXMgZm9yIHJvdXRlIHByb3RlY3Rpb24uXG4gKi9cbi8vIEB0cy1ub2NoZWNrXG5cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBJTVBPUlRTIEFORCBERVBFTkRFTkNJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IEF1dGhHdWFyZCB9IGZyb20gJy4uL0F1dGhHdWFyZCc7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSAnQC9ob29rcy91c2VBdXRoJztcblxuLy8gTW9jayBOZXh0LmpzIHJvdXRlclxuamVzdC5tb2NrKCduZXh0L3JvdXRlcicsICgpID0+ICh7XG4gIHVzZVJvdXRlcjogamVzdC5mbigpLFxufSkpO1xuXG4vLyBNb2NrIGF1dGhlbnRpY2F0aW9uIGhvb2tcbmplc3QubW9jaygnQC9ob29rcy91c2VBdXRoJywgKCkgPT4gKHtcbiAgdXNlQXV0aDogamVzdC5mbigpLFxufSkpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRFU1QgU0VUVVAgQU5EIFVUSUxJVElFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIE1vY2sgcm91dGVyIGltcGxlbWVudGF0aW9uXG5jb25zdCBtb2NrUHVzaCA9IGplc3QuZm4oKTtcbmNvbnN0IG1vY2tSb3V0ZXIgPSB7XG4gIHB1c2g6IG1vY2tQdXNoLFxuICBwYXRobmFtZTogJy9kYXNoYm9hcmQnLFxuICBxdWVyeToge30sXG4gIGFzUGF0aDogJy9kYXNoYm9hcmQnLFxufTtcblxuLy8gTW9jayBjaGlsZCBjb21wb25lbnQgZm9yIHRlc3RpbmdcbmNvbnN0IE1vY2tDaGlsZENvbXBvbmVudCA9ICgpID0+IDxkaXY+UHJvdGVjdGVkIENvbnRlbnQ8L2Rpdj47XG5cbi8vIFRlc3Qgd3JhcHBlciBjb21wb25lbnRcbmNvbnN0IFRlc3RXcmFwcGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gIHJldHVybiA8ZGl2IGRhdGEtdGVzdGlkPVwidGVzdC13cmFwcGVyXCI+e2NoaWxkcmVufTwvZGl2Pjtcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVVUSEVOVElDQVRJT04gR1VBUkQgVEVTVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5kZXNjcmliZSgnQXV0aEd1YXJkIENvbXBvbmVudCcsICgpID0+IHtcbiAgLy8gU2V0dXAgbW9ja3MgYmVmb3JlIGVhY2ggdGVzdFxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAodXNlUm91dGVyIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tSb3V0ZXIpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQXV0aGVudGljYXRlZCBVc2VyIEFjY2VzcycsICgpID0+IHtcbiAgICAvKipcbiAgICAgKiBUZXN0IGF1dGhlbnRpY2F0ZWQgdXNlciBjYW4gYWNjZXNzIHByb3RlY3RlZCBjb250ZW50LlxuICAgICAqIFxuICAgICAqIFZhbGlkYXRlcyB0aGF0IHdoZW4gdXNlciBpcyBwcm9wZXJseSBhdXRoZW50aWNhdGVkLFxuICAgICAqIHRoZSBBdXRoR3VhcmQgcmVuZGVycyBjaGlsZHJlbiB3aXRob3V0IHJlZGlyZWN0aW5nLlxuICAgICAqIFxuICAgICAqIEJ1c2luZXNzIENvbnRleHQ6XG4gICAgICogQXV0aGVudGljYXRlZCB1c2VycyBzaG91bGQgaGF2ZSBzZWFtbGVzcyBhY2Nlc3MgdG8gcHJvdGVjdGVkXG4gICAgICogcm91dGVzIHdpdGhvdXQgdW5uZWNlc3NhcnkgcmVkaXJlY3RzIG9yIGxvYWRpbmcgc3RhdGVzLlxuICAgICAqL1xuICAgIGl0KCdzaG91bGQgcmVuZGVyIHByb3RlY3RlZCBjb250ZW50IGZvciBhdXRoZW50aWNhdGVkIHVzZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBhdXRoZW50aWNhdGVkIHVzZXIgc3RhdGVcbiAgICAgICh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiAndXNlci0xMjMnLFxuICAgICAgICAgIGVtYWlsOiAndGVzdEBhY2x1ZS5hcHAnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgICAgIH0sXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgLy8gUmVuZGVyIEF1dGhHdWFyZCB3aXRoIHByb3RlY3RlZCBjb250ZW50XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPE1vY2tDaGlsZENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIC8vIFZlcmlmeSBwcm90ZWN0ZWQgY29udGVudCBpcyByZW5kZXJlZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb3RlY3RlZCBDb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBubyByZWRpcmVjdCBvY2N1cnJlZFxuICAgICAgZXhwZWN0KG1vY2tQdXNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGVzdCBBdXRoR3VhcmQgaGFuZGxlcyB1c2VyIGRhdGEgcHJvcGVybHkuXG4gICAgICogXG4gICAgICogVmFsaWRhdGVzIHRoYXQgdXNlciBpbmZvcm1hdGlvbiBpcyBjb3JyZWN0bHkgcHJvY2Vzc2VkXG4gICAgICogYW5kIGF2YWlsYWJsZSB0byBjaGlsZCBjb21wb25lbnRzIHRocm91Z2ggY29udGV4dC5cbiAgICAgKi9cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgdXNlciBjb250ZXh0IHRvIHByb3RlY3RlZCBjb21wb25lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1VzZXIgPSB7XG4gICAgICAgIGlkOiAndXNlci00NTYnLFxuICAgICAgICBlbWFpbDogJ3ByZW1pdW1AYWNsdWUuYXBwJyxcbiAgICAgICAgZmlyc3ROYW1lOiAnUHJlbWl1bScsXG4gICAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgICAgIHN1YnNjcmlwdGlvblRpZXI6ICdwcmVtaXVtJyxcbiAgICAgIH07XG5cbiAgICAgICh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbW9ja1VzZXIsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgLy8gVGVzdCBjb21wb25lbnQgdGhhdCB1c2VzIGF1dGggY29udGV4dFxuICAgICAgY29uc3QgVGVzdENoaWxkQ29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHVzZXIgfSA9IHVzZUF1dGgoKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPHNwYW4gZGF0YS10ZXN0aWQ9XCJ1c2VyLWVtYWlsXCI+e3VzZXI/LmVtYWlsfTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGRhdGEtdGVzdGlkPVwidXNlci1uYW1lXCI+e3VzZXI/LmZpcnN0TmFtZX0ge3VzZXI/Lmxhc3ROYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICA8VGVzdENoaWxkQ29tcG9uZW50IC8+XG4gICAgICAgIDwvQXV0aEd1YXJkPlxuICAgICAgKTtcblxuICAgICAgLy8gVmVyaWZ5IHVzZXIgZGF0YSBpcyBhY2Nlc3NpYmxlXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd1c2VyLWVtYWlsJykpLnRvSGF2ZVRleHRDb250ZW50KCdwcmVtaXVtQGFjbHVlLmFwcCcpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgndXNlci1uYW1lJykpLnRvSGF2ZVRleHRDb250ZW50KCdQcmVtaXVtIFVzZXInKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1VuYXV0aGVudGljYXRlZCBVc2VyIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIFRlc3QgdW5hdXRoZW50aWNhdGVkIHVzZXIgcmVkaXJlY3Rpb24gdG8gbG9naW4uXG4gICAgICogXG4gICAgICogVmFsaWRhdGVzIHRoYXQgdXNlcnMgd2l0aG91dCB2YWxpZCBhdXRoZW50aWNhdGlvblxuICAgICAqIGFyZSByZWRpcmVjdGVkIHRvIHRoZSBsb2dpbiBwYWdlIHdpdGggcHJvcGVyIHJldHVybiBVUkwuXG4gICAgICogXG4gICAgICogU2VjdXJpdHkgQ29udGV4dDpcbiAgICAgKiBDcml0aWNhbCBzZWN1cml0eSBmZWF0dXJlIGVuc3VyaW5nIHByb3RlY3RlZCByb3V0ZXNcbiAgICAgKiBhcmUgbm90IGFjY2Vzc2libGUgd2l0aG91dCBwcm9wZXIgYXV0aGVudGljYXRpb24uXG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCByZWRpcmVjdCB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMgdG8gbG9naW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHVuYXV0aGVudGljYXRlZCBzdGF0ZVxuICAgICAgKHVzZUF1dGggYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZW5kZXIgQXV0aEd1YXJkXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPE1vY2tDaGlsZENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIHJlZGlyZWN0IHRvIG9jY3VyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tQdXNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2F1dGgvbG9naW4/cmV0dXJuVXJsPS9kYXNoYm9hcmQnKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBWZXJpZnkgcHJvdGVjdGVkIGNvbnRlbnQgaXMgbm90IHJlbmRlcmVkXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdQcm90ZWN0ZWQgQ29udGVudCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRlc3QgcHJvcGVyIHJldHVybiBVUkwgY29uc3RydWN0aW9uIGZvciByZWRpcmVjdHMuXG4gICAgICogXG4gICAgICogVmFsaWRhdGVzIHRoYXQgdXNlcnMgYXJlIHJlZGlyZWN0ZWQgYmFjayB0byB0aGVpciBvcmlnaW5hbFxuICAgICAqIGRlc3RpbmF0aW9uIGFmdGVyIHN1Y2Nlc3NmdWwgYXV0aGVudGljYXRpb24uXG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCBwcmVzZXJ2ZSByZXR1cm4gVVJMIGZvciBwb3N0LWxvZ2luIHJlZGlyZWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBjb21wbGV4IHJvdXRlIHdpdGggcXVlcnkgcGFyYW1ldGVyc1xuICAgICAgKHVzZVJvdXRlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIC4uLm1vY2tSb3V0ZXIsXG4gICAgICAgIGFzUGF0aDogJy9kYXNoYm9hcmQvcmVjb21tZW5kYXRpb25zP2NhdGVnb3J5PWVsZWN0cm9uaWNzJnByaWNlPTEwMC01MDAnLFxuICAgICAgfSk7XG5cbiAgICAgICh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxNb2NrQ2hpbGRDb21wb25lbnQgLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICAvLyBXYWl0IGZvciByZWRpcmVjdCB3aXRoIGVuY29kZWQgcmV0dXJuIFVSTFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrUHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICAgJy9hdXRoL2xvZ2luP3JldHVyblVybD0nICsgXG4gICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KCcvZGFzaGJvYXJkL3JlY29tbWVuZGF0aW9ucz9jYXRlZ29yeT1lbGVjdHJvbmljcyZwcmljZT0xMDAtNTAwJylcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9hZGluZyBTdGF0ZXMnLCAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogVGVzdCBsb2FkaW5nIHN0YXRlIGRpc3BsYXkgZHVyaW5nIGF1dGhlbnRpY2F0aW9uIGNoZWNrLlxuICAgICAqIFxuICAgICAqIFZhbGlkYXRlcyB0aGF0IGFwcHJvcHJpYXRlIGxvYWRpbmcgVUkgaXMgc2hvd24gd2hpbGVcbiAgICAgKiBhdXRoZW50aWNhdGlvbiBzdGF0dXMgaXMgYmVpbmcgZGV0ZXJtaW5lZC5cbiAgICAgKiBcbiAgICAgKiBVc2VyIEV4cGVyaWVuY2UgQ29udGV4dDpcbiAgICAgKiBQcmV2ZW50cyBmbGFzaCBvZiB1bmF1dGhlbnRpY2F0ZWQgY29udGVudCBhbmQgcHJvdmlkZXNcbiAgICAgKiBzbW9vdGggbG9hZGluZyBleHBlcmllbmNlIGR1cmluZyBhdXRoIHN0YXRlIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IGxvYWRpbmcgc3RhdGUgZHVyaW5nIGF1dGhlbnRpY2F0aW9uIGNoZWNrJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayBsb2FkaW5nIGF1dGhlbnRpY2F0aW9uIHN0YXRlXG4gICAgICAodXNlQXV0aCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxNb2NrQ2hpbGRDb21wb25lbnQgLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICAvLyBWZXJpZnkgbG9hZGluZyBpbmRpY2F0b3IgaXMgZGlzcGxheWVkXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTG9hZGluZy4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnUHJvdGVjdGVkIENvbnRlbnQnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBubyByZWRpcmVjdCBkdXJpbmcgbG9hZGluZ1xuICAgICAgZXhwZWN0KG1vY2tQdXNoKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGVzdCBsb2FkaW5nIHN0YXRlIHdpdGggY3VzdG9tIGxvYWRpbmcgY29tcG9uZW50LlxuICAgICAqIFxuICAgICAqIFZhbGlkYXRlcyB0aGF0IGN1c3RvbSBsb2FkaW5nIGNvbXBvbmVudHMgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogZm9yIGJyYW5kZWQgbG9hZGluZyBleHBlcmllbmNlcy5cbiAgICAgKi9cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBjdXN0b20gbG9hZGluZyBjb21wb25lbnQgd2hlbiBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IEN1c3RvbUxvYWRlciA9ICgpID0+IChcbiAgICAgICAgPGRpdiBkYXRhLXRlc3RpZD1cImN1c3RvbS1sb2FkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwaW5uZXJcIiAvPlxuICAgICAgICAgIDxzcGFuPkF1dGhlbnRpY2F0aW5nLi4uPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG5cbiAgICAgICh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjogbnVsbCxcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxBdXRoR3VhcmQgbG9hZGluZ0NvbXBvbmVudD17PEN1c3RvbUxvYWRlciAvPn0+XG4gICAgICAgICAgPE1vY2tDaGlsZENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIC8vIFZlcmlmeSBjdXN0b20gbG9hZGluZyBjb21wb25lbnQgaXMgcmVuZGVyZWRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ2N1c3RvbS1sb2FkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBdXRoZW50aWNhdGluZy4uLicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnTG9hZGluZy4uLicpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIFRlc3QgYXV0aGVudGljYXRpb24gZXJyb3IgaGFuZGxpbmcgYW5kIGRpc3BsYXkuXG4gICAgICogXG4gICAgICogVmFsaWRhdGVzIHRoYXQgYXV0aGVudGljYXRpb24gZXJyb3JzIGFyZSBwcm9wZXJseSBoYW5kbGVkXG4gICAgICogd2l0aCBhcHByb3ByaWF0ZSBlcnJvciBtZXNzYWdlcyBhbmQgcmVjb3Zlcnkgb3B0aW9ucy5cbiAgICAgKiBcbiAgICAgKiBFcnJvciBIYW5kbGluZyBDb250ZXh0OlxuICAgICAqIFVzZXJzIHNob3VsZCBiZSBpbmZvcm1lZCBvZiBhdXRoZW50aWNhdGlvbiBmYWlsdXJlc1xuICAgICAqIHdpdGggY2xlYXIgbmV4dCBzdGVwcyBmb3IgcmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhbmQgZGlzcGxheSBhdXRoZW50aWNhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBhdXRoRXJyb3IgPSB7XG4gICAgICAgIG1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnLFxuICAgICAgICBjb2RlOiAnQVVUSF9FUlJPUicsXG4gICAgICB9O1xuXG4gICAgICAodXNlQXV0aCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBhdXRoRXJyb3IsXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxNb2NrQ2hpbGRDb21wb25lbnQgLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICAvLyBWZXJpZnkgZXJyb3IgbWVzc2FnZSBpcyBkaXNwbGF5ZWRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBdXRoZW50aWNhdGlvbiBFcnJvcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgcHJvdGVjdGVkIGNvbnRlbnQgaXMgbm90IHJlbmRlcmVkXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdQcm90ZWN0ZWQgQ29udGVudCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRlc3QgdG9rZW4gZXhwaXJhdGlvbiBoYW5kbGluZy5cbiAgICAgKiBcbiAgICAgKiBWYWxpZGF0ZXMgdGhhdCBleHBpcmVkIHRva2VucyBhcmUgaGFuZGxlZCBncmFjZWZ1bGx5XG4gICAgICogd2l0aCBhdXRvbWF0aWMgcmVkaXJlY3QgdG8gbG9naW4gZm9yIHJlLWF1dGhlbnRpY2F0aW9uLlxuICAgICAqL1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRva2VuIGV4cGlyYXRpb24gZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRva2VuRXhwaXJlZEVycm9yID0ge1xuICAgICAgICBtZXNzYWdlOiAnVG9rZW4gaGFzIGV4cGlyZWQnLFxuICAgICAgICBjb2RlOiAnVE9LRU5fRVhQSVJFRCcsXG4gICAgICB9O1xuXG4gICAgICAodXNlQXV0aCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiB0b2tlbkV4cGlyZWRFcnJvcixcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgPE1vY2tDaGlsZENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIC8vIFZlcmlmeSByZWRpcmVjdCB0byBsb2dpbiBvY2N1cnNcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1B1c2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXV0aC9sb2dpbj9yZXR1cm5Vcmw9L2Rhc2hib2FyZCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSb2xlLUJhc2VkIEFjY2VzcyBDb250cm9sJywgKCkgPT4ge1xuICAgIC8qKlxuICAgICAqIFRlc3Qgcm9sZS1iYXNlZCBhY2Nlc3MgcmVzdHJpY3Rpb25zLlxuICAgICAqIFxuICAgICAqIFZhbGlkYXRlcyB0aGF0IHVzZXJzIHdpdGggaW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXG4gICAgICogYXJlIHByb3Blcmx5IHJlc3RyaWN0ZWQgZnJvbSBhY2Nlc3NpbmcgcHJvdGVjdGVkIGNvbnRlbnQuXG4gICAgICogXG4gICAgICogQXV0aG9yaXphdGlvbiBDb250ZXh0OlxuICAgICAqIERpZmZlcmVudCB1c2VyIHJvbGVzIChmcmVlLCBwcmVtaXVtLCBhZG1pbikgc2hvdWxkIGhhdmVcbiAgICAgKiBhcHByb3ByaWF0ZSBhY2Nlc3MgY29udHJvbHMgZm9yIGZlYXR1cmUgZ2F0aW5nLlxuICAgICAqL1xuICAgIGl0KCdzaG91bGQgcmVzdHJpY3QgYWNjZXNzIGJhc2VkIG9uIHJlcXVpcmVkIHJvbGVzJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayB1c2VyIHdpdGggYmFzaWMgcm9sZVxuICAgICAgKHVzZUF1dGggYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6ICd1c2VyLTc4OScsXG4gICAgICAgICAgZW1haWw6ICdiYXNpY0BhY2x1ZS5hcHAnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0Jhc2ljJyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICAgIHN1YnNjcmlwdGlvblRpZXI6ICdmcmVlJyxcbiAgICAgICAgfSxcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBdXRoR3VhcmQgd2l0aCBwcmVtaXVtIHJvbGUgcmVxdWlyZW1lbnRcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEF1dGhHdWFyZCByZXF1aXJlZFJvbGU9XCJwcmVtaXVtXCI+XG4gICAgICAgICAgPE1vY2tDaGlsZENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIC8vIFZlcmlmeSBhY2Nlc3MgZGVuaWVkIG1lc3NhZ2VcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdBY2Nlc3MgRGVuaWVkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVXBncmFkZSB0byBQcmVtaXVtJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdQcm90ZWN0ZWQgQ29udGVudCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRlc3Qgc3VjY2Vzc2Z1bCByb2xlLWJhc2VkIGFjY2Vzcy5cbiAgICAgKiBcbiAgICAgKiBWYWxpZGF0ZXMgdGhhdCB1c2VycyB3aXRoIHN1ZmZpY2llbnQgcGVybWlzc2lvbnNcbiAgICAgKiBjYW4gYWNjZXNzIHJvbGUtcHJvdGVjdGVkIGNvbnRlbnQuXG4gICAgICovXG4gICAgaXQoJ3Nob3VsZCBncmFudCBhY2Nlc3MgdG8gdXNlcnMgd2l0aCBzdWZmaWNpZW50IHJvbGVzJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayB1c2VyIHdpdGggcHJlbWl1bSByb2xlXG4gICAgICAodXNlQXV0aCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogJ3VzZXItODkwJyxcbiAgICAgICAgICBlbWFpbDogJ3ByZW1pdW1AYWNsdWUuYXBwJyxcbiAgICAgICAgICBmaXJzdE5hbWU6ICdQcmVtaXVtJyxcbiAgICAgICAgICBsYXN0TmFtZTogJ1VzZXInLFxuICAgICAgICAgIHN1YnNjcmlwdGlvblRpZXI6ICdwcmVtaXVtJyxcbiAgICAgICAgfSxcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBdXRoR3VhcmQgd2l0aCBwcmVtaXVtIHJvbGUgcmVxdWlyZW1lbnRcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEF1dGhHdWFyZCByZXF1aXJlZFJvbGU9XCJwcmVtaXVtXCI+XG4gICAgICAgICAgPE1vY2tDaGlsZENvbXBvbmVudCAvPlxuICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICk7XG5cbiAgICAgIC8vIFZlcmlmeSBhY2Nlc3MgZ3JhbnRlZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb3RlY3RlZCBDb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdBY2Nlc3MgRGVuaWVkJykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogVGVzdCBpbnRlZ3JhdGlvbiB3aXRoIGF1dGhlbnRpY2F0aW9uIGNvbnRleHQgY2hhbmdlcy5cbiAgICAgKiBcbiAgICAgKiBWYWxpZGF0ZXMgdGhhdCBBdXRoR3VhcmQgcHJvcGVybHkgcmVzcG9uZHMgdG8gY2hhbmdlc1xuICAgICAqIGluIGF1dGhlbnRpY2F0aW9uIHN0YXRlIGR1cmluZyBjb21wb25lbnQgbGlmZWN5Y2xlLlxuICAgICAqL1xuICAgIGl0KCdzaG91bGQgcmVzcG9uZCB0byBhdXRoZW50aWNhdGlvbiBzdGF0ZSBjaGFuZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU3RhcnQgd2l0aCB1bmF1dGhlbnRpY2F0ZWQgc3RhdGVcbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgICA8TW9ja0NoaWxkQ29tcG9uZW50IC8+XG4gICAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBJbml0aWFsbHkgdW5hdXRoZW50aWNhdGVkXG4gICAgICAodXNlQXV0aCBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSk7XG5cbiAgICAgIHJlcmVuZGVyKFxuICAgICAgICA8VGVzdFdyYXBwZXI+XG4gICAgICAgICAgPEF1dGhHdWFyZD5cbiAgICAgICAgICAgIDxNb2NrQ2hpbGRDb21wb25lbnQgLz5cbiAgICAgICAgICA8L0F1dGhHdWFyZD5cbiAgICAgICAgPC9UZXN0V3JhcHBlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCByZWRpcmVjdCB0byBsb2dpblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrUHVzaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hdXRoL2xvZ2luP3JldHVyblVybD0vZGFzaGJvYXJkJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIG1vY2sgYW5kIHVwZGF0ZSB0byBhdXRoZW50aWNhdGVkIHN0YXRlXG4gICAgICBtb2NrUHVzaC5tb2NrQ2xlYXIoKTtcbiAgICAgICh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiAndXNlci05OTEnLFxuICAgICAgICAgIGVtYWlsOiAnbmV3YXV0aEBhY2x1ZS5hcHAnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ05ldycsXG4gICAgICAgICAgbGFzdE5hbWU6ICdVc2VyJyxcbiAgICAgICAgfSxcbiAgICAgICAgaXNBdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgIH0pO1xuXG4gICAgICByZXJlbmRlcihcbiAgICAgICAgPFRlc3RXcmFwcGVyPlxuICAgICAgICAgIDxBdXRoR3VhcmQ+XG4gICAgICAgICAgICA8TW9ja0NoaWxkQ29tcG9uZW50IC8+XG4gICAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICAgIDwvVGVzdFdyYXBwZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBTaG91bGQgbm93IHJlbmRlciBwcm90ZWN0ZWQgY29udGVudFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ1Byb3RlY3RlZCBDb250ZW50JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobW9ja1B1c2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0IEF1dGhHdWFyZCB3aXRoIG11bHRpcGxlIGNoaWxkcmVuIGNvbXBvbmVudHMuXG4gICAgICogXG4gICAgICogVmFsaWRhdGVzIHRoYXQgY29tcGxleCBjb21wb25lbnQgdHJlZXMgYXJlIHByb3Blcmx5XG4gICAgICogaGFuZGxlZCB3aXRoaW4gYXV0aGVudGljYXRpb24gcHJvdGVjdGlvbi5cbiAgICAgKi9cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV4IGNvbXBvbmVudCB0cmVlcycsICgpID0+IHtcbiAgICAgICh1c2VBdXRoIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiAndXNlci05OTInLFxuICAgICAgICAgIGVtYWlsOiAnY29tcGxleEBhY2x1ZS5hcHAnLFxuICAgICAgICAgIGZpcnN0TmFtZTogJ0NvbXBsZXgnLFxuICAgICAgICAgIGxhc3ROYW1lOiAnVXNlcicsXG4gICAgICAgIH0sXG4gICAgICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgQ29tcGxleENoaWxkcmVuID0gKCkgPT4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxoZWFkZXIgZGF0YS10ZXN0aWQ9XCJwcm90ZWN0ZWQtaGVhZGVyXCI+UHJvdGVjdGVkIEhlYWRlcjwvaGVhZGVyPlxuICAgICAgICAgIDxtYWluIGRhdGEtdGVzdGlkPVwicHJvdGVjdGVkLW1haW5cIj5cbiAgICAgICAgICAgIDxzZWN0aW9uIGRhdGEtdGVzdGlkPVwicHJvdGVjdGVkLXNlY3Rpb25cIj5Qcm90ZWN0ZWQgU2VjdGlvbjwvc2VjdGlvbj5cbiAgICAgICAgICA8L21haW4+XG4gICAgICAgICAgPGZvb3RlciBkYXRhLXRlc3RpZD1cInByb3RlY3RlZC1mb290ZXJcIj5Qcm90ZWN0ZWQgRm9vdGVyPC9mb290ZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8QXV0aEd1YXJkPlxuICAgICAgICAgIDxDb21wbGV4Q2hpbGRyZW4gLz5cbiAgICAgICAgPC9BdXRoR3VhcmQ+XG4gICAgICApO1xuXG4gICAgICAvLyBWZXJpZnkgYWxsIHByb3RlY3RlZCBlbGVtZW50cyBhcmUgcmVuZGVyZWRcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb3RlY3RlZC1oZWFkZXInKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3Byb3RlY3RlZC1tYWluJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwcm90ZWN0ZWQtc2VjdGlvbicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgncHJvdGVjdGVkLWZvb3RlcicpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVJvdXRlciIsImZuIiwidXNlQXV0aCIsIm1vY2tQdXNoIiwibW9ja1JvdXRlciIsInB1c2giLCJwYXRobmFtZSIsInF1ZXJ5IiwiYXNQYXRoIiwiTW9ja0NoaWxkQ29tcG9uZW50IiwiZGl2IiwiVGVzdFdyYXBwZXIiLCJjaGlsZHJlbiIsImRhdGEtdGVzdGlkIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsIml0IiwidXNlciIsImlkIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImlzQXV0aGVudGljYXRlZCIsImlzTG9hZGluZyIsImVycm9yIiwicmVuZGVyIiwiQXV0aEd1YXJkIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibW9ja1VzZXIiLCJzdWJzY3JpcHRpb25UaWVyIiwiVGVzdENoaWxkQ29tcG9uZW50Iiwic3BhbiIsImdldEJ5VGVzdElkIiwidG9IYXZlVGV4dENvbnRlbnQiLCJ3YWl0Rm9yIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJxdWVyeUJ5VGV4dCIsImVuY29kZVVSSUNvbXBvbmVudCIsIkN1c3RvbUxvYWRlciIsImNsYXNzTmFtZSIsImxvYWRpbmdDb21wb25lbnQiLCJhdXRoRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsInRva2VuRXhwaXJlZEVycm9yIiwicmVxdWlyZWRSb2xlIiwicmVyZW5kZXIiLCJtb2NrQ2xlYXIiLCJDb21wbGV4Q2hpbGRyZW4iLCJoZWFkZXIiLCJtYWluIiwic2VjdGlvbiIsImZvb3RlciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBb0JDLEdBQ0QsY0FBYztBQUdkLGlGQUFpRjtBQUNqRiwyQkFBMkI7QUFDM0IsaUZBQWlGOztBQVFqRixzQkFBc0I7QUFDdEJBLEtBQUtDLElBQUksQ0FBQyxlQUFlLElBQU8sQ0FBQTtRQUM5QkMsV0FBV0YsS0FBS0csRUFBRTtJQUNwQixDQUFBO0FBRUEsMkJBQTJCO0FBQzNCSCxLQUFLQyxJQUFJLENBQUMsbUJBQW1C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