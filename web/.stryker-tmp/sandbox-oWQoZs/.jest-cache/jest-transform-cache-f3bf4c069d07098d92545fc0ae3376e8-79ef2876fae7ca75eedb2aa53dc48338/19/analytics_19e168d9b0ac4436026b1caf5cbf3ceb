f3cbbb9a6dc17b308ea4c44fbd580971
/**
 * aclue Analytics Service
 * 
 * Comprehensive user behavior tracking and analytics integration using PostHog.
 * Provides business intelligence, user insights, and performance metrics for
 * data-driven product decisions and revenue optimization.
 * 
 * Key Features:
 *   - User behavior tracking (swipes, clicks, conversions)
 *   - Revenue analytics (affiliate clicks, commissions)
 *   - Feature flag management for A/B testing
 *   - User segmentation and cohort analysis
 *   - Error tracking and performance monitoring
 * 
 * Business Intelligence:
 *   - Track user journey from discovery to purchase
 *   - Measure recommendation algorithm effectiveness
 *   - Monitor affiliate conversion rates and revenue
 *   - Analyze user engagement and retention patterns
 * 
 * Privacy & Compliance:
 *   - GDPR-compliant user consent management
 *   - User opt-out functionality
 *   - Data anonymization and retention policies
 *   - Cookie consent integration
 * 
 * Integration:
 *   - PostHog for event tracking and analytics
 *   - Feature flags for controlled rollouts
 *   - User identification for personalized experiences
 *   - Custom event validation and enrichment
 * 
 * Usage:
 *   import { analytics, trackEvent, identifyUser } from '@/lib/analytics';
 *   
 *   // Initialize analytics
 *   await analytics.init();
 *   
 *   // Track user events
 *   trackEvent('product_swiped', { direction: 'right', product_id: '123' });
 *   
 *   // Identify users
 *   identifyUser('user_123', { subscription_tier: 'premium' });
 */ // @ts-nocheck
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    analytics: function() {
        return analytics;
    },
    // Default export for importing as single module
    default: function() {
        return _default // Export all public interfaces
         // Exported: analytics, trackEvent, identifyUser, trackPageView, AnalyticsService
        ;
    },
    identifyUser: function() {
        return identifyUser;
    },
    trackEvent: function() {
        return trackEvent;
    },
    trackPageView: function() {
        return trackPageView;
    }
});
const _posthogjs = /*#__PURE__*/ _interop_require_default(require("posthog-js"));
const _config = require("../config");
const _posthogconfig = require("./posthog-config");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function stryNS_9fa48() {
    var g = typeof globalThis === "object" && globalThis && globalThis.Math === Math && globalThis || new Function("return this")();
    var ns = g.__stryker__ || (g.__stryker__ = {});
    if (ns.activeMutant === undefined && g.process && g.process.env && g.process.env.__STRYKER_ACTIVE_MUTANT__) {
        ns.activeMutant = g.process.env.__STRYKER_ACTIVE_MUTANT__;
    }
    function retrieveNS() {
        return ns;
    }
    stryNS_9fa48 = retrieveNS;
    return retrieveNS();
}
stryNS_9fa48();
function stryCov_9fa48() {
    var ns = stryNS_9fa48();
    var cov = ns.mutantCoverage || (ns.mutantCoverage = {
        static: {},
        perTest: {}
    });
    function cover() {
        var c = cov.static;
        if (ns.currentTestId) {
            c = cov.perTest[ns.currentTestId] = cov.perTest[ns.currentTestId] || {};
        }
        var a = arguments;
        for(var i = 0; i < a.length; i++){
            c[a[i]] = (c[a[i]] || 0) + 1;
        }
    }
    stryCov_9fa48 = cover;
    cover.apply(null, arguments);
}
function stryMutAct_9fa48(id) {
    var ns = stryNS_9fa48();
    function isActive(id) {
        if (ns.activeMutant === id) {
            if (ns.hitCount !== void 0 && ++ns.hitCount > ns.hitLimit) {
                throw new Error("Stryker: Hit count limit reached (" + ns.hitCount + ")");
            }
            return true;
        }
        return false;
    }
    stryMutAct_9fa48 = isActive;
    return isActive(id);
}
/**
 * Analytics Service class for comprehensive user behavior tracking.
 * 
 * Manages PostHog integration with robust error handling, retry logic,
 * and business-specific event tracking. Provides type-safe analytics
 * interface for the entire application.
 * 
 * Architecture:
 *   - Singleton pattern for consistent analytics instance
 *   - Automatic initialization with retry logic
 *   - Event validation and enrichment
 *   - Feature flag integration
 *   - Privacy controls and opt-out functionality
 * 
 * Error Handling:
 *   - Graceful degradation when analytics unavailable
 *   - Automatic retry on initialization failures
 *   - Comprehensive logging for debugging
 *   - Fallback behavior for critical paths
 */ class AnalyticsService {
    /**
   * Initialize PostHog analytics service with robust error handling.
   * 
   * Performs comprehensive setup including:
   *   - PostHog SDK initialization with custom configuration
   *   - Connection testing and validation
   *   - Automatic retry on failures
   *   - Development vs production environment handling
   * 
   * Error Recovery:
   *   - Retries initialization up to maxRetries times
   *   - Exponential backoff for retry delays
   *   - Graceful degradation if initialization fails
   * 
   * Environment Handling:
   *   - Server-side rendering compatibility (no window)
   *   - Development debugging and logging
   *   - Production optimizations
   * 
   * Returns:
   *   Promise<void>: Resolves when initialization complete
   */ async init() {
        if (stryMutAct_9fa48("10158")) {
            {}
        } else {
            stryCov_9fa48("10158");
            // Prevent initialization in invalid environments
            if (stryMutAct_9fa48("10161") ? (typeof window === "undefined" || this.initialized) && !_config.config.posthogKey : stryMutAct_9fa48("10160") ? false : stryMutAct_9fa48("10159") ? true : (stryCov_9fa48("10159", "10160", "10161"), (stryMutAct_9fa48("10163") ? typeof window === "undefined" && this.initialized : stryMutAct_9fa48("10162") ? false : (stryCov_9fa48("10162", "10163"), (stryMutAct_9fa48("10165") ? typeof window !== "undefined" : stryMutAct_9fa48("10164") ? false : (stryCov_9fa48("10164", "10165"), typeof window === (stryMutAct_9fa48("10166") ? "" : (stryCov_9fa48("10166"), "undefined")))) || this.initialized)) || (stryMutAct_9fa48("10167") ? _config.config.posthogKey : (stryCov_9fa48("10167"), !_config.config.posthogKey)))) {
                if (stryMutAct_9fa48("10168")) {
                    {}
                } else {
                    stryCov_9fa48("10168");
                    return;
                }
            }
            try {
                if (stryMutAct_9fa48("10169")) {
                    {}
                } else {
                    stryCov_9fa48("10169");
                    // Create PostHog configuration with environment-specific settings
                    const posthogConfig = (0, _posthogconfig.createPostHogConfig)();
                    console.log(stryMutAct_9fa48("10170") ? "" : (stryCov_9fa48("10170"), "[PostHog] Initializing analytics service..."), stryMutAct_9fa48("10171") ? {} : (stryCov_9fa48("10171"), {
                        key: (stryMutAct_9fa48("10173") ? _config.config.posthogKey.substring(0, 10) : stryMutAct_9fa48("10172") ? _config.config.posthogKey : (stryCov_9fa48("10172", "10173"), _config.config.posthogKey?.substring(0, 10))) + (stryMutAct_9fa48("10174") ? "" : (stryCov_9fa48("10174"), "...")),
                        // Masked key for security
                        host: posthogConfig.api_host,
                        // PostHog server host
                        debug: posthogConfig.debug // Debug mode status
                    }));
                    // Initialize PostHog SDK with configuration
                    _posthogjs.default.init(_config.config.posthogKey, posthogConfig);
                    // Mark as successfully initialized
                    this.initialized = stryMutAct_9fa48("10175") ? false : (stryCov_9fa48("10175"), true);
                    this.retryCount = 0; // Reset retry counter
                    // Verify analytics connectivity with test event
                    await this.testConnection();
                }
            } catch (error) {
                if (stryMutAct_9fa48("10176")) {
                    {}
                } else {
                    stryCov_9fa48("10176");
                    console.error(stryMutAct_9fa48("10177") ? "" : (stryCov_9fa48("10177"), "[PostHog] Initialization failed:"), error);
                    // Implement retry logic with exponential backoff
                    if (stryMutAct_9fa48("10181") ? this.retryCount >= this.maxRetries : stryMutAct_9fa48("10180") ? this.retryCount <= this.maxRetries : stryMutAct_9fa48("10179") ? false : stryMutAct_9fa48("10178") ? true : (stryCov_9fa48("10178", "10179", "10180", "10181"), this.retryCount < this.maxRetries)) {
                        if (stryMutAct_9fa48("10182")) {
                            {}
                        } else {
                            stryCov_9fa48("10182");
                            stryMutAct_9fa48("10183") ? this.retryCount-- : (stryCov_9fa48("10183"), this.retryCount++);
                            const delayMs = stryMutAct_9fa48("10184") ? 1000 / this.retryCount : (stryCov_9fa48("10184"), 1000 * this.retryCount); // Exponential backoff
                            console.log(stryMutAct_9fa48("10185") ? `` : (stryCov_9fa48("10185"), `[PostHog] Retrying initialization (${this.retryCount}/${this.maxRetries}) in ${delayMs}ms...`));
                            setTimeout(stryMutAct_9fa48("10186") ? ()=>undefined : (stryCov_9fa48("10186"), ()=>this.init()), delayMs);
                        }
                    } else {
                        if (stryMutAct_9fa48("10187")) {
                            {}
                        } else {
                            stryCov_9fa48("10187");
                            console.error(stryMutAct_9fa48("10188") ? "" : (stryCov_9fa48("10188"), "[PostHog] Maximum retry attempts reached, analytics disabled"));
                        }
                    }
                }
            }
        }
    }
    /**
   * Test PostHog connectivity with diagnostic event.
   * 
   * Sends a test event to verify that analytics are working correctly.
   * Provides debugging information for troubleshooting connection issues.
   * 
   * Test Event Data:
   *   - Common properties (user agent, URL, timestamp)
   *   - Initialization metadata (time, retry count)
   *   - Environment information for debugging
   * 
   * Returns:
   *   Promise<void>: Resolves when test complete
   */ async testConnection() {
        if (stryMutAct_9fa48("10189")) {
            {}
        } else {
            stryCov_9fa48("10189");
            if (stryMutAct_9fa48("10192") ? false : stryMutAct_9fa48("10191") ? true : stryMutAct_9fa48("10190") ? this.initialized : (stryCov_9fa48("10190", "10191", "10192"), !this.initialized)) return;
            try {
                if (stryMutAct_9fa48("10193")) {
                    {}
                } else {
                    stryCov_9fa48("10193");
                    // Send diagnostic event with initialization metadata
                    this.track(stryMutAct_9fa48("10194") ? "" : (stryCov_9fa48("10194"), "analytics_service_initialized"), stryMutAct_9fa48("10195") ? {} : (stryCov_9fa48("10195"), {
                        ...(0, _posthogconfig.getCommonEventProperties)(),
                        // Standard event properties
                        initialization_time: Date.now(),
                        // Timestamp for performance tracking
                        retry_count: this.retryCount,
                        // Number of retries for debugging
                        environment: _config.config.isProduction ? stryMutAct_9fa48("10196") ? "" : (stryCov_9fa48("10196"), "production") : stryMutAct_9fa48("10197") ? "" : (stryCov_9fa48("10197"), "development")
                    }));
                    console.log(stryMutAct_9fa48("10198") ? "" : (stryCov_9fa48("10198"), "[PostHog] Connection test successful - analytics ready"));
                }
            } catch (error) {
                if (stryMutAct_9fa48("10199")) {
                    {}
                } else {
                    stryCov_9fa48("10199");
                    console.warn(stryMutAct_9fa48("10200") ? "" : (stryCov_9fa48("10200"), "[PostHog] Connection test failed:"), error);
                }
            }
        }
    }
    /**
   * Identify user for personalized analytics and targeting.
   * 
   * Associates all future events with a specific user ID, enabling:
   *   - Cross-device tracking and session continuity
   *   - Personalized feature flags and A/B tests
   *   - User-specific analytics and cohort analysis
   *   - Revenue attribution and lifetime value tracking
   * 
   * Privacy Compliance:
   *   - Only identifies users who have provided consent
   *   - Supports pseudonymous identifiers for privacy
   *   - Respects user opt-out preferences
   * 
   * Parameters:
   *   userId: Unique user identifier (UUID, email hash, etc.)
   *   properties: Additional user attributes for segmentation
   * 
   * Example:
   *   analytics.identify('user_123', {
   *     email: 'user@example.com',
   *     subscription_tier: 'premium',
   *     first_name: 'John',
   *     signup_date: '2024-01-01'
   *   });
   */ identify(userId, properties) {
        if (stryMutAct_9fa48("10201")) {
            {}
        } else {
            stryCov_9fa48("10201");
            if (stryMutAct_9fa48("10203") ? false : stryMutAct_9fa48("10202") ? true : (stryCov_9fa48("10202", "10203"), this.initialized)) {
                if (stryMutAct_9fa48("10204")) {
                    {}
                } else {
                    stryCov_9fa48("10204");
                    console.log(stryMutAct_9fa48("10205") ? "" : (stryCov_9fa48("10205"), "[PostHog] Identifying user:"), userId, properties);
                    _posthogjs.default.identify(userId, properties);
                }
            }
        }
    }
    /**
   * Track user events for analytics and business intelligence.
   * 
   * Records user actions, behaviors, and system events for:
   *   - Product analytics and user journey mapping
   *   - Revenue tracking and conversion optimization
   *   - A/B testing and feature performance measurement
   *   - Error monitoring and performance analysis
   * 
   * Event Processing:
   *   - Validates event name and properties
   *   - Enriches events with common properties (timestamp, user agent, etc.)
   *   - Handles errors gracefully without breaking user experience
   *   - Logs events for debugging in development
   * 
   * Common Event Categories:
   *   - User actions: swipe_left, swipe_right, product_clicked
   *   - Revenue events: affiliate_click, purchase_completed
   *   - System events: page_viewed, error_occurred
   *   - Engagement: session_started, feature_used
   * 
   * Parameters:
   *   eventName: Descriptive event name (snake_case convention)
   *   properties: Event-specific data for analysis
   * 
   * Example:
   *   analytics.track('product_swiped', {
   *     direction: 'right',
   *     product_id: 'B08GYKNCCP',
   *     category: 'Electronics',
   *     session_id: 'session_123'
   *   });
   */ track(eventName, properties) {
        if (stryMutAct_9fa48("10206")) {
            {}
        } else {
            stryCov_9fa48("10206");
            // Handle analytics not initialized gracefully
            if (stryMutAct_9fa48("10209") ? false : stryMutAct_9fa48("10208") ? true : stryMutAct_9fa48("10207") ? this.initialized : (stryCov_9fa48("10207", "10208", "10209"), !this.initialized)) {
                if (stryMutAct_9fa48("10210")) {
                    {}
                } else {
                    stryCov_9fa48("10210");
                    console.warn(stryMutAct_9fa48("10211") ? "" : (stryCov_9fa48("10211"), "[PostHog] Analytics not initialized, event queued:"), eventName);
                    // In production, could queue events for later sending
                    return;
                }
            }
            // Validate event meets naming and data requirements
            if (stryMutAct_9fa48("10214") ? false : stryMutAct_9fa48("10213") ? true : stryMutAct_9fa48("10212") ? (0, _posthogconfig.validateEvent)(eventName, properties) : (stryCov_9fa48("10212", "10213", "10214"), !(0, _posthogconfig.validateEvent)(eventName, properties))) {
                if (stryMutAct_9fa48("10215")) {
                    {}
                } else {
                    stryCov_9fa48("10215");
                    return;
                }
            }
            try {
                if (stryMutAct_9fa48("10216")) {
                    {}
                } else {
                    stryCov_9fa48("10216");
                    // Enrich event with common properties for consistent analytics
                    const enrichedProperties = stryMutAct_9fa48("10217") ? {} : (stryCov_9fa48("10217"), {
                        ...(0, _posthogconfig.getCommonEventProperties)(),
                        // Standard properties (timestamp, URL, etc.)
                        ...properties // Event-specific properties
                    });
                    console.log(stryMutAct_9fa48("10218") ? "" : (stryCov_9fa48("10218"), "[PostHog] Tracking event:"), eventName, enrichedProperties);
                    _posthogjs.default.capture(eventName, enrichedProperties);
                }
            } catch (error) {
                if (stryMutAct_9fa48("10219")) {
                    {}
                } else {
                    stryCov_9fa48("10219");
                    console.error(stryMutAct_9fa48("10220") ? "" : (stryCov_9fa48("10220"), "[PostHog] Failed to track event:"), eventName, error);
                // Continue execution even if analytics fails
                }
            }
        }
    }
    /**
   * Set or update user properties for segmentation and personalization.
   * 
   * Updates user profile data for:
   *   - User segmentation and cohort analysis
   *   - Personalized feature flags and targeting
   *   - Revenue analysis and lifetime value tracking
   *   - Customer support and user insights
   * 
   * Property Categories:
   *   - Demographics: age, location, gender
   *   - Subscription: tier, status, billing_cycle
   *   - Behavior: last_login, total_swipes, preferences
   *   - Revenue: total_spent, commission_generated
   * 
   * Parameters:
   *   properties: Key-value pairs of user attributes
   * 
   * Example:
   *   analytics.setUserProperties({
   *     subscription_tier: 'premium',
   *     total_swipes: 150,
   *     last_active: '2024-01-01',
   *     favorite_categories: ['Electronics', 'Books']
   *   });
   */ setUserProperties(properties) {
        if (stryMutAct_9fa48("10221")) {
            {}
        } else {
            stryCov_9fa48("10221");
            if (stryMutAct_9fa48("10223") ? false : stryMutAct_9fa48("10222") ? true : (stryCov_9fa48("10222", "10223"), this.initialized)) {
                if (stryMutAct_9fa48("10224")) {
                    {}
                } else {
                    stryCov_9fa48("10224");
                    console.log(stryMutAct_9fa48("10225") ? "" : (stryCov_9fa48("10225"), "[PostHog] Setting user properties:"), properties);
                    _posthogjs.default.people.set(properties);
                }
            }
        }
    }
    /**
   * Track page views for navigation analytics and user journey mapping.
   * 
   * Records page navigation events for:
   *   - User flow analysis and conversion funnels
   *   - Page performance and engagement metrics
   *   - A/B testing of page layouts and content
   *   - SEO and content optimization insights
   * 
   * Automatic Enrichment:
   *   - Referrer information for traffic source analysis
   *   - Page load time and performance metrics
   *   - Device and browser information
   *   - User session context
   * 
   * Parameters:
   *   path: Optional page path (defaults to current URL)
   * 
   * Example:
   *   analytics.trackPageView('/discover'); // Track specific page
   *   analytics.trackPageView();            // Track current page
   */ trackPageView(path) {
        if (stryMutAct_9fa48("10226")) {
            {}
        } else {
            stryCov_9fa48("10226");
            if (stryMutAct_9fa48("10228") ? false : stryMutAct_9fa48("10227") ? true : (stryCov_9fa48("10227", "10228"), this.initialized)) {
                if (stryMutAct_9fa48("10229")) {
                    {}
                } else {
                    stryCov_9fa48("10229");
                    const pageUrl = stryMutAct_9fa48("10232") ? path && window.location.href : stryMutAct_9fa48("10231") ? false : stryMutAct_9fa48("10230") ? true : (stryCov_9fa48("10230", "10231", "10232"), path || window.location.href);
                    console.log(stryMutAct_9fa48("10233") ? "" : (stryCov_9fa48("10233"), "[PostHog] Tracking page view:"), pageUrl);
                    _posthogjs.default.capture(stryMutAct_9fa48("10234") ? "" : (stryCov_9fa48("10234"), "$pageview"), stryMutAct_9fa48("10235") ? {} : (stryCov_9fa48("10235"), {
                        $current_url: pageUrl,
                        // Page URL for navigation tracking
                        page_title: document.title,
                        // Page title for content analysis
                        referrer: document.referrer // Previous page for traffic flow
                    }));
                }
            }
        }
    }
    /**
   * Reset user session for logout and privacy compliance.
   * 
   * Clears all user identification and session data for:
   *   - User logout and session termination
   *   - Privacy compliance and data protection
   *   - Shared device usage scenarios
   *   - Testing and development environments
   * 
   * Reset Actions:
   *   - Clears user identification and properties
   *   - Resets feature flag cache
   *   - Generates new anonymous session ID
   *   - Maintains analytics functionality for anonymous tracking
   * 
   * Privacy Compliance:
   *   - Ensures no personal data persists after logout
   *   - Supports "right to be forgotten" requirements
   *   - Clears all locally stored user data
   * 
   * Example:
   *   // On user logout
   *   analytics.reset();
   */ reset() {
        if (stryMutAct_9fa48("10236")) {
            {}
        } else {
            stryCov_9fa48("10236");
            if (stryMutAct_9fa48("10238") ? false : stryMutAct_9fa48("10237") ? true : (stryCov_9fa48("10237", "10238"), this.initialized)) {
                if (stryMutAct_9fa48("10239")) {
                    {}
                } else {
                    stryCov_9fa48("10239");
                    console.log(stryMutAct_9fa48("10240") ? "" : (stryCov_9fa48("10240"), "[PostHog] Resetting user session"));
                    _posthogjs.default.reset();
                }
            }
        }
    }
    /**
   * Associate user with groups for organizational analytics.
   * 
   * Groups users by organization, team, or other entities for:
   *   - B2B analytics and enterprise insights
   *   - Team collaboration feature usage
   *   - Organization-level reporting and billing
   *   - Multi-tenant application analytics
   * 
   * Group Types:
   *   - organization: Company or business entity
   *   - team: Department or project team
   *   - subscription: Shared subscription account
   *   - family: Family gift-giving groups
   * 
   * Parameters:
   *   groupType: Type of group (organization, team, etc.)
   *   groupKey: Unique identifier for the group
   *   properties: Group-specific attributes
   * 
   * Example:
   *   analytics.group('organization', 'acme-corp', {
   *     name: 'Acme Corporation',
   *     plan: 'enterprise',
   *     employees: 500
   *   });
   */ group(groupType, groupKey, properties) {
        if (stryMutAct_9fa48("10241")) {
            {}
        } else {
            stryCov_9fa48("10241");
            if (stryMutAct_9fa48("10243") ? false : stryMutAct_9fa48("10242") ? true : (stryCov_9fa48("10242", "10243"), this.initialized)) {
                if (stryMutAct_9fa48("10244")) {
                    {}
                } else {
                    stryCov_9fa48("10244");
                    console.log(stryMutAct_9fa48("10245") ? "" : (stryCov_9fa48("10245"), "[PostHog] Setting group:"), groupType, groupKey, properties);
                    _posthogjs.default.group(groupType, groupKey, properties);
                }
            }
        }
    }
    /**
   * Check if a feature flag is enabled for the current user.
   * 
   * Enables controlled feature rollouts and A/B testing for:
   *   - Gradual feature releases to user segments
   *   - A/B testing of new functionality
   *   - Kill switches for problematic features
   *   - Personalized user experiences
   * 
   * Feature Flag Categories:
   *   - UI features: new_swipe_interface, dark_mode
   *   - Business logic: premium_recommendations, affiliate_tracking
   *   - Experiments: recommendation_algorithm_v2
   *   - Rollouts: mobile_app_promotion
   * 
   * Parameters:
   *   flag: Feature flag name (snake_case convention)
   * 
   * Returns:
   *   boolean: True if feature is enabled for current user
   * 
   * Example:
   *   if (analytics.isFeatureEnabled('new_recommendation_engine')) {
   *     // Show new recommendation UI
   *   }
   */ isFeatureEnabled(flag) {
        if (stryMutAct_9fa48("10246")) {
            {}
        } else {
            stryCov_9fa48("10246");
            if (stryMutAct_9fa48("10248") ? false : stryMutAct_9fa48("10247") ? true : (stryCov_9fa48("10247", "10248"), this.initialized)) {
                if (stryMutAct_9fa48("10249")) {
                    {}
                } else {
                    stryCov_9fa48("10249");
                    const enabled = stryMutAct_9fa48("10252") ? _posthogjs.default.isFeatureEnabled(flag) !== true : stryMutAct_9fa48("10251") ? false : stryMutAct_9fa48("10250") ? true : (stryCov_9fa48("10250", "10251", "10252"), _posthogjs.default.isFeatureEnabled(flag) === (stryMutAct_9fa48("10253") ? false : (stryCov_9fa48("10253"), true)));
                    console.log(stryMutAct_9fa48("10254") ? `` : (stryCov_9fa48("10254"), `[PostHog] Feature flag '${flag}':`), enabled);
                    return enabled;
                }
            }
            return stryMutAct_9fa48("10255") ? true : (stryCov_9fa48("10255"), false); // Default to disabled if analytics not available
        }
    }
    /**
   * Get feature flag value for advanced flag configurations.
   * 
   * Retrieves feature flag values that can be:
   *   - Boolean: true/false for simple on/off features
   *   - String: variant names for multivariate tests
   *   - Number: configuration values or percentages
   * 
   * Advanced Use Cases:
   *   - Multivariate testing with multiple variants
   *   - Configuration flags with specific values
   *   - Percentage-based rollouts
   *   - String-based feature variants
   * 
   * Parameters:
   *   flag: Feature flag name
   * 
   * Returns:
   *   string | boolean | undefined: Flag value or undefined if not set
   * 
   * Example:
   *   const variant = analytics.getFeatureFlag('recommendation_algorithm');
   *   if (variant === 'collaborative_filtering') {
   *     // Use collaborative filtering algorithm
   *   } else if (variant === 'content_based') {
   *     // Use content-based algorithm
   *   }
   */ getFeatureFlag(flag) {
        if (stryMutAct_9fa48("10256")) {
            {}
        } else {
            stryCov_9fa48("10256");
            if (stryMutAct_9fa48("10258") ? false : stryMutAct_9fa48("10257") ? true : (stryCov_9fa48("10257", "10258"), this.initialized)) {
                if (stryMutAct_9fa48("10259")) {
                    {}
                } else {
                    stryCov_9fa48("10259");
                    const value = _posthogjs.default.getFeatureFlag(flag);
                    console.log(stryMutAct_9fa48("10260") ? `` : (stryCov_9fa48("10260"), `[PostHog] Feature flag '${flag}' value:`), value);
                    return value;
                }
            }
            return undefined;
        }
    }
    /**
   * Opt user out of analytics tracking for privacy compliance.
   * 
   * Provides user control over data collection for:
   *   - GDPR and privacy regulation compliance
   *   - User preference and consent management
   *   - Cookie banner and privacy controls
   *   - Data minimization principles
   * 
   * Opt-Out Effects:
   *   - Stops all event tracking and data collection
   *   - Disables feature flags and personalization
   *   - Maintains basic functionality without analytics
   *   - Sets persistent opt-out preference
   * 
   * Privacy Compliance:
   *   - Respects user privacy choices
   *   - Provides clear opt-out mechanism
   *   - Maintains opt-out status across sessions
   * 
   * Example:
   *   // User clicks "Opt out of analytics"
   *   analytics.optOut();
   */ optOut() {
        if (stryMutAct_9fa48("10261")) {
            {}
        } else {
            stryCov_9fa48("10261");
            if (stryMutAct_9fa48("10263") ? false : stryMutAct_9fa48("10262") ? true : (stryCov_9fa48("10262", "10263"), this.initialized)) {
                if (stryMutAct_9fa48("10264")) {
                    {}
                } else {
                    stryCov_9fa48("10264");
                    console.log(stryMutAct_9fa48("10265") ? "" : (stryCov_9fa48("10265"), "[PostHog] User opted out of analytics tracking"));
                    _posthogjs.default.opt_out_capturing();
                }
            }
        }
    }
    /**
   * Opt user into analytics tracking after previous opt-out.
   * 
   * Re-enables analytics for users who previously opted out:
   *   - Restores full analytics functionality
   *   - Re-enables feature flags and personalization
   *   - Resumes event tracking and data collection
   *   - Updates user consent preferences
   * 
   * Use Cases:
   *   - User changes privacy preferences
   *   - Premium users enabling advanced features
   *   - Onboarding flow consent updates
   *   - Settings page privacy controls
   * 
   * Example:
   *   // User clicks "Enable analytics"
   *   analytics.optIn();
   */ optIn() {
        if (stryMutAct_9fa48("10266")) {
            {}
        } else {
            stryCov_9fa48("10266");
            if (stryMutAct_9fa48("10268") ? false : stryMutAct_9fa48("10267") ? true : (stryCov_9fa48("10267", "10268"), this.initialized)) {
                if (stryMutAct_9fa48("10269")) {
                    {}
                } else {
                    stryCov_9fa48("10269");
                    console.log(stryMutAct_9fa48("10270") ? "" : (stryCov_9fa48("10270"), "[PostHog] User opted into analytics tracking"));
                    _posthogjs.default.opt_in_capturing();
                }
            }
        }
    }
    /**
   * Check if user has opted out of analytics tracking.
   * 
   * Determines user's current privacy preference for:
   *   - Conditional UI rendering based on consent
   *   - Privacy settings page status display
   *   - Feature availability and functionality
   *   - Compliance with privacy regulations
   * 
   * Returns:
   *   boolean: True if user has opted out, false otherwise
   * 
   * Example:
   *   if (!analytics.hasOptedOut()) {
   *     // Show analytics-dependent features
   *     renderPersonalizedRecommendations();
   *   }
   */ hasOptedOut() {
        if (stryMutAct_9fa48("10271")) {
            {}
        } else {
            stryCov_9fa48("10271");
            if (stryMutAct_9fa48("10273") ? false : stryMutAct_9fa48("10272") ? true : (stryCov_9fa48("10272", "10273"), this.initialized)) {
                if (stryMutAct_9fa48("10274")) {
                    {}
                } else {
                    stryCov_9fa48("10274");
                    return _posthogjs.default.has_opted_out_capturing();
                }
            }
            return stryMutAct_9fa48("10275") ? true : (stryCov_9fa48("10275"), false); // Default to opted-in if analytics not available
        }
    }
    constructor(){
        /**
   * Service state management for reliable analytics operation.
   */ this.initialized = stryMutAct_9fa48("10157") ? true : (stryCov_9fa48("10157"), false) // Analytics initialization status
        ;
        this.retryCount = 0 // Current retry attempt counter
        ;
        this.maxRetries = 3 // Maximum initialization retry attempts
        ;
    }
}
const analytics = new AnalyticsService();
const trackEvent = (eventName, properties)=>{
    if (stryMutAct_9fa48("10276")) {
        {}
    } else {
        stryCov_9fa48("10276");
        analytics.track(eventName, properties);
    }
};
const identifyUser = (userId, properties)=>{
    if (stryMutAct_9fa48("10277")) {
        {}
    } else {
        stryCov_9fa48("10277");
        analytics.identify(userId, properties);
    }
};
const trackPageView = (path)=>{
    if (stryMutAct_9fa48("10278")) {
        {}
    } else {
        stryCov_9fa48("10278");
        analytics.trackPageView(path);
    }
};
const _default = analytics;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2phY2svRG9jdW1lbnRzL2FjbHVlLXByZXByb2Qvd2ViLy5zdHJ5a2VyLXRtcC9zYW5kYm94LW9XUW9acy9zcmMvbGliL2FuYWx5dGljcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGFjbHVlIEFuYWx5dGljcyBTZXJ2aWNlXG4gKiBcbiAqIENvbXByZWhlbnNpdmUgdXNlciBiZWhhdmlvciB0cmFja2luZyBhbmQgYW5hbHl0aWNzIGludGVncmF0aW9uIHVzaW5nIFBvc3RIb2cuXG4gKiBQcm92aWRlcyBidXNpbmVzcyBpbnRlbGxpZ2VuY2UsIHVzZXIgaW5zaWdodHMsIGFuZCBwZXJmb3JtYW5jZSBtZXRyaWNzIGZvclxuICogZGF0YS1kcml2ZW4gcHJvZHVjdCBkZWNpc2lvbnMgYW5kIHJldmVudWUgb3B0aW1pemF0aW9uLlxuICogXG4gKiBLZXkgRmVhdHVyZXM6XG4gKiAgIC0gVXNlciBiZWhhdmlvciB0cmFja2luZyAoc3dpcGVzLCBjbGlja3MsIGNvbnZlcnNpb25zKVxuICogICAtIFJldmVudWUgYW5hbHl0aWNzIChhZmZpbGlhdGUgY2xpY2tzLCBjb21taXNzaW9ucylcbiAqICAgLSBGZWF0dXJlIGZsYWcgbWFuYWdlbWVudCBmb3IgQS9CIHRlc3RpbmdcbiAqICAgLSBVc2VyIHNlZ21lbnRhdGlvbiBhbmQgY29ob3J0IGFuYWx5c2lzXG4gKiAgIC0gRXJyb3IgdHJhY2tpbmcgYW5kIHBlcmZvcm1hbmNlIG1vbml0b3JpbmdcbiAqIFxuICogQnVzaW5lc3MgSW50ZWxsaWdlbmNlOlxuICogICAtIFRyYWNrIHVzZXIgam91cm5leSBmcm9tIGRpc2NvdmVyeSB0byBwdXJjaGFzZVxuICogICAtIE1lYXN1cmUgcmVjb21tZW5kYXRpb24gYWxnb3JpdGhtIGVmZmVjdGl2ZW5lc3NcbiAqICAgLSBNb25pdG9yIGFmZmlsaWF0ZSBjb252ZXJzaW9uIHJhdGVzIGFuZCByZXZlbnVlXG4gKiAgIC0gQW5hbHl6ZSB1c2VyIGVuZ2FnZW1lbnQgYW5kIHJldGVudGlvbiBwYXR0ZXJuc1xuICogXG4gKiBQcml2YWN5ICYgQ29tcGxpYW5jZTpcbiAqICAgLSBHRFBSLWNvbXBsaWFudCB1c2VyIGNvbnNlbnQgbWFuYWdlbWVudFxuICogICAtIFVzZXIgb3B0LW91dCBmdW5jdGlvbmFsaXR5XG4gKiAgIC0gRGF0YSBhbm9ueW1pemF0aW9uIGFuZCByZXRlbnRpb24gcG9saWNpZXNcbiAqICAgLSBDb29raWUgY29uc2VudCBpbnRlZ3JhdGlvblxuICogXG4gKiBJbnRlZ3JhdGlvbjpcbiAqICAgLSBQb3N0SG9nIGZvciBldmVudCB0cmFja2luZyBhbmQgYW5hbHl0aWNzXG4gKiAgIC0gRmVhdHVyZSBmbGFncyBmb3IgY29udHJvbGxlZCByb2xsb3V0c1xuICogICAtIFVzZXIgaWRlbnRpZmljYXRpb24gZm9yIHBlcnNvbmFsaXplZCBleHBlcmllbmNlc1xuICogICAtIEN1c3RvbSBldmVudCB2YWxpZGF0aW9uIGFuZCBlbnJpY2htZW50XG4gKiBcbiAqIFVzYWdlOlxuICogICBpbXBvcnQgeyBhbmFseXRpY3MsIHRyYWNrRXZlbnQsIGlkZW50aWZ5VXNlciB9IGZyb20gJ0AvbGliL2FuYWx5dGljcyc7XG4gKiAgIFxuICogICAvLyBJbml0aWFsaXplIGFuYWx5dGljc1xuICogICBhd2FpdCBhbmFseXRpY3MuaW5pdCgpO1xuICogICBcbiAqICAgLy8gVHJhY2sgdXNlciBldmVudHNcbiAqICAgdHJhY2tFdmVudCgncHJvZHVjdF9zd2lwZWQnLCB7IGRpcmVjdGlvbjogJ3JpZ2h0JywgcHJvZHVjdF9pZDogJzEyMycgfSk7XG4gKiAgIFxuICogICAvLyBJZGVudGlmeSB1c2Vyc1xuICogICBpZGVudGlmeVVzZXIoJ3VzZXJfMTIzJywgeyBzdWJzY3JpcHRpb25fdGllcjogJ3ByZW1pdW0nIH0pO1xuICovXG4vLyBAdHMtbm9jaGVja1xuZnVuY3Rpb24gc3RyeU5TXzlmYTQ4KCkge1xuICB2YXIgZyA9IHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JyAmJiBnbG9iYWxUaGlzICYmIGdsb2JhbFRoaXMuTWF0aCA9PT0gTWF0aCAmJiBnbG9iYWxUaGlzIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG4gIHZhciBucyA9IGcuX19zdHJ5a2VyX18gfHwgKGcuX19zdHJ5a2VyX18gPSB7fSk7XG4gIGlmIChucy5hY3RpdmVNdXRhbnQgPT09IHVuZGVmaW5lZCAmJiBnLnByb2Nlc3MgJiYgZy5wcm9jZXNzLmVudiAmJiBnLnByb2Nlc3MuZW52Ll9fU1RSWUtFUl9BQ1RJVkVfTVVUQU5UX18pIHtcbiAgICBucy5hY3RpdmVNdXRhbnQgPSBnLnByb2Nlc3MuZW52Ll9fU1RSWUtFUl9BQ1RJVkVfTVVUQU5UX187XG4gIH1cbiAgZnVuY3Rpb24gcmV0cmlldmVOUygpIHtcbiAgICByZXR1cm4gbnM7XG4gIH1cbiAgc3RyeU5TXzlmYTQ4ID0gcmV0cmlldmVOUztcbiAgcmV0dXJuIHJldHJpZXZlTlMoKTtcbn1cbnN0cnlOU185ZmE0OCgpO1xuZnVuY3Rpb24gc3RyeUNvdl85ZmE0OCgpIHtcbiAgdmFyIG5zID0gc3RyeU5TXzlmYTQ4KCk7XG4gIHZhciBjb3YgPSBucy5tdXRhbnRDb3ZlcmFnZSB8fCAobnMubXV0YW50Q292ZXJhZ2UgPSB7XG4gICAgc3RhdGljOiB7fSxcbiAgICBwZXJUZXN0OiB7fVxuICB9KTtcbiAgZnVuY3Rpb24gY292ZXIoKSB7XG4gICAgdmFyIGMgPSBjb3Yuc3RhdGljO1xuICAgIGlmIChucy5jdXJyZW50VGVzdElkKSB7XG4gICAgICBjID0gY292LnBlclRlc3RbbnMuY3VycmVudFRlc3RJZF0gPSBjb3YucGVyVGVzdFtucy5jdXJyZW50VGVzdElkXSB8fCB7fTtcbiAgICB9XG4gICAgdmFyIGEgPSBhcmd1bWVudHM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjW2FbaV1dID0gKGNbYVtpXV0gfHwgMCkgKyAxO1xuICAgIH1cbiAgfVxuICBzdHJ5Q292XzlmYTQ4ID0gY292ZXI7XG4gIGNvdmVyLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBzdHJ5TXV0QWN0XzlmYTQ4KGlkKSB7XG4gIHZhciBucyA9IHN0cnlOU185ZmE0OCgpO1xuICBmdW5jdGlvbiBpc0FjdGl2ZShpZCkge1xuICAgIGlmIChucy5hY3RpdmVNdXRhbnQgPT09IGlkKSB7XG4gICAgICBpZiAobnMuaGl0Q291bnQgIT09IHZvaWQgMCAmJiArK25zLmhpdENvdW50ID4gbnMuaGl0TGltaXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdHJ5a2VyOiBIaXQgY291bnQgbGltaXQgcmVhY2hlZCAoJyArIG5zLmhpdENvdW50ICsgJyknKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3RyeU11dEFjdF85ZmE0OCA9IGlzQWN0aXZlO1xuICByZXR1cm4gaXNBY3RpdmUoaWQpO1xufVxuaW1wb3J0IHBvc3Rob2cgZnJvbSAncG9zdGhvZy1qcyc7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICdAL2NvbmZpZyc7XG5pbXBvcnQgeyBjcmVhdGVQb3N0SG9nQ29uZmlnLCB2YWxpZGF0ZUV2ZW50LCBnZXRDb21tb25FdmVudFByb3BlcnRpZXMgfSBmcm9tICcuL3Bvc3Rob2ctY29uZmlnJztcblxuLyoqXG4gKiBBbmFseXRpY3MgU2VydmljZSBjbGFzcyBmb3IgY29tcHJlaGVuc2l2ZSB1c2VyIGJlaGF2aW9yIHRyYWNraW5nLlxuICogXG4gKiBNYW5hZ2VzIFBvc3RIb2cgaW50ZWdyYXRpb24gd2l0aCByb2J1c3QgZXJyb3IgaGFuZGxpbmcsIHJldHJ5IGxvZ2ljLFxuICogYW5kIGJ1c2luZXNzLXNwZWNpZmljIGV2ZW50IHRyYWNraW5nLiBQcm92aWRlcyB0eXBlLXNhZmUgYW5hbHl0aWNzXG4gKiBpbnRlcmZhY2UgZm9yIHRoZSBlbnRpcmUgYXBwbGljYXRpb24uXG4gKiBcbiAqIEFyY2hpdGVjdHVyZTpcbiAqICAgLSBTaW5nbGV0b24gcGF0dGVybiBmb3IgY29uc2lzdGVudCBhbmFseXRpY3MgaW5zdGFuY2VcbiAqICAgLSBBdXRvbWF0aWMgaW5pdGlhbGl6YXRpb24gd2l0aCByZXRyeSBsb2dpY1xuICogICAtIEV2ZW50IHZhbGlkYXRpb24gYW5kIGVucmljaG1lbnRcbiAqICAgLSBGZWF0dXJlIGZsYWcgaW50ZWdyYXRpb25cbiAqICAgLSBQcml2YWN5IGNvbnRyb2xzIGFuZCBvcHQtb3V0IGZ1bmN0aW9uYWxpdHlcbiAqIFxuICogRXJyb3IgSGFuZGxpbmc6XG4gKiAgIC0gR3JhY2VmdWwgZGVncmFkYXRpb24gd2hlbiBhbmFseXRpY3MgdW5hdmFpbGFibGVcbiAqICAgLSBBdXRvbWF0aWMgcmV0cnkgb24gaW5pdGlhbGl6YXRpb24gZmFpbHVyZXNcbiAqICAgLSBDb21wcmVoZW5zaXZlIGxvZ2dpbmcgZm9yIGRlYnVnZ2luZ1xuICogICAtIEZhbGxiYWNrIGJlaGF2aW9yIGZvciBjcml0aWNhbCBwYXRoc1xuICovXG5jbGFzcyBBbmFseXRpY3NTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIFNlcnZpY2Ugc3RhdGUgbWFuYWdlbWVudCBmb3IgcmVsaWFibGUgYW5hbHl0aWNzIG9wZXJhdGlvbi5cbiAgICovXG4gIHByaXZhdGUgaW5pdGlhbGl6ZWQgPSBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxNTdcIikgPyB0cnVlIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE1N1wiKSwgZmFsc2UpOyAvLyBBbmFseXRpY3MgaW5pdGlhbGl6YXRpb24gc3RhdHVzXG4gIHByaXZhdGUgcmV0cnlDb3VudCA9IDA7IC8vIEN1cnJlbnQgcmV0cnkgYXR0ZW1wdCBjb3VudGVyXG4gIHByaXZhdGUgbWF4UmV0cmllcyA9IDM7IC8vIE1heGltdW0gaW5pdGlhbGl6YXRpb24gcmV0cnkgYXR0ZW1wdHNcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBQb3N0SG9nIGFuYWx5dGljcyBzZXJ2aWNlIHdpdGggcm9idXN0IGVycm9yIGhhbmRsaW5nLlxuICAgKiBcbiAgICogUGVyZm9ybXMgY29tcHJlaGVuc2l2ZSBzZXR1cCBpbmNsdWRpbmc6XG4gICAqICAgLSBQb3N0SG9nIFNESyBpbml0aWFsaXphdGlvbiB3aXRoIGN1c3RvbSBjb25maWd1cmF0aW9uXG4gICAqICAgLSBDb25uZWN0aW9uIHRlc3RpbmcgYW5kIHZhbGlkYXRpb25cbiAgICogICAtIEF1dG9tYXRpYyByZXRyeSBvbiBmYWlsdXJlc1xuICAgKiAgIC0gRGV2ZWxvcG1lbnQgdnMgcHJvZHVjdGlvbiBlbnZpcm9ubWVudCBoYW5kbGluZ1xuICAgKiBcbiAgICogRXJyb3IgUmVjb3Zlcnk6XG4gICAqICAgLSBSZXRyaWVzIGluaXRpYWxpemF0aW9uIHVwIHRvIG1heFJldHJpZXMgdGltZXNcbiAgICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgZm9yIHJldHJ5IGRlbGF5c1xuICAgKiAgIC0gR3JhY2VmdWwgZGVncmFkYXRpb24gaWYgaW5pdGlhbGl6YXRpb24gZmFpbHNcbiAgICogXG4gICAqIEVudmlyb25tZW50IEhhbmRsaW5nOlxuICAgKiAgIC0gU2VydmVyLXNpZGUgcmVuZGVyaW5nIGNvbXBhdGliaWxpdHkgKG5vIHdpbmRvdylcbiAgICogICAtIERldmVsb3BtZW50IGRlYnVnZ2luZyBhbmQgbG9nZ2luZ1xuICAgKiAgIC0gUHJvZHVjdGlvbiBvcHRpbWl6YXRpb25zXG4gICAqIFxuICAgKiBSZXR1cm5zOlxuICAgKiAgIFByb21pc2U8dm9pZD46IFJlc29sdmVzIHdoZW4gaW5pdGlhbGl6YXRpb24gY29tcGxldGVcbiAgICovXG4gIGFzeW5jIGluaXQoKSB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE1OFwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMTU4XCIpO1xuICAgICAgLy8gUHJldmVudCBpbml0aWFsaXphdGlvbiBpbiBpbnZhbGlkIGVudmlyb25tZW50c1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE2MVwiKSA/ICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCB0aGlzLmluaXRpYWxpemVkKSAmJiAhY29uZmlnLnBvc3Rob2dLZXkgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxNjBcIikgPyBmYWxzZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE1OVwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjEwMTU5XCIsIFwiMTAxNjBcIiwgXCIxMDE2MVwiKSwgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE2M1wiKSA/IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnICYmIHRoaXMuaW5pdGlhbGl6ZWQgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxNjJcIikgPyBmYWxzZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxNjJcIiwgXCIxMDE2M1wiKSwgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE2NVwiKSA/IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMTY0XCIpID8gZmFsc2UgOiAoc3RyeUNvdl85ZmE0OChcIjEwMTY0XCIsIFwiMTAxNjVcIiksIHR5cGVvZiB3aW5kb3cgPT09IChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxNjZcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE2NlwiKSwgJ3VuZGVmaW5lZCcpKSkpIHx8IHRoaXMuaW5pdGlhbGl6ZWQpKSB8fCAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTY3XCIpID8gY29uZmlnLnBvc3Rob2dLZXkgOiAoc3RyeUNvdl85ZmE0OChcIjEwMTY3XCIpLCAhY29uZmlnLnBvc3Rob2dLZXkpKSkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE2OFwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMTY4XCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE2OVwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMTY5XCIpO1xuICAgICAgICAgIC8vIENyZWF0ZSBQb3N0SG9nIGNvbmZpZ3VyYXRpb24gd2l0aCBlbnZpcm9ubWVudC1zcGVjaWZpYyBzZXR0aW5nc1xuICAgICAgICAgIGNvbnN0IHBvc3Rob2dDb25maWcgPSBjcmVhdGVQb3N0SG9nQ29uZmlnKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coc3RyeU11dEFjdF85ZmE0OChcIjEwMTcwXCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxNzBcIiksICdbUG9zdEhvZ10gSW5pdGlhbGl6aW5nIGFuYWx5dGljcyBzZXJ2aWNlLi4uJyksIHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE3MVwiKSA/IHt9IDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE3MVwiKSwge1xuICAgICAgICAgICAga2V5OiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTczXCIpID8gY29uZmlnLnBvc3Rob2dLZXkuc3Vic3RyaW5nKDAsIDEwKSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE3MlwiKSA/IGNvbmZpZy5wb3N0aG9nS2V5IDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE3MlwiLCBcIjEwMTczXCIpLCBjb25maWcucG9zdGhvZ0tleT8uc3Vic3RyaW5nKDAsIDEwKSkpICsgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE3NFwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMTc0XCIpLCAnLi4uJykpLFxuICAgICAgICAgICAgLy8gTWFza2VkIGtleSBmb3Igc2VjdXJpdHlcbiAgICAgICAgICAgIGhvc3Q6IHBvc3Rob2dDb25maWcuYXBpX2hvc3QsXG4gICAgICAgICAgICAvLyBQb3N0SG9nIHNlcnZlciBob3N0XG4gICAgICAgICAgICBkZWJ1ZzogcG9zdGhvZ0NvbmZpZy5kZWJ1ZyAvLyBEZWJ1ZyBtb2RlIHN0YXR1c1xuICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIC8vIEluaXRpYWxpemUgUG9zdEhvZyBTREsgd2l0aCBjb25maWd1cmF0aW9uXG4gICAgICAgICAgcG9zdGhvZy5pbml0KGNvbmZpZy5wb3N0aG9nS2V5LCBwb3N0aG9nQ29uZmlnKTtcblxuICAgICAgICAgIC8vIE1hcmsgYXMgc3VjY2Vzc2Z1bGx5IGluaXRpYWxpemVkXG4gICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE3NVwiKSA/IGZhbHNlIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE3NVwiKSwgdHJ1ZSk7XG4gICAgICAgICAgdGhpcy5yZXRyeUNvdW50ID0gMDsgLy8gUmVzZXQgcmV0cnkgY291bnRlclxuXG4gICAgICAgICAgLy8gVmVyaWZ5IGFuYWx5dGljcyBjb25uZWN0aXZpdHkgd2l0aCB0ZXN0IGV2ZW50XG4gICAgICAgICAgYXdhaXQgdGhpcy50ZXN0Q29ubmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTc2XCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTAxNzZcIik7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxNzdcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE3N1wiKSwgJ1tQb3N0SG9nXSBJbml0aWFsaXphdGlvbiBmYWlsZWQ6JyksIGVycm9yKTtcblxuICAgICAgICAgIC8vIEltcGxlbWVudCByZXRyeSBsb2dpYyB3aXRoIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTgxXCIpID8gdGhpcy5yZXRyeUNvdW50ID49IHRoaXMubWF4UmV0cmllcyA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE4MFwiKSA/IHRoaXMucmV0cnlDb3VudCA8PSB0aGlzLm1heFJldHJpZXMgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxNzlcIikgPyBmYWxzZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE3OFwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjEwMTc4XCIsIFwiMTAxNzlcIiwgXCIxMDE4MFwiLCBcIjEwMTgxXCIpLCB0aGlzLnJldHJ5Q291bnQgPCB0aGlzLm1heFJldHJpZXMpKSB7XG4gICAgICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTgyXCIpKSB7XG4gICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTAxODJcIik7XG4gICAgICAgICAgICAgIHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE4M1wiKSA/IHRoaXMucmV0cnlDb3VudC0tIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE4M1wiKSwgdGhpcy5yZXRyeUNvdW50KyspO1xuICAgICAgICAgICAgICBjb25zdCBkZWxheU1zID0gc3RyeU11dEFjdF85ZmE0OChcIjEwMTg0XCIpID8gMTAwMCAvIHRoaXMucmV0cnlDb3VudCA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxODRcIiksIDEwMDAgKiB0aGlzLnJldHJ5Q291bnQpOyAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE4NVwiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE4NVwiKSwgYFtQb3N0SG9nXSBSZXRyeWluZyBpbml0aWFsaXphdGlvbiAoJHt0aGlzLnJldHJ5Q291bnR9LyR7dGhpcy5tYXhSZXRyaWVzfSkgaW4gJHtkZWxheU1zfW1zLi4uYCkpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE4NlwiKSA/ICgpID0+IHVuZGVmaW5lZCA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxODZcIiksICgpID0+IHRoaXMuaW5pdCgpKSwgZGVsYXlNcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxODdcIikpIHtcbiAgICAgICAgICAgICAge31cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDE4N1wiKTtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxODhcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDE4OFwiKSwgJ1tQb3N0SG9nXSBNYXhpbXVtIHJldHJ5IGF0dGVtcHRzIHJlYWNoZWQsIGFuYWx5dGljcyBkaXNhYmxlZCcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBQb3N0SG9nIGNvbm5lY3Rpdml0eSB3aXRoIGRpYWdub3N0aWMgZXZlbnQuXG4gICAqIFxuICAgKiBTZW5kcyBhIHRlc3QgZXZlbnQgdG8gdmVyaWZ5IHRoYXQgYW5hbHl0aWNzIGFyZSB3b3JraW5nIGNvcnJlY3RseS5cbiAgICogUHJvdmlkZXMgZGVidWdnaW5nIGluZm9ybWF0aW9uIGZvciB0cm91Ymxlc2hvb3RpbmcgY29ubmVjdGlvbiBpc3N1ZXMuXG4gICAqIFxuICAgKiBUZXN0IEV2ZW50IERhdGE6XG4gICAqICAgLSBDb21tb24gcHJvcGVydGllcyAodXNlciBhZ2VudCwgVVJMLCB0aW1lc3RhbXApXG4gICAqICAgLSBJbml0aWFsaXphdGlvbiBtZXRhZGF0YSAodGltZSwgcmV0cnkgY291bnQpXG4gICAqICAgLSBFbnZpcm9ubWVudCBpbmZvcm1hdGlvbiBmb3IgZGVidWdnaW5nXG4gICAqIFxuICAgKiBSZXR1cm5zOlxuICAgKiAgIFByb21pc2U8dm9pZD46IFJlc29sdmVzIHdoZW4gdGVzdCBjb21wbGV0ZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTg5XCIpKSB7XG4gICAgICB7fVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHJ5Q292XzlmYTQ4KFwiMTAxODlcIik7XG4gICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTkyXCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxOTFcIikgPyB0cnVlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMTkwXCIpID8gdGhpcy5pbml0aWFsaXplZCA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxOTBcIiwgXCIxMDE5MVwiLCBcIjEwMTkyXCIpLCAhdGhpcy5pbml0aWFsaXplZCkpIHJldHVybjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxOTNcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDE5M1wiKTtcbiAgICAgICAgICAvLyBTZW5kIGRpYWdub3N0aWMgZXZlbnQgd2l0aCBpbml0aWFsaXphdGlvbiBtZXRhZGF0YVxuICAgICAgICAgIHRoaXMudHJhY2soc3RyeU11dEFjdF85ZmE0OChcIjEwMTk0XCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxOTRcIiksICdhbmFseXRpY3Nfc2VydmljZV9pbml0aWFsaXplZCcpLCBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAxOTVcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxOTVcIiksIHtcbiAgICAgICAgICAgIC4uLmdldENvbW1vbkV2ZW50UHJvcGVydGllcygpLFxuICAgICAgICAgICAgLy8gU3RhbmRhcmQgZXZlbnQgcHJvcGVydGllc1xuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25fdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIC8vIFRpbWVzdGFtcCBmb3IgcGVyZm9ybWFuY2UgdHJhY2tpbmdcbiAgICAgICAgICAgIHJldHJ5X2NvdW50OiB0aGlzLnJldHJ5Q291bnQsXG4gICAgICAgICAgICAvLyBOdW1iZXIgb2YgcmV0cmllcyBmb3IgZGVidWdnaW5nXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogY29uZmlnLmlzUHJvZHVjdGlvbiA/IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE5NlwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMTk2XCIpLCAncHJvZHVjdGlvbicpIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMTk3XCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTAxOTdcIiksICdkZXZlbG9wbWVudCcpXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDE5OFwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMTk4XCIpLCAnW1Bvc3RIb2ddIENvbm5lY3Rpb24gdGVzdCBzdWNjZXNzZnVsIC0gYW5hbHl0aWNzIHJlYWR5JykpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMTk5XCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTAxOTlcIik7XG4gICAgICAgICAgY29uc29sZS53YXJuKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIwMFwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjAwXCIpLCAnW1Bvc3RIb2ddIENvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JyksIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJZGVudGlmeSB1c2VyIGZvciBwZXJzb25hbGl6ZWQgYW5hbHl0aWNzIGFuZCB0YXJnZXRpbmcuXG4gICAqIFxuICAgKiBBc3NvY2lhdGVzIGFsbCBmdXR1cmUgZXZlbnRzIHdpdGggYSBzcGVjaWZpYyB1c2VyIElELCBlbmFibGluZzpcbiAgICogICAtIENyb3NzLWRldmljZSB0cmFja2luZyBhbmQgc2Vzc2lvbiBjb250aW51aXR5XG4gICAqICAgLSBQZXJzb25hbGl6ZWQgZmVhdHVyZSBmbGFncyBhbmQgQS9CIHRlc3RzXG4gICAqICAgLSBVc2VyLXNwZWNpZmljIGFuYWx5dGljcyBhbmQgY29ob3J0IGFuYWx5c2lzXG4gICAqICAgLSBSZXZlbnVlIGF0dHJpYnV0aW9uIGFuZCBsaWZldGltZSB2YWx1ZSB0cmFja2luZ1xuICAgKiBcbiAgICogUHJpdmFjeSBDb21wbGlhbmNlOlxuICAgKiAgIC0gT25seSBpZGVudGlmaWVzIHVzZXJzIHdobyBoYXZlIHByb3ZpZGVkIGNvbnNlbnRcbiAgICogICAtIFN1cHBvcnRzIHBzZXVkb255bW91cyBpZGVudGlmaWVycyBmb3IgcHJpdmFjeVxuICAgKiAgIC0gUmVzcGVjdHMgdXNlciBvcHQtb3V0IHByZWZlcmVuY2VzXG4gICAqIFxuICAgKiBQYXJhbWV0ZXJzOlxuICAgKiAgIHVzZXJJZDogVW5pcXVlIHVzZXIgaWRlbnRpZmllciAoVVVJRCwgZW1haWwgaGFzaCwgZXRjLilcbiAgICogICBwcm9wZXJ0aWVzOiBBZGRpdGlvbmFsIHVzZXIgYXR0cmlidXRlcyBmb3Igc2VnbWVudGF0aW9uXG4gICAqIFxuICAgKiBFeGFtcGxlOlxuICAgKiAgIGFuYWx5dGljcy5pZGVudGlmeSgndXNlcl8xMjMnLCB7XG4gICAqICAgICBlbWFpbDogJ3VzZXJAZXhhbXBsZS5jb20nLFxuICAgKiAgICAgc3Vic2NyaXB0aW9uX3RpZXI6ICdwcmVtaXVtJyxcbiAgICogICAgIGZpcnN0X25hbWU6ICdKb2huJyxcbiAgICogICAgIHNpZ251cF9kYXRlOiAnMjAyNC0wMS0wMSdcbiAgICogICB9KTtcbiAgICovXG4gIGlkZW50aWZ5KHVzZXJJZDogc3RyaW5nLCBwcm9wZXJ0aWVzPzogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMDFcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDIwMVwiKTtcbiAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMDNcIikgPyBmYWxzZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIwMlwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjAyXCIsIFwiMTAyMDNcIiksIHRoaXMuaW5pdGlhbGl6ZWQpKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMDRcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDIwNFwiKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMDVcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDIwNVwiKSwgJ1tQb3N0SG9nXSBJZGVudGlmeWluZyB1c2VyOicpLCB1c2VySWQsIHByb3BlcnRpZXMpO1xuICAgICAgICAgIHBvc3Rob2cuaWRlbnRpZnkodXNlcklkLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFjayB1c2VyIGV2ZW50cyBmb3IgYW5hbHl0aWNzIGFuZCBidXNpbmVzcyBpbnRlbGxpZ2VuY2UuXG4gICAqIFxuICAgKiBSZWNvcmRzIHVzZXIgYWN0aW9ucywgYmVoYXZpb3JzLCBhbmQgc3lzdGVtIGV2ZW50cyBmb3I6XG4gICAqICAgLSBQcm9kdWN0IGFuYWx5dGljcyBhbmQgdXNlciBqb3VybmV5IG1hcHBpbmdcbiAgICogICAtIFJldmVudWUgdHJhY2tpbmcgYW5kIGNvbnZlcnNpb24gb3B0aW1pemF0aW9uXG4gICAqICAgLSBBL0IgdGVzdGluZyBhbmQgZmVhdHVyZSBwZXJmb3JtYW5jZSBtZWFzdXJlbWVudFxuICAgKiAgIC0gRXJyb3IgbW9uaXRvcmluZyBhbmQgcGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICogXG4gICAqIEV2ZW50IFByb2Nlc3Npbmc6XG4gICAqICAgLSBWYWxpZGF0ZXMgZXZlbnQgbmFtZSBhbmQgcHJvcGVydGllc1xuICAgKiAgIC0gRW5yaWNoZXMgZXZlbnRzIHdpdGggY29tbW9uIHByb3BlcnRpZXMgKHRpbWVzdGFtcCwgdXNlciBhZ2VudCwgZXRjLilcbiAgICogICAtIEhhbmRsZXMgZXJyb3JzIGdyYWNlZnVsbHkgd2l0aG91dCBicmVha2luZyB1c2VyIGV4cGVyaWVuY2VcbiAgICogICAtIExvZ3MgZXZlbnRzIGZvciBkZWJ1Z2dpbmcgaW4gZGV2ZWxvcG1lbnRcbiAgICogXG4gICAqIENvbW1vbiBFdmVudCBDYXRlZ29yaWVzOlxuICAgKiAgIC0gVXNlciBhY3Rpb25zOiBzd2lwZV9sZWZ0LCBzd2lwZV9yaWdodCwgcHJvZHVjdF9jbGlja2VkXG4gICAqICAgLSBSZXZlbnVlIGV2ZW50czogYWZmaWxpYXRlX2NsaWNrLCBwdXJjaGFzZV9jb21wbGV0ZWRcbiAgICogICAtIFN5c3RlbSBldmVudHM6IHBhZ2Vfdmlld2VkLCBlcnJvcl9vY2N1cnJlZFxuICAgKiAgIC0gRW5nYWdlbWVudDogc2Vzc2lvbl9zdGFydGVkLCBmZWF0dXJlX3VzZWRcbiAgICogXG4gICAqIFBhcmFtZXRlcnM6XG4gICAqICAgZXZlbnROYW1lOiBEZXNjcmlwdGl2ZSBldmVudCBuYW1lIChzbmFrZV9jYXNlIGNvbnZlbnRpb24pXG4gICAqICAgcHJvcGVydGllczogRXZlbnQtc3BlY2lmaWMgZGF0YSBmb3IgYW5hbHlzaXNcbiAgICogXG4gICAqIEV4YW1wbGU6XG4gICAqICAgYW5hbHl0aWNzLnRyYWNrKCdwcm9kdWN0X3N3aXBlZCcsIHtcbiAgICogICAgIGRpcmVjdGlvbjogJ3JpZ2h0JyxcbiAgICogICAgIHByb2R1Y3RfaWQ6ICdCMDhHWUtOQ0NQJyxcbiAgICogICAgIGNhdGVnb3J5OiAnRWxlY3Ryb25pY3MnLFxuICAgKiAgICAgc2Vzc2lvbl9pZDogJ3Nlc3Npb25fMTIzJ1xuICAgKiAgIH0pO1xuICAgKi9cbiAgdHJhY2soZXZlbnROYW1lOiBzdHJpbmcsIHByb3BlcnRpZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIwNlwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjA2XCIpO1xuICAgICAgLy8gSGFuZGxlIGFuYWx5dGljcyBub3QgaW5pdGlhbGl6ZWQgZ3JhY2VmdWxseVxuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIwOVwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjA4XCIpID8gdHJ1ZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIwN1wiKSA/IHRoaXMuaW5pdGlhbGl6ZWQgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjA3XCIsIFwiMTAyMDhcIiwgXCIxMDIwOVwiKSwgIXRoaXMuaW5pdGlhbGl6ZWQpKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMTBcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDIxMFwiKTtcbiAgICAgICAgICBjb25zb2xlLndhcm4oc3RyeU11dEFjdF85ZmE0OChcIjEwMjExXCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyMTFcIiksICdbUG9zdEhvZ10gQW5hbHl0aWNzIG5vdCBpbml0aWFsaXplZCwgZXZlbnQgcXVldWVkOicpLCBldmVudE5hbWUpO1xuICAgICAgICAgIC8vIEluIHByb2R1Y3Rpb24sIGNvdWxkIHF1ZXVlIGV2ZW50cyBmb3IgbGF0ZXIgc2VuZGluZ1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSBldmVudCBtZWV0cyBuYW1pbmcgYW5kIGRhdGEgcmVxdWlyZW1lbnRzXG4gICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMjE0XCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMTNcIikgPyB0cnVlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjEyXCIpID8gdmFsaWRhdGVFdmVudChldmVudE5hbWUsIHByb3BlcnRpZXMpIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDIxMlwiLCBcIjEwMjEzXCIsIFwiMTAyMTRcIiksICF2YWxpZGF0ZUV2ZW50KGV2ZW50TmFtZSwgcHJvcGVydGllcykpKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMTVcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDIxNVwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMTZcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDIxNlwiKTtcbiAgICAgICAgICAvLyBFbnJpY2ggZXZlbnQgd2l0aCBjb21tb24gcHJvcGVydGllcyBmb3IgY29uc2lzdGVudCBhbmFseXRpY3NcbiAgICAgICAgICBjb25zdCBlbnJpY2hlZFByb3BlcnRpZXMgPSBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMTdcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyMTdcIiksIHtcbiAgICAgICAgICAgIC4uLmdldENvbW1vbkV2ZW50UHJvcGVydGllcygpLFxuICAgICAgICAgICAgLy8gU3RhbmRhcmQgcHJvcGVydGllcyAodGltZXN0YW1wLCBVUkwsIGV0Yy4pXG4gICAgICAgICAgICAuLi5wcm9wZXJ0aWVzIC8vIEV2ZW50LXNwZWNpZmljIHByb3BlcnRpZXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMThcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDIxOFwiKSwgJ1tQb3N0SG9nXSBUcmFja2luZyBldmVudDonKSwgZXZlbnROYW1lLCBlbnJpY2hlZFByb3BlcnRpZXMpO1xuICAgICAgICAgIHBvc3Rob2cuY2FwdHVyZShldmVudE5hbWUsIGVucmljaGVkUHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMTlcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDIxOVwiKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIyMFwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjIwXCIpLCAnW1Bvc3RIb2ddIEZhaWxlZCB0byB0cmFjayBldmVudDonKSwgZXZlbnROYW1lLCBlcnJvcik7XG4gICAgICAgICAgLy8gQ29udGludWUgZXhlY3V0aW9uIGV2ZW4gaWYgYW5hbHl0aWNzIGZhaWxzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IG9yIHVwZGF0ZSB1c2VyIHByb3BlcnRpZXMgZm9yIHNlZ21lbnRhdGlvbiBhbmQgcGVyc29uYWxpemF0aW9uLlxuICAgKiBcbiAgICogVXBkYXRlcyB1c2VyIHByb2ZpbGUgZGF0YSBmb3I6XG4gICAqICAgLSBVc2VyIHNlZ21lbnRhdGlvbiBhbmQgY29ob3J0IGFuYWx5c2lzXG4gICAqICAgLSBQZXJzb25hbGl6ZWQgZmVhdHVyZSBmbGFncyBhbmQgdGFyZ2V0aW5nXG4gICAqICAgLSBSZXZlbnVlIGFuYWx5c2lzIGFuZCBsaWZldGltZSB2YWx1ZSB0cmFja2luZ1xuICAgKiAgIC0gQ3VzdG9tZXIgc3VwcG9ydCBhbmQgdXNlciBpbnNpZ2h0c1xuICAgKiBcbiAgICogUHJvcGVydHkgQ2F0ZWdvcmllczpcbiAgICogICAtIERlbW9ncmFwaGljczogYWdlLCBsb2NhdGlvbiwgZ2VuZGVyXG4gICAqICAgLSBTdWJzY3JpcHRpb246IHRpZXIsIHN0YXR1cywgYmlsbGluZ19jeWNsZVxuICAgKiAgIC0gQmVoYXZpb3I6IGxhc3RfbG9naW4sIHRvdGFsX3N3aXBlcywgcHJlZmVyZW5jZXNcbiAgICogICAtIFJldmVudWU6IHRvdGFsX3NwZW50LCBjb21taXNzaW9uX2dlbmVyYXRlZFxuICAgKiBcbiAgICogUGFyYW1ldGVyczpcbiAgICogICBwcm9wZXJ0aWVzOiBLZXktdmFsdWUgcGFpcnMgb2YgdXNlciBhdHRyaWJ1dGVzXG4gICAqIFxuICAgKiBFeGFtcGxlOlxuICAgKiAgIGFuYWx5dGljcy5zZXRVc2VyUHJvcGVydGllcyh7XG4gICAqICAgICBzdWJzY3JpcHRpb25fdGllcjogJ3ByZW1pdW0nLFxuICAgKiAgICAgdG90YWxfc3dpcGVzOiAxNTAsXG4gICAqICAgICBsYXN0X2FjdGl2ZTogJzIwMjQtMDEtMDEnLFxuICAgKiAgICAgZmF2b3JpdGVfY2F0ZWdvcmllczogWydFbGVjdHJvbmljcycsICdCb29rcyddXG4gICAqICAgfSk7XG4gICAqL1xuICBzZXRVc2VyUHJvcGVydGllcyhwcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIyMVwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjIxXCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIyM1wiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjIyXCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyMjJcIiwgXCIxMDIyM1wiKSwgdGhpcy5pbml0aWFsaXplZCkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIyNFwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjI0XCIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIyNVwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjI1XCIpLCAnW1Bvc3RIb2ddIFNldHRpbmcgdXNlciBwcm9wZXJ0aWVzOicpLCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICBwb3N0aG9nLnBlb3BsZS5zZXQocHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJhY2sgcGFnZSB2aWV3cyBmb3IgbmF2aWdhdGlvbiBhbmFseXRpY3MgYW5kIHVzZXIgam91cm5leSBtYXBwaW5nLlxuICAgKiBcbiAgICogUmVjb3JkcyBwYWdlIG5hdmlnYXRpb24gZXZlbnRzIGZvcjpcbiAgICogICAtIFVzZXIgZmxvdyBhbmFseXNpcyBhbmQgY29udmVyc2lvbiBmdW5uZWxzXG4gICAqICAgLSBQYWdlIHBlcmZvcm1hbmNlIGFuZCBlbmdhZ2VtZW50IG1ldHJpY3NcbiAgICogICAtIEEvQiB0ZXN0aW5nIG9mIHBhZ2UgbGF5b3V0cyBhbmQgY29udGVudFxuICAgKiAgIC0gU0VPIGFuZCBjb250ZW50IG9wdGltaXphdGlvbiBpbnNpZ2h0c1xuICAgKiBcbiAgICogQXV0b21hdGljIEVucmljaG1lbnQ6XG4gICAqICAgLSBSZWZlcnJlciBpbmZvcm1hdGlvbiBmb3IgdHJhZmZpYyBzb3VyY2UgYW5hbHlzaXNcbiAgICogICAtIFBhZ2UgbG9hZCB0aW1lIGFuZCBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAqICAgLSBEZXZpY2UgYW5kIGJyb3dzZXIgaW5mb3JtYXRpb25cbiAgICogICAtIFVzZXIgc2Vzc2lvbiBjb250ZXh0XG4gICAqIFxuICAgKiBQYXJhbWV0ZXJzOlxuICAgKiAgIHBhdGg6IE9wdGlvbmFsIHBhZ2UgcGF0aCAoZGVmYXVsdHMgdG8gY3VycmVudCBVUkwpXG4gICAqIFxuICAgKiBFeGFtcGxlOlxuICAgKiAgIGFuYWx5dGljcy50cmFja1BhZ2VWaWV3KCcvZGlzY292ZXInKTsgLy8gVHJhY2sgc3BlY2lmaWMgcGFnZVxuICAgKiAgIGFuYWx5dGljcy50cmFja1BhZ2VWaWV3KCk7ICAgICAgICAgICAgLy8gVHJhY2sgY3VycmVudCBwYWdlXG4gICAqL1xuICB0cmFja1BhZ2VWaWV3KHBhdGg/OiBzdHJpbmcpIHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMjI2XCIpKSB7XG4gICAgICB7fVxuICAgIH0gZWxzZSB7XG4gICAgICBzdHJ5Q292XzlmYTQ4KFwiMTAyMjZcIik7XG4gICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMjI4XCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMjdcIikgPyB0cnVlIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDIyN1wiLCBcIjEwMjI4XCIpLCB0aGlzLmluaXRpYWxpemVkKSkge1xuICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMjI5XCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTAyMjlcIik7XG4gICAgICAgICAgY29uc3QgcGFnZVVybCA9IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIzMlwiKSA/IHBhdGggJiYgd2luZG93LmxvY2F0aW9uLmhyZWYgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyMzFcIikgPyBmYWxzZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIzMFwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjMwXCIsIFwiMTAyMzFcIiwgXCIxMDIzMlwiKSwgcGF0aCB8fCB3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICAgICAgY29uc29sZS5sb2coc3RyeU11dEFjdF85ZmE0OChcIjEwMjMzXCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyMzNcIiksICdbUG9zdEhvZ10gVHJhY2tpbmcgcGFnZSB2aWV3OicpLCBwYWdlVXJsKTtcbiAgICAgICAgICBwb3N0aG9nLmNhcHR1cmUoc3RyeU11dEFjdF85ZmE0OChcIjEwMjM0XCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyMzRcIiksICckcGFnZXZpZXcnKSwgc3RyeU11dEFjdF85ZmE0OChcIjEwMjM1XCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjEwMjM1XCIpLCB7XG4gICAgICAgICAgICAkY3VycmVudF91cmw6IHBhZ2VVcmwsXG4gICAgICAgICAgICAvLyBQYWdlIFVSTCBmb3IgbmF2aWdhdGlvbiB0cmFja2luZ1xuICAgICAgICAgICAgcGFnZV90aXRsZTogZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgICAvLyBQYWdlIHRpdGxlIGZvciBjb250ZW50IGFuYWx5c2lzXG4gICAgICAgICAgICByZWZlcnJlcjogZG9jdW1lbnQucmVmZXJyZXIgLy8gUHJldmlvdXMgcGFnZSBmb3IgdHJhZmZpYyBmbG93XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHVzZXIgc2Vzc2lvbiBmb3IgbG9nb3V0IGFuZCBwcml2YWN5IGNvbXBsaWFuY2UuXG4gICAqIFxuICAgKiBDbGVhcnMgYWxsIHVzZXIgaWRlbnRpZmljYXRpb24gYW5kIHNlc3Npb24gZGF0YSBmb3I6XG4gICAqICAgLSBVc2VyIGxvZ291dCBhbmQgc2Vzc2lvbiB0ZXJtaW5hdGlvblxuICAgKiAgIC0gUHJpdmFjeSBjb21wbGlhbmNlIGFuZCBkYXRhIHByb3RlY3Rpb25cbiAgICogICAtIFNoYXJlZCBkZXZpY2UgdXNhZ2Ugc2NlbmFyaW9zXG4gICAqICAgLSBUZXN0aW5nIGFuZCBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHNcbiAgICogXG4gICAqIFJlc2V0IEFjdGlvbnM6XG4gICAqICAgLSBDbGVhcnMgdXNlciBpZGVudGlmaWNhdGlvbiBhbmQgcHJvcGVydGllc1xuICAgKiAgIC0gUmVzZXRzIGZlYXR1cmUgZmxhZyBjYWNoZVxuICAgKiAgIC0gR2VuZXJhdGVzIG5ldyBhbm9ueW1vdXMgc2Vzc2lvbiBJRFxuICAgKiAgIC0gTWFpbnRhaW5zIGFuYWx5dGljcyBmdW5jdGlvbmFsaXR5IGZvciBhbm9ueW1vdXMgdHJhY2tpbmdcbiAgICogXG4gICAqIFByaXZhY3kgQ29tcGxpYW5jZTpcbiAgICogICAtIEVuc3VyZXMgbm8gcGVyc29uYWwgZGF0YSBwZXJzaXN0cyBhZnRlciBsb2dvdXRcbiAgICogICAtIFN1cHBvcnRzIFwicmlnaHQgdG8gYmUgZm9yZ290dGVuXCIgcmVxdWlyZW1lbnRzXG4gICAqICAgLSBDbGVhcnMgYWxsIGxvY2FsbHkgc3RvcmVkIHVzZXIgZGF0YVxuICAgKiBcbiAgICogRXhhbXBsZTpcbiAgICogICAvLyBPbiB1c2VyIGxvZ291dFxuICAgKiAgIGFuYWx5dGljcy5yZXNldCgpO1xuICAgKi9cbiAgcmVzZXQoKSB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIzNlwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjM2XCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIzOFwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjM3XCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyMzdcIiwgXCIxMDIzOFwiKSwgdGhpcy5pbml0aWFsaXplZCkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDIzOVwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjM5XCIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI0MFwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjQwXCIpLCAnW1Bvc3RIb2ddIFJlc2V0dGluZyB1c2VyIHNlc3Npb24nKSk7XG4gICAgICAgICAgcG9zdGhvZy5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFzc29jaWF0ZSB1c2VyIHdpdGggZ3JvdXBzIGZvciBvcmdhbml6YXRpb25hbCBhbmFseXRpY3MuXG4gICAqIFxuICAgKiBHcm91cHMgdXNlcnMgYnkgb3JnYW5pemF0aW9uLCB0ZWFtLCBvciBvdGhlciBlbnRpdGllcyBmb3I6XG4gICAqICAgLSBCMkIgYW5hbHl0aWNzIGFuZCBlbnRlcnByaXNlIGluc2lnaHRzXG4gICAqICAgLSBUZWFtIGNvbGxhYm9yYXRpb24gZmVhdHVyZSB1c2FnZVxuICAgKiAgIC0gT3JnYW5pemF0aW9uLWxldmVsIHJlcG9ydGluZyBhbmQgYmlsbGluZ1xuICAgKiAgIC0gTXVsdGktdGVuYW50IGFwcGxpY2F0aW9uIGFuYWx5dGljc1xuICAgKiBcbiAgICogR3JvdXAgVHlwZXM6XG4gICAqICAgLSBvcmdhbml6YXRpb246IENvbXBhbnkgb3IgYnVzaW5lc3MgZW50aXR5XG4gICAqICAgLSB0ZWFtOiBEZXBhcnRtZW50IG9yIHByb2plY3QgdGVhbVxuICAgKiAgIC0gc3Vic2NyaXB0aW9uOiBTaGFyZWQgc3Vic2NyaXB0aW9uIGFjY291bnRcbiAgICogICAtIGZhbWlseTogRmFtaWx5IGdpZnQtZ2l2aW5nIGdyb3Vwc1xuICAgKiBcbiAgICogUGFyYW1ldGVyczpcbiAgICogICBncm91cFR5cGU6IFR5cGUgb2YgZ3JvdXAgKG9yZ2FuaXphdGlvbiwgdGVhbSwgZXRjLilcbiAgICogICBncm91cEtleTogVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBncm91cFxuICAgKiAgIHByb3BlcnRpZXM6IEdyb3VwLXNwZWNpZmljIGF0dHJpYnV0ZXNcbiAgICogXG4gICAqIEV4YW1wbGU6XG4gICAqICAgYW5hbHl0aWNzLmdyb3VwKCdvcmdhbml6YXRpb24nLCAnYWNtZS1jb3JwJywge1xuICAgKiAgICAgbmFtZTogJ0FjbWUgQ29ycG9yYXRpb24nLFxuICAgKiAgICAgcGxhbjogJ2VudGVycHJpc2UnLFxuICAgKiAgICAgZW1wbG95ZWVzOiA1MDBcbiAgICogICB9KTtcbiAgICovXG4gIGdyb3VwKGdyb3VwVHlwZTogc3RyaW5nLCBncm91cEtleTogc3RyaW5nLCBwcm9wZXJ0aWVzPzogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNDFcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDI0MVwiKTtcbiAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNDNcIikgPyBmYWxzZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI0MlwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjQyXCIsIFwiMTAyNDNcIiksIHRoaXMuaW5pdGlhbGl6ZWQpKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNDRcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxMDI0NFwiKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNDVcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDI0NVwiKSwgJ1tQb3N0SG9nXSBTZXR0aW5nIGdyb3VwOicpLCBncm91cFR5cGUsIGdyb3VwS2V5LCBwcm9wZXJ0aWVzKTtcbiAgICAgICAgICBwb3N0aG9nLmdyb3VwKGdyb3VwVHlwZSwgZ3JvdXBLZXksIHByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgZmVhdHVyZSBmbGFnIGlzIGVuYWJsZWQgZm9yIHRoZSBjdXJyZW50IHVzZXIuXG4gICAqIFxuICAgKiBFbmFibGVzIGNvbnRyb2xsZWQgZmVhdHVyZSByb2xsb3V0cyBhbmQgQS9CIHRlc3RpbmcgZm9yOlxuICAgKiAgIC0gR3JhZHVhbCBmZWF0dXJlIHJlbGVhc2VzIHRvIHVzZXIgc2VnbWVudHNcbiAgICogICAtIEEvQiB0ZXN0aW5nIG9mIG5ldyBmdW5jdGlvbmFsaXR5XG4gICAqICAgLSBLaWxsIHN3aXRjaGVzIGZvciBwcm9ibGVtYXRpYyBmZWF0dXJlc1xuICAgKiAgIC0gUGVyc29uYWxpemVkIHVzZXIgZXhwZXJpZW5jZXNcbiAgICogXG4gICAqIEZlYXR1cmUgRmxhZyBDYXRlZ29yaWVzOlxuICAgKiAgIC0gVUkgZmVhdHVyZXM6IG5ld19zd2lwZV9pbnRlcmZhY2UsIGRhcmtfbW9kZVxuICAgKiAgIC0gQnVzaW5lc3MgbG9naWM6IHByZW1pdW1fcmVjb21tZW5kYXRpb25zLCBhZmZpbGlhdGVfdHJhY2tpbmdcbiAgICogICAtIEV4cGVyaW1lbnRzOiByZWNvbW1lbmRhdGlvbl9hbGdvcml0aG1fdjJcbiAgICogICAtIFJvbGxvdXRzOiBtb2JpbGVfYXBwX3Byb21vdGlvblxuICAgKiBcbiAgICogUGFyYW1ldGVyczpcbiAgICogICBmbGFnOiBGZWF0dXJlIGZsYWcgbmFtZSAoc25ha2VfY2FzZSBjb252ZW50aW9uKVxuICAgKiBcbiAgICogUmV0dXJuczpcbiAgICogICBib29sZWFuOiBUcnVlIGlmIGZlYXR1cmUgaXMgZW5hYmxlZCBmb3IgY3VycmVudCB1c2VyXG4gICAqIFxuICAgKiBFeGFtcGxlOlxuICAgKiAgIGlmIChhbmFseXRpY3MuaXNGZWF0dXJlRW5hYmxlZCgnbmV3X3JlY29tbWVuZGF0aW9uX2VuZ2luZScpKSB7XG4gICAqICAgICAvLyBTaG93IG5ldyByZWNvbW1lbmRhdGlvbiBVSVxuICAgKiAgIH1cbiAgICovXG4gIGlzRmVhdHVyZUVuYWJsZWQoZmxhZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI0NlwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjQ2XCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI0OFwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjQ3XCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyNDdcIiwgXCIxMDI0OFwiKSwgdGhpcy5pbml0aWFsaXplZCkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI0OVwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjQ5XCIpO1xuICAgICAgICAgIGNvbnN0IGVuYWJsZWQgPSBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNTJcIikgPyBwb3N0aG9nLmlzRmVhdHVyZUVuYWJsZWQoZmxhZykgIT09IHRydWUgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNTFcIikgPyBmYWxzZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI1MFwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjUwXCIsIFwiMTAyNTFcIiwgXCIxMDI1MlwiKSwgcG9zdGhvZy5pc0ZlYXR1cmVFbmFibGVkKGZsYWcpID09PSAoc3RyeU11dEFjdF85ZmE0OChcIjEwMjUzXCIpID8gZmFsc2UgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjUzXCIpLCB0cnVlKSkpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI1NFwiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDI1NFwiKSwgYFtQb3N0SG9nXSBGZWF0dXJlIGZsYWcgJyR7ZmxhZ30nOmApLCBlbmFibGVkKTtcbiAgICAgICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI1NVwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjU1XCIpLCBmYWxzZSk7IC8vIERlZmF1bHQgdG8gZGlzYWJsZWQgaWYgYW5hbHl0aWNzIG5vdCBhdmFpbGFibGVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZlYXR1cmUgZmxhZyB2YWx1ZSBmb3IgYWR2YW5jZWQgZmxhZyBjb25maWd1cmF0aW9ucy5cbiAgICogXG4gICAqIFJldHJpZXZlcyBmZWF0dXJlIGZsYWcgdmFsdWVzIHRoYXQgY2FuIGJlOlxuICAgKiAgIC0gQm9vbGVhbjogdHJ1ZS9mYWxzZSBmb3Igc2ltcGxlIG9uL29mZiBmZWF0dXJlc1xuICAgKiAgIC0gU3RyaW5nOiB2YXJpYW50IG5hbWVzIGZvciBtdWx0aXZhcmlhdGUgdGVzdHNcbiAgICogICAtIE51bWJlcjogY29uZmlndXJhdGlvbiB2YWx1ZXMgb3IgcGVyY2VudGFnZXNcbiAgICogXG4gICAqIEFkdmFuY2VkIFVzZSBDYXNlczpcbiAgICogICAtIE11bHRpdmFyaWF0ZSB0ZXN0aW5nIHdpdGggbXVsdGlwbGUgdmFyaWFudHNcbiAgICogICAtIENvbmZpZ3VyYXRpb24gZmxhZ3Mgd2l0aCBzcGVjaWZpYyB2YWx1ZXNcbiAgICogICAtIFBlcmNlbnRhZ2UtYmFzZWQgcm9sbG91dHNcbiAgICogICAtIFN0cmluZy1iYXNlZCBmZWF0dXJlIHZhcmlhbnRzXG4gICAqIFxuICAgKiBQYXJhbWV0ZXJzOlxuICAgKiAgIGZsYWc6IEZlYXR1cmUgZmxhZyBuYW1lXG4gICAqIFxuICAgKiBSZXR1cm5zOlxuICAgKiAgIHN0cmluZyB8IGJvb2xlYW4gfCB1bmRlZmluZWQ6IEZsYWcgdmFsdWUgb3IgdW5kZWZpbmVkIGlmIG5vdCBzZXRcbiAgICogXG4gICAqIEV4YW1wbGU6XG4gICAqICAgY29uc3QgdmFyaWFudCA9IGFuYWx5dGljcy5nZXRGZWF0dXJlRmxhZygncmVjb21tZW5kYXRpb25fYWxnb3JpdGhtJyk7XG4gICAqICAgaWYgKHZhcmlhbnQgPT09ICdjb2xsYWJvcmF0aXZlX2ZpbHRlcmluZycpIHtcbiAgICogICAgIC8vIFVzZSBjb2xsYWJvcmF0aXZlIGZpbHRlcmluZyBhbGdvcml0aG1cbiAgICogICB9IGVsc2UgaWYgKHZhcmlhbnQgPT09ICdjb250ZW50X2Jhc2VkJykge1xuICAgKiAgICAgLy8gVXNlIGNvbnRlbnQtYmFzZWQgYWxnb3JpdGhtXG4gICAqICAgfVxuICAgKi9cbiAgZ2V0RmVhdHVyZUZsYWcoZmxhZzogc3RyaW5nKTogc3RyaW5nIHwgYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI1NlwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjU2XCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI1OFwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjU3XCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyNTdcIiwgXCIxMDI1OFwiKSwgdGhpcy5pbml0aWFsaXplZCkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI1OVwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjU5XCIpO1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gcG9zdGhvZy5nZXRGZWF0dXJlRmxhZyhmbGFnKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNjBcIikgPyBgYCA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyNjBcIiksIGBbUG9zdEhvZ10gRmVhdHVyZSBmbGFnICcke2ZsYWd9JyB2YWx1ZTpgKSwgdmFsdWUpO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3B0IHVzZXIgb3V0IG9mIGFuYWx5dGljcyB0cmFja2luZyBmb3IgcHJpdmFjeSBjb21wbGlhbmNlLlxuICAgKiBcbiAgICogUHJvdmlkZXMgdXNlciBjb250cm9sIG92ZXIgZGF0YSBjb2xsZWN0aW9uIGZvcjpcbiAgICogICAtIEdEUFIgYW5kIHByaXZhY3kgcmVndWxhdGlvbiBjb21wbGlhbmNlXG4gICAqICAgLSBVc2VyIHByZWZlcmVuY2UgYW5kIGNvbnNlbnQgbWFuYWdlbWVudFxuICAgKiAgIC0gQ29va2llIGJhbm5lciBhbmQgcHJpdmFjeSBjb250cm9sc1xuICAgKiAgIC0gRGF0YSBtaW5pbWl6YXRpb24gcHJpbmNpcGxlc1xuICAgKiBcbiAgICogT3B0LU91dCBFZmZlY3RzOlxuICAgKiAgIC0gU3RvcHMgYWxsIGV2ZW50IHRyYWNraW5nIGFuZCBkYXRhIGNvbGxlY3Rpb25cbiAgICogICAtIERpc2FibGVzIGZlYXR1cmUgZmxhZ3MgYW5kIHBlcnNvbmFsaXphdGlvblxuICAgKiAgIC0gTWFpbnRhaW5zIGJhc2ljIGZ1bmN0aW9uYWxpdHkgd2l0aG91dCBhbmFseXRpY3NcbiAgICogICAtIFNldHMgcGVyc2lzdGVudCBvcHQtb3V0IHByZWZlcmVuY2VcbiAgICogXG4gICAqIFByaXZhY3kgQ29tcGxpYW5jZTpcbiAgICogICAtIFJlc3BlY3RzIHVzZXIgcHJpdmFjeSBjaG9pY2VzXG4gICAqICAgLSBQcm92aWRlcyBjbGVhciBvcHQtb3V0IG1lY2hhbmlzbVxuICAgKiAgIC0gTWFpbnRhaW5zIG9wdC1vdXQgc3RhdHVzIGFjcm9zcyBzZXNzaW9uc1xuICAgKiBcbiAgICogRXhhbXBsZTpcbiAgICogICAvLyBVc2VyIGNsaWNrcyBcIk9wdCBvdXQgb2YgYW5hbHl0aWNzXCJcbiAgICogICBhbmFseXRpY3Mub3B0T3V0KCk7XG4gICAqL1xuICBvcHRPdXQoKSB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI2MVwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjYxXCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI2M1wiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjYyXCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyNjJcIiwgXCIxMDI2M1wiKSwgdGhpcy5pbml0aWFsaXplZCkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI2NFwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjY0XCIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI2NVwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjY1XCIpLCAnW1Bvc3RIb2ddIFVzZXIgb3B0ZWQgb3V0IG9mIGFuYWx5dGljcyB0cmFja2luZycpKTtcbiAgICAgICAgICBwb3N0aG9nLm9wdF9vdXRfY2FwdHVyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogT3B0IHVzZXIgaW50byBhbmFseXRpY3MgdHJhY2tpbmcgYWZ0ZXIgcHJldmlvdXMgb3B0LW91dC5cbiAgICogXG4gICAqIFJlLWVuYWJsZXMgYW5hbHl0aWNzIGZvciB1c2VycyB3aG8gcHJldmlvdXNseSBvcHRlZCBvdXQ6XG4gICAqICAgLSBSZXN0b3JlcyBmdWxsIGFuYWx5dGljcyBmdW5jdGlvbmFsaXR5XG4gICAqICAgLSBSZS1lbmFibGVzIGZlYXR1cmUgZmxhZ3MgYW5kIHBlcnNvbmFsaXphdGlvblxuICAgKiAgIC0gUmVzdW1lcyBldmVudCB0cmFja2luZyBhbmQgZGF0YSBjb2xsZWN0aW9uXG4gICAqICAgLSBVcGRhdGVzIHVzZXIgY29uc2VudCBwcmVmZXJlbmNlc1xuICAgKiBcbiAgICogVXNlIENhc2VzOlxuICAgKiAgIC0gVXNlciBjaGFuZ2VzIHByaXZhY3kgcHJlZmVyZW5jZXNcbiAgICogICAtIFByZW1pdW0gdXNlcnMgZW5hYmxpbmcgYWR2YW5jZWQgZmVhdHVyZXNcbiAgICogICAtIE9uYm9hcmRpbmcgZmxvdyBjb25zZW50IHVwZGF0ZXNcbiAgICogICAtIFNldHRpbmdzIHBhZ2UgcHJpdmFjeSBjb250cm9sc1xuICAgKiBcbiAgICogRXhhbXBsZTpcbiAgICogICAvLyBVc2VyIGNsaWNrcyBcIkVuYWJsZSBhbmFseXRpY3NcIlxuICAgKiAgIGFuYWx5dGljcy5vcHRJbigpO1xuICAgKi9cbiAgb3B0SW4oKSB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI2NlwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjY2XCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI2OFwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjY3XCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyNjdcIiwgXCIxMDI2OFwiKSwgdGhpcy5pbml0aWFsaXplZCkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI2OVwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjY5XCIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI3MFwiKSA/IFwiXCIgOiAoc3RyeUNvdl85ZmE0OChcIjEwMjcwXCIpLCAnW1Bvc3RIb2ddIFVzZXIgb3B0ZWQgaW50byBhbmFseXRpY3MgdHJhY2tpbmcnKSk7XG4gICAgICAgICAgcG9zdGhvZy5vcHRfaW5fY2FwdHVyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdXNlciBoYXMgb3B0ZWQgb3V0IG9mIGFuYWx5dGljcyB0cmFja2luZy5cbiAgICogXG4gICAqIERldGVybWluZXMgdXNlcidzIGN1cnJlbnQgcHJpdmFjeSBwcmVmZXJlbmNlIGZvcjpcbiAgICogICAtIENvbmRpdGlvbmFsIFVJIHJlbmRlcmluZyBiYXNlZCBvbiBjb25zZW50XG4gICAqICAgLSBQcml2YWN5IHNldHRpbmdzIHBhZ2Ugc3RhdHVzIGRpc3BsYXlcbiAgICogICAtIEZlYXR1cmUgYXZhaWxhYmlsaXR5IGFuZCBmdW5jdGlvbmFsaXR5XG4gICAqICAgLSBDb21wbGlhbmNlIHdpdGggcHJpdmFjeSByZWd1bGF0aW9uc1xuICAgKiBcbiAgICogUmV0dXJuczpcbiAgICogICBib29sZWFuOiBUcnVlIGlmIHVzZXIgaGFzIG9wdGVkIG91dCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqIFxuICAgKiBFeGFtcGxlOlxuICAgKiAgIGlmICghYW5hbHl0aWNzLmhhc09wdGVkT3V0KCkpIHtcbiAgICogICAgIC8vIFNob3cgYW5hbHl0aWNzLWRlcGVuZGVudCBmZWF0dXJlc1xuICAgKiAgICAgcmVuZGVyUGVyc29uYWxpemVkUmVjb21tZW5kYXRpb25zKCk7XG4gICAqICAgfVxuICAgKi9cbiAgaGFzT3B0ZWRPdXQoKTogYm9vbGVhbiB7XG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI3MVwiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjcxXCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI3M1wiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjEwMjcyXCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTAyNzJcIiwgXCIxMDI3M1wiKSwgdGhpcy5pbml0aWFsaXplZCkpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI3NFwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjEwMjc0XCIpO1xuICAgICAgICAgIHJldHVybiBwb3N0aG9nLmhhc19vcHRlZF9vdXRfY2FwdHVyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTAyNzVcIikgPyB0cnVlIDogKHN0cnlDb3ZfOWZhNDgoXCIxMDI3NVwiKSwgZmFsc2UpOyAvLyBEZWZhdWx0IHRvIG9wdGVkLWluIGlmIGFuYWx5dGljcyBub3QgYXZhaWxhYmxlXG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0lOR0xFVE9OIEFOQUxZVElDUyBJTlNUQU5DRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHbG9iYWwgYW5hbHl0aWNzIGluc3RhbmNlIGZvciBhcHBsaWNhdGlvbi13aWRlIHVzYWdlXG5cbi8qKlxuICogR2xvYmFsIGFuYWx5dGljcyBzZXJ2aWNlIGluc3RhbmNlLlxuICogXG4gKiBTaW5nbGV0b24gcGF0dGVybiBlbnN1cmVzIGNvbnNpc3RlbnQgYW5hbHl0aWNzIGFjcm9zcyB0aGUgZW50aXJlIGFwcGxpY2F0aW9uLlxuICogVXNlIHRoaXMgaW5zdGFuY2UgZm9yIGFsbCBhbmFseXRpY3Mgb3BlcmF0aW9ucyB0byBtYWludGFpbiBzdGF0ZSBhbmQgY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IGFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3NTZXJ2aWNlKCk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09OVkVOSUVOQ0UgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNpbXBsaWZpZWQgQVBJIGZvciBjb21tb24gYW5hbHl0aWNzIG9wZXJhdGlvbnNcblxuLyoqXG4gKiBUcmFjayB1c2VyIGV2ZW50IHdpdGggc2ltcGxpZmllZCBBUEkuXG4gKiBcbiAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciB0aGUgbW9zdCBjb21tb24gYW5hbHl0aWNzIG9wZXJhdGlvbi5cbiAqIFByb3ZpZGVzIHR5cGUtc2FmZSBldmVudCB0cmFja2luZyB3aXRob3V0IGRpcmVjdCBzZXJ2aWNlIGFjY2Vzcy5cbiAqIFxuICogUGFyYW1ldGVyczpcbiAqICAgZXZlbnROYW1lOiBEZXNjcmlwdGl2ZSBldmVudCBuYW1lIChzbmFrZV9jYXNlKVxuICogICBwcm9wZXJ0aWVzOiBPcHRpb25hbCBldmVudCBkYXRhXG4gKiBcbiAqIEV4YW1wbGU6XG4gKiAgIHRyYWNrRXZlbnQoJ2J1dHRvbl9jbGlja2VkJywgeyBidXR0b25faWQ6ICdzaWdudXAnIH0pO1xuICovXG5leHBvcnQgY29uc3QgdHJhY2tFdmVudCA9IChldmVudE5hbWU6IHN0cmluZywgcHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI3NlwiKSkge1xuICAgIHt9XG4gIH0gZWxzZSB7XG4gICAgc3RyeUNvdl85ZmE0OChcIjEwMjc2XCIpO1xuICAgIGFuYWx5dGljcy50cmFjayhldmVudE5hbWUsIHByb3BlcnRpZXMpO1xuICB9XG59O1xuXG4vKipcbiAqIElkZW50aWZ5IHVzZXIgd2l0aCBzaW1wbGlmaWVkIEFQSS5cbiAqIFxuICogQ29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIHVzZXIgaWRlbnRpZmljYXRpb24gd2l0aG91dCBkaXJlY3Qgc2VydmljZSBhY2Nlc3MuXG4gKiBcbiAqIFBhcmFtZXRlcnM6XG4gKiAgIHVzZXJJZDogVW5pcXVlIHVzZXIgaWRlbnRpZmllclxuICogICBwcm9wZXJ0aWVzOiBPcHRpb25hbCB1c2VyIGF0dHJpYnV0ZXNcbiAqIFxuICogRXhhbXBsZTpcbiAqICAgaWRlbnRpZnlVc2VyKCd1c2VyXzEyMycsIHsgZW1haWw6ICd1c2VyQGV4YW1wbGUuY29tJyB9KTtcbiAqL1xuZXhwb3J0IGNvbnN0IGlkZW50aWZ5VXNlciA9ICh1c2VySWQ6IHN0cmluZywgcHJvcGVydGllcz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxMDI3N1wiKSkge1xuICAgIHt9XG4gIH0gZWxzZSB7XG4gICAgc3RyeUNvdl85ZmE0OChcIjEwMjc3XCIpO1xuICAgIGFuYWx5dGljcy5pZGVudGlmeSh1c2VySWQsIHByb3BlcnRpZXMpO1xuICB9XG59O1xuXG4vKipcbiAqIFRyYWNrIHBhZ2UgdmlldyB3aXRoIHNpbXBsaWZpZWQgQVBJLlxuICogXG4gKiBDb252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgcGFnZSB2aWV3IHRyYWNraW5nIHdpdGhvdXQgZGlyZWN0IHNlcnZpY2UgYWNjZXNzLlxuICogXG4gKiBQYXJhbWV0ZXJzOlxuICogICBwYXRoOiBPcHRpb25hbCBwYWdlIHBhdGggKGRlZmF1bHRzIHRvIGN1cnJlbnQgVVJMKVxuICogXG4gKiBFeGFtcGxlOlxuICogICB0cmFja1BhZ2VWaWV3KCcvZGlzY292ZXInKTtcbiAqL1xuZXhwb3J0IGNvbnN0IHRyYWNrUGFnZVZpZXcgPSAocGF0aD86IHN0cmluZykgPT4ge1xuICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjEwMjc4XCIpKSB7XG4gICAge31cbiAgfSBlbHNlIHtcbiAgICBzdHJ5Q292XzlmYTQ4KFwiMTAyNzhcIik7XG4gICAgYW5hbHl0aWNzLnRyYWNrUGFnZVZpZXcocGF0aCk7XG4gIH1cbn07XG5cbi8vIERlZmF1bHQgZXhwb3J0IGZvciBpbXBvcnRpbmcgYXMgc2luZ2xlIG1vZHVsZVxuZXhwb3J0IGRlZmF1bHQgYW5hbHl0aWNzO1xuXG4vLyBFeHBvcnQgYWxsIHB1YmxpYyBpbnRlcmZhY2VzXG4vLyBFeHBvcnRlZDogYW5hbHl0aWNzLCB0cmFja0V2ZW50LCBpZGVudGlmeVVzZXIsIHRyYWNrUGFnZVZpZXcsIEFuYWx5dGljc1NlcnZpY2UiXSwibmFtZXMiOlsiYW5hbHl0aWNzIiwiaWRlbnRpZnlVc2VyIiwidHJhY2tFdmVudCIsInRyYWNrUGFnZVZpZXciLCJzdHJ5TlNfOWZhNDgiLCJnIiwiZ2xvYmFsVGhpcyIsIk1hdGgiLCJGdW5jdGlvbiIsIm5zIiwiX19zdHJ5a2VyX18iLCJhY3RpdmVNdXRhbnQiLCJ1bmRlZmluZWQiLCJwcm9jZXNzIiwiZW52IiwiX19TVFJZS0VSX0FDVElWRV9NVVRBTlRfXyIsInJldHJpZXZlTlMiLCJzdHJ5Q292XzlmYTQ4IiwiY292IiwibXV0YW50Q292ZXJhZ2UiLCJzdGF0aWMiLCJwZXJUZXN0IiwiY292ZXIiLCJjIiwiY3VycmVudFRlc3RJZCIsImEiLCJhcmd1bWVudHMiLCJpIiwibGVuZ3RoIiwiYXBwbHkiLCJzdHJ5TXV0QWN0XzlmYTQ4IiwiaWQiLCJpc0FjdGl2ZSIsImhpdENvdW50IiwiaGl0TGltaXQiLCJFcnJvciIsIkFuYWx5dGljc1NlcnZpY2UiLCJpbml0Iiwid2luZG93IiwiaW5pdGlhbGl6ZWQiLCJjb25maWciLCJwb3N0aG9nS2V5IiwicG9zdGhvZ0NvbmZpZyIsImNyZWF0ZVBvc3RIb2dDb25maWciLCJjb25zb2xlIiwibG9nIiwia2V5Iiwic3Vic3RyaW5nIiwiaG9zdCIsImFwaV9ob3N0IiwiZGVidWciLCJwb3N0aG9nIiwicmV0cnlDb3VudCIsInRlc3RDb25uZWN0aW9uIiwiZXJyb3IiLCJtYXhSZXRyaWVzIiwiZGVsYXlNcyIsInNldFRpbWVvdXQiLCJ0cmFjayIsImdldENvbW1vbkV2ZW50UHJvcGVydGllcyIsImluaXRpYWxpemF0aW9uX3RpbWUiLCJEYXRlIiwibm93IiwicmV0cnlfY291bnQiLCJlbnZpcm9ubWVudCIsImlzUHJvZHVjdGlvbiIsIndhcm4iLCJpZGVudGlmeSIsInVzZXJJZCIsInByb3BlcnRpZXMiLCJldmVudE5hbWUiLCJ2YWxpZGF0ZUV2ZW50IiwiZW5yaWNoZWRQcm9wZXJ0aWVzIiwiY2FwdHVyZSIsInNldFVzZXJQcm9wZXJ0aWVzIiwicGVvcGxlIiwic2V0IiwicGF0aCIsInBhZ2VVcmwiLCJsb2NhdGlvbiIsImhyZWYiLCIkY3VycmVudF91cmwiLCJwYWdlX3RpdGxlIiwiZG9jdW1lbnQiLCJ0aXRsZSIsInJlZmVycmVyIiwicmVzZXQiLCJncm91cCIsImdyb3VwVHlwZSIsImdyb3VwS2V5IiwiaXNGZWF0dXJlRW5hYmxlZCIsImZsYWciLCJlbmFibGVkIiwiZ2V0RmVhdHVyZUZsYWciLCJ2YWx1ZSIsIm9wdE91dCIsIm9wdF9vdXRfY2FwdHVyaW5nIiwib3B0SW4iLCJvcHRfaW5fY2FwdHVyaW5nIiwiaGFzT3B0ZWRPdXQiLCJoYXNfb3B0ZWRfb3V0X2NhcHR1cmluZyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0EyQ0MsR0FDRCxjQUFjOzs7Ozs7Ozs7Ozs7SUFpdUJEQSxTQUFTO2VBQVRBOztJQXNFYixnREFBZ0Q7SUFDaEQsT0FBeUI7ZUFBekIsU0FFQSwrQkFBK0I7U0FDL0IsaUZBQWlGOzs7SUFqQ3BFQyxZQUFZO2VBQVpBOztJQXJCQUMsVUFBVTtlQUFWQTs7SUF5Q0FDLGFBQWE7ZUFBYkE7OztrRUEvdUJPO3dCQUNHOytCQUNzRDs7Ozs7O0FBaEQ3RSxTQUFTQztJQUNQLElBQUlDLElBQUksT0FBT0MsZUFBZSxZQUFZQSxjQUFjQSxXQUFXQyxJQUFJLEtBQUtBLFFBQVFELGNBQWMsSUFBSUUsU0FBUztJQUMvRyxJQUFJQyxLQUFLSixFQUFFSyxXQUFXLElBQUtMLENBQUFBLEVBQUVLLFdBQVcsR0FBRyxDQUFDLENBQUE7SUFDNUMsSUFBSUQsR0FBR0UsWUFBWSxLQUFLQyxhQUFhUCxFQUFFUSxPQUFPLElBQUlSLEVBQUVRLE9BQU8sQ0FBQ0MsR0FBRyxJQUFJVCxFQUFFUSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MseUJBQXlCLEVBQUU7UUFDMUdOLEdBQUdFLFlBQVksR0FBR04sRUFBRVEsT0FBTyxDQUFDQyxHQUFHLENBQUNDLHlCQUF5QjtJQUMzRDtJQUNBLFNBQVNDO1FBQ1AsT0FBT1A7SUFDVDtJQUNBTCxlQUFlWTtJQUNmLE9BQU9BO0FBQ1Q7QUFDQVo7QUFDQSxTQUFTYTtJQUNQLElBQUlSLEtBQUtMO0lBQ1QsSUFBSWMsTUFBTVQsR0FBR1UsY0FBYyxJQUFLVixDQUFBQSxHQUFHVSxjQUFjLEdBQUc7UUFDbERDLFFBQVEsQ0FBQztRQUNUQyxTQUFTLENBQUM7SUFDWixDQUFBO0lBQ0EsU0FBU0M7UUFDUCxJQUFJQyxJQUFJTCxJQUFJRSxNQUFNO1FBQ2xCLElBQUlYLEdBQUdlLGFBQWEsRUFBRTtZQUNwQkQsSUFBSUwsSUFBSUcsT0FBTyxDQUFDWixHQUFHZSxhQUFhLENBQUMsR0FBR04sSUFBSUcsT0FBTyxDQUFDWixHQUFHZSxhQUFhLENBQUMsSUFBSSxDQUFDO1FBQ3hFO1FBQ0EsSUFBSUMsSUFBSUM7UUFDUixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUYsRUFBRUcsTUFBTSxFQUFFRCxJQUFLO1lBQ2pDSixDQUFDLENBQUNFLENBQUMsQ0FBQ0UsRUFBRSxDQUFDLEdBQUcsQUFBQ0osQ0FBQUEsQ0FBQyxDQUFDRSxDQUFDLENBQUNFLEVBQUUsQ0FBQyxJQUFJLENBQUEsSUFBSztRQUM3QjtJQUNGO0lBQ0FWLGdCQUFnQks7SUFDaEJBLE1BQU1PLEtBQUssQ0FBQyxNQUFNSDtBQUNwQjtBQUNBLFNBQVNJLGlCQUFpQkMsRUFBRTtJQUMxQixJQUFJdEIsS0FBS0w7SUFDVCxTQUFTNEIsU0FBU0QsRUFBRTtRQUNsQixJQUFJdEIsR0FBR0UsWUFBWSxLQUFLb0IsSUFBSTtZQUMxQixJQUFJdEIsR0FBR3dCLFFBQVEsS0FBSyxLQUFLLEtBQUssRUFBRXhCLEdBQUd3QixRQUFRLEdBQUd4QixHQUFHeUIsUUFBUSxFQUFFO2dCQUN6RCxNQUFNLElBQUlDLE1BQU0sdUNBQXVDMUIsR0FBR3dCLFFBQVEsR0FBRztZQUN2RTtZQUNBLE9BQU87UUFDVDtRQUNBLE9BQU87SUFDVDtJQUNBSCxtQkFBbUJFO0lBQ25CLE9BQU9BLFNBQVNEO0FBQ2xCO0FBS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FtQkMsR0FDRCxNQUFNSztJQVFKOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FxQkMsR0FDRCxNQUFNQyxPQUFPO1FBQ1gsSUFBSVAsaUJBQWlCLFVBQVU7WUFDN0IsQ0FBQztRQUNILE9BQU87WUFDTGIsY0FBYztZQUNkLGlEQUFpRDtZQUNqRCxJQUFJYSxpQkFBaUIsV0FBVyxBQUFDLENBQUEsT0FBT1EsV0FBVyxlQUFlLElBQUksQ0FBQ0MsV0FBVyxBQUFELEtBQU0sQ0FBQ0MsY0FBTSxDQUFDQyxVQUFVLEdBQUdYLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQVFiLENBQUFBLGNBQWMsU0FBUyxTQUFTLFVBQVUsQUFBQ2EsQ0FBQUEsaUJBQWlCLFdBQVcsT0FBT1EsV0FBVyxlQUFlLElBQUksQ0FBQ0MsV0FBVyxHQUFHVCxpQkFBaUIsV0FBVyxRQUFTYixDQUFBQSxjQUFjLFNBQVMsVUFBVSxBQUFDYSxDQUFBQSxpQkFBaUIsV0FBVyxPQUFPUSxXQUFXLGNBQWNSLGlCQUFpQixXQUFXLFFBQVNiLENBQUFBLGNBQWMsU0FBUyxVQUFVLE9BQU9xQixXQUFZUixDQUFBQSxpQkFBaUIsV0FBVyxLQUFNYixDQUFBQSxjQUFjLFVBQVUsV0FBVSxDQUFDLENBQUMsQ0FBQyxLQUFNLElBQUksQ0FBQ3NCLFdBQVcsQUFBRCxDQUFDLEtBQU9ULENBQUFBLGlCQUFpQixXQUFXVSxjQUFNLENBQUNDLFVBQVUsR0FBSXhCLENBQUFBLGNBQWMsVUFBVSxDQUFDdUIsY0FBTSxDQUFDQyxVQUFVLEFBQUQsQ0FBQyxDQUFDLEdBQUk7Z0JBQzdzQixJQUFJWCxpQkFBaUIsVUFBVTtvQkFDN0IsQ0FBQztnQkFDSCxPQUFPO29CQUNMYixjQUFjO29CQUNkO2dCQUNGO1lBQ0Y7WUFDQSxJQUFJO2dCQUNGLElBQUlhLGlCQUFpQixVQUFVO29CQUM3QixDQUFDO2dCQUNILE9BQU87b0JBQ0xiLGNBQWM7b0JBQ2Qsa0VBQWtFO29CQUNsRSxNQUFNeUIsZ0JBQWdCQyxJQUFBQSxrQ0FBbUI7b0JBQ3pDQyxRQUFRQyxHQUFHLENBQUNmLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSw2Q0FBNEMsR0FBSWEsaUJBQWlCLFdBQVcsQ0FBQyxJQUFLYixDQUFBQSxjQUFjLFVBQVU7d0JBQzlLNkIsS0FBSyxBQUFDaEIsQ0FBQUEsaUJBQWlCLFdBQVdVLGNBQU0sQ0FBQ0MsVUFBVSxDQUFDTSxTQUFTLENBQUMsR0FBRyxNQUFNakIsaUJBQWlCLFdBQVdVLGNBQU0sQ0FBQ0MsVUFBVSxHQUFJeEIsQ0FBQUEsY0FBYyxTQUFTLFVBQVV1QixjQUFNLENBQUNDLFVBQVUsRUFBRU0sVUFBVSxHQUFHLEdBQUUsQ0FBQyxJQUFNakIsQ0FBQUEsaUJBQWlCLFdBQVcsS0FBTWIsQ0FBQUEsY0FBYyxVQUFVLEtBQUksQ0FBQzt3QkFDalEsMEJBQTBCO3dCQUMxQitCLE1BQU1OLGNBQWNPLFFBQVE7d0JBQzVCLHNCQUFzQjt3QkFDdEJDLE9BQU9SLGNBQWNRLEtBQUssQ0FBQyxvQkFBb0I7b0JBQ2pELENBQUE7b0JBRUEsNENBQTRDO29CQUM1Q0Msa0JBQU8sQ0FBQ2QsSUFBSSxDQUFDRyxjQUFNLENBQUNDLFVBQVUsRUFBRUM7b0JBRWhDLG1DQUFtQztvQkFDbkMsSUFBSSxDQUFDSCxXQUFXLEdBQUdULGlCQUFpQixXQUFXLFFBQVNiLENBQUFBLGNBQWMsVUFBVSxJQUFHO29CQUNuRixJQUFJLENBQUNtQyxVQUFVLEdBQUcsR0FBRyxzQkFBc0I7b0JBRTNDLGdEQUFnRDtvQkFDaEQsTUFBTSxJQUFJLENBQUNDLGNBQWM7Z0JBQzNCO1lBQ0YsRUFBRSxPQUFPQyxPQUFPO2dCQUNkLElBQUl4QixpQkFBaUIsVUFBVTtvQkFDN0IsQ0FBQztnQkFDSCxPQUFPO29CQUNMYixjQUFjO29CQUNkMkIsUUFBUVUsS0FBSyxDQUFDeEIsaUJBQWlCLFdBQVcsS0FBTWIsQ0FBQUEsY0FBYyxVQUFVLGtDQUFpQyxHQUFJcUM7b0JBRTdHLGlEQUFpRDtvQkFDakQsSUFBSXhCLGlCQUFpQixXQUFXLElBQUksQ0FBQ3NCLFVBQVUsSUFBSSxJQUFJLENBQUNHLFVBQVUsR0FBR3pCLGlCQUFpQixXQUFXLElBQUksQ0FBQ3NCLFVBQVUsSUFBSSxJQUFJLENBQUNHLFVBQVUsR0FBR3pCLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQVFiLENBQUFBLGNBQWMsU0FBUyxTQUFTLFNBQVMsVUFBVSxJQUFJLENBQUNtQyxVQUFVLEdBQUcsSUFBSSxDQUFDRyxVQUFVLEFBQUQsR0FBSTt3QkFDblMsSUFBSXpCLGlCQUFpQixVQUFVOzRCQUM3QixDQUFDO3dCQUNILE9BQU87NEJBQ0xiLGNBQWM7NEJBQ2RhLGlCQUFpQixXQUFXLElBQUksQ0FBQ3NCLFVBQVUsS0FBTW5DLENBQUFBLGNBQWMsVUFBVSxJQUFJLENBQUNtQyxVQUFVLEVBQUM7NEJBQ3pGLE1BQU1JLFVBQVUxQixpQkFBaUIsV0FBVyxPQUFPLElBQUksQ0FBQ3NCLFVBQVUsR0FBSW5DLENBQUFBLGNBQWMsVUFBVSxPQUFPLElBQUksQ0FBQ21DLFVBQVUsQUFBRCxHQUFJLHNCQUFzQjs0QkFDN0lSLFFBQVFDLEdBQUcsQ0FBQ2YsaUJBQWlCLFdBQVcsQ0FBQyxDQUFDLEdBQUliLENBQUFBLGNBQWMsVUFBVSxDQUFDLG1DQUFtQyxFQUFFLElBQUksQ0FBQ21DLFVBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDRyxVQUFVLENBQUMsS0FBSyxFQUFFQyxRQUFRLEtBQUssQ0FBQyxBQUFEOzRCQUNuS0MsV0FBVzNCLGlCQUFpQixXQUFXLElBQU1sQixZQUFhSyxDQUFBQSxjQUFjLFVBQVUsSUFBTSxJQUFJLENBQUNvQixJQUFJLEVBQUMsR0FBSW1CO3dCQUN4RztvQkFDRixPQUFPO3dCQUNMLElBQUkxQixpQkFBaUIsVUFBVTs0QkFDN0IsQ0FBQzt3QkFDSCxPQUFPOzRCQUNMYixjQUFjOzRCQUNkMkIsUUFBUVUsS0FBSyxDQUFDeEIsaUJBQWlCLFdBQVcsS0FBTWIsQ0FBQUEsY0FBYyxVQUFVLDhEQUE2RDt3QkFDdkk7b0JBQ0Y7Z0JBQ0Y7WUFDRjtRQUNGO0lBQ0Y7SUFFQTs7Ozs7Ozs7Ozs7OztHQWFDLEdBQ0QsTUFBY29DLGlCQUFnQztRQUM1QyxJQUFJdkIsaUJBQWlCLFVBQVU7WUFDN0IsQ0FBQztRQUNILE9BQU87WUFDTGIsY0FBYztZQUNkLElBQUlhLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQU9BLGlCQUFpQixXQUFXLElBQUksQ0FBQ1MsV0FBVyxHQUFJdEIsQ0FBQUEsY0FBYyxTQUFTLFNBQVMsVUFBVSxDQUFDLElBQUksQ0FBQ3NCLFdBQVcsQUFBRCxHQUFJO1lBQ3pMLElBQUk7Z0JBQ0YsSUFBSVQsaUJBQWlCLFVBQVU7b0JBQzdCLENBQUM7Z0JBQ0gsT0FBTztvQkFDTGIsY0FBYztvQkFDZCxxREFBcUQ7b0JBQ3JELElBQUksQ0FBQ3lDLEtBQUssQ0FBQzVCLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSwrQkFBOEIsR0FBSWEsaUJBQWlCLFdBQVcsQ0FBQyxJQUFLYixDQUFBQSxjQUFjLFVBQVU7d0JBQy9KLEdBQUcwQyxJQUFBQSx1Q0FBd0IsR0FBRTt3QkFDN0IsNEJBQTRCO3dCQUM1QkMscUJBQXFCQyxLQUFLQyxHQUFHO3dCQUM3QixxQ0FBcUM7d0JBQ3JDQyxhQUFhLElBQUksQ0FBQ1gsVUFBVTt3QkFDNUIsa0NBQWtDO3dCQUNsQ1ksYUFBYXhCLGNBQU0sQ0FBQ3lCLFlBQVksR0FBR25DLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSxZQUFXLElBQUthLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSxhQUFZO29CQUNyTCxDQUFBO29CQUNBMkIsUUFBUUMsR0FBRyxDQUFDZixpQkFBaUIsV0FBVyxLQUFNYixDQUFBQSxjQUFjLFVBQVUsd0RBQXVEO2dCQUMvSDtZQUNGLEVBQUUsT0FBT3FDLE9BQU87Z0JBQ2QsSUFBSXhCLGlCQUFpQixVQUFVO29CQUM3QixDQUFDO2dCQUNILE9BQU87b0JBQ0xiLGNBQWM7b0JBQ2QyQixRQUFRc0IsSUFBSSxDQUFDcEMsaUJBQWlCLFdBQVcsS0FBTWIsQ0FBQUEsY0FBYyxVQUFVLG1DQUFrQyxHQUFJcUM7Z0JBQy9HO1lBQ0Y7UUFDRjtJQUNGO0lBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F5QkMsR0FDRGEsU0FBU0MsTUFBYyxFQUFFQyxVQUFnQyxFQUFFO1FBQ3pELElBQUl2QyxpQkFBaUIsVUFBVTtZQUM3QixDQUFDO1FBQ0gsT0FBTztZQUNMYixjQUFjO1lBQ2QsSUFBSWEsaUJBQWlCLFdBQVcsUUFBUUEsaUJBQWlCLFdBQVcsT0FBUWIsQ0FBQUEsY0FBYyxTQUFTLFVBQVUsSUFBSSxDQUFDc0IsV0FBVyxBQUFELEdBQUk7Z0JBQzlILElBQUlULGlCQUFpQixVQUFVO29CQUM3QixDQUFDO2dCQUNILE9BQU87b0JBQ0xiLGNBQWM7b0JBQ2QyQixRQUFRQyxHQUFHLENBQUNmLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSw2QkFBNEIsR0FBSW1ELFFBQVFDO29CQUM5R2xCLGtCQUFPLENBQUNnQixRQUFRLENBQUNDLFFBQVFDO2dCQUMzQjtZQUNGO1FBQ0Y7SUFDRjtJQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWdDQyxHQUNEWCxNQUFNWSxTQUFpQixFQUFFRCxVQUFnQyxFQUFFO1FBQ3pELElBQUl2QyxpQkFBaUIsVUFBVTtZQUM3QixDQUFDO1FBQ0gsT0FBTztZQUNMYixjQUFjO1lBQ2QsOENBQThDO1lBQzlDLElBQUlhLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQU9BLGlCQUFpQixXQUFXLElBQUksQ0FBQ1MsV0FBVyxHQUFJdEIsQ0FBQUEsY0FBYyxTQUFTLFNBQVMsVUFBVSxDQUFDLElBQUksQ0FBQ3NCLFdBQVcsQUFBRCxHQUFJO2dCQUN2TCxJQUFJVCxpQkFBaUIsVUFBVTtvQkFDN0IsQ0FBQztnQkFDSCxPQUFPO29CQUNMYixjQUFjO29CQUNkMkIsUUFBUXNCLElBQUksQ0FBQ3BDLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSxvREFBbUQsR0FBSXFEO29CQUM5SCxzREFBc0Q7b0JBQ3REO2dCQUNGO1lBQ0Y7WUFFQSxvREFBb0Q7WUFDcEQsSUFBSXhDLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQU9BLGlCQUFpQixXQUFXeUMsSUFBQUEsNEJBQWEsRUFBQ0QsV0FBV0QsY0FBZXBELENBQUFBLGNBQWMsU0FBUyxTQUFTLFVBQVUsQ0FBQ3NELElBQUFBLDRCQUFhLEVBQUNELFdBQVdELFdBQVUsR0FBSTtnQkFDL04sSUFBSXZDLGlCQUFpQixVQUFVO29CQUM3QixDQUFDO2dCQUNILE9BQU87b0JBQ0xiLGNBQWM7b0JBQ2Q7Z0JBQ0Y7WUFDRjtZQUNBLElBQUk7Z0JBQ0YsSUFBSWEsaUJBQWlCLFVBQVU7b0JBQzdCLENBQUM7Z0JBQ0gsT0FBTztvQkFDTGIsY0FBYztvQkFDZCwrREFBK0Q7b0JBQy9ELE1BQU11RCxxQkFBcUIxQyxpQkFBaUIsV0FBVyxDQUFDLElBQUtiLENBQUFBLGNBQWMsVUFBVTt3QkFDbkYsR0FBRzBDLElBQUFBLHVDQUF3QixHQUFFO3dCQUM3Qiw2Q0FBNkM7d0JBQzdDLEdBQUdVLFdBQVcsNEJBQTRCO29CQUM1QyxDQUFBO29CQUNBekIsUUFBUUMsR0FBRyxDQUFDZixpQkFBaUIsV0FBVyxLQUFNYixDQUFBQSxjQUFjLFVBQVUsMkJBQTBCLEdBQUlxRCxXQUFXRTtvQkFDL0dyQixrQkFBTyxDQUFDc0IsT0FBTyxDQUFDSCxXQUFXRTtnQkFDN0I7WUFDRixFQUFFLE9BQU9sQixPQUFPO2dCQUNkLElBQUl4QixpQkFBaUIsVUFBVTtvQkFDN0IsQ0FBQztnQkFDSCxPQUFPO29CQUNMYixjQUFjO29CQUNkMkIsUUFBUVUsS0FBSyxDQUFDeEIsaUJBQWlCLFdBQVcsS0FBTWIsQ0FBQUEsY0FBYyxVQUFVLGtDQUFpQyxHQUFJcUQsV0FBV2hCO2dCQUN4SCw2Q0FBNkM7Z0JBQy9DO1lBQ0Y7UUFDRjtJQUNGO0lBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F5QkMsR0FDRG9CLGtCQUFrQkwsVUFBK0IsRUFBRTtRQUNqRCxJQUFJdkMsaUJBQWlCLFVBQVU7WUFDN0IsQ0FBQztRQUNILE9BQU87WUFDTGIsY0FBYztZQUNkLElBQUlhLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQVFiLENBQUFBLGNBQWMsU0FBUyxVQUFVLElBQUksQ0FBQ3NCLFdBQVcsQUFBRCxHQUFJO2dCQUM5SCxJQUFJVCxpQkFBaUIsVUFBVTtvQkFDN0IsQ0FBQztnQkFDSCxPQUFPO29CQUNMYixjQUFjO29CQUNkMkIsUUFBUUMsR0FBRyxDQUFDZixpQkFBaUIsV0FBVyxLQUFNYixDQUFBQSxjQUFjLFVBQVUsb0NBQW1DLEdBQUlvRDtvQkFDN0dsQixrQkFBTyxDQUFDd0IsTUFBTSxDQUFDQyxHQUFHLENBQUNQO2dCQUNyQjtZQUNGO1FBQ0Y7SUFDRjtJQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FxQkMsR0FDRGxFLGNBQWMwRSxJQUFhLEVBQUU7UUFDM0IsSUFBSS9DLGlCQUFpQixVQUFVO1lBQzdCLENBQUM7UUFDSCxPQUFPO1lBQ0xiLGNBQWM7WUFDZCxJQUFJYSxpQkFBaUIsV0FBVyxRQUFRQSxpQkFBaUIsV0FBVyxPQUFRYixDQUFBQSxjQUFjLFNBQVMsVUFBVSxJQUFJLENBQUNzQixXQUFXLEFBQUQsR0FBSTtnQkFDOUgsSUFBSVQsaUJBQWlCLFVBQVU7b0JBQzdCLENBQUM7Z0JBQ0gsT0FBTztvQkFDTGIsY0FBYztvQkFDZCxNQUFNNkQsVUFBVWhELGlCQUFpQixXQUFXK0MsUUFBUXZDLE9BQU95QyxRQUFRLENBQUNDLElBQUksR0FBR2xELGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQVFiLENBQUFBLGNBQWMsU0FBUyxTQUFTLFVBQVU0RCxRQUFRdkMsT0FBT3lDLFFBQVEsQ0FBQ0MsSUFBSSxBQUFEO29CQUN4TnBDLFFBQVFDLEdBQUcsQ0FBQ2YsaUJBQWlCLFdBQVcsS0FBTWIsQ0FBQUEsY0FBYyxVQUFVLCtCQUE4QixHQUFJNkQ7b0JBQ3hHM0Isa0JBQU8sQ0FBQ3NCLE9BQU8sQ0FBQzNDLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSxXQUFVLEdBQUlhLGlCQUFpQixXQUFXLENBQUMsSUFBS2IsQ0FBQUEsY0FBYyxVQUFVO3dCQUNoSmdFLGNBQWNIO3dCQUNkLG1DQUFtQzt3QkFDbkNJLFlBQVlDLFNBQVNDLEtBQUs7d0JBQzFCLGtDQUFrQzt3QkFDbENDLFVBQVVGLFNBQVNFLFFBQVEsQ0FBQyxpQ0FBaUM7b0JBQy9ELENBQUE7Z0JBQ0Y7WUFDRjtRQUNGO0lBQ0Y7SUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F1QkMsR0FDREMsUUFBUTtRQUNOLElBQUl4RCxpQkFBaUIsVUFBVTtZQUM3QixDQUFDO1FBQ0gsT0FBTztZQUNMYixjQUFjO1lBQ2QsSUFBSWEsaUJBQWlCLFdBQVcsUUFBUUEsaUJBQWlCLFdBQVcsT0FBUWIsQ0FBQUEsY0FBYyxTQUFTLFVBQVUsSUFBSSxDQUFDc0IsV0FBVyxBQUFELEdBQUk7Z0JBQzlILElBQUlULGlCQUFpQixVQUFVO29CQUM3QixDQUFDO2dCQUNILE9BQU87b0JBQ0xiLGNBQWM7b0JBQ2QyQixRQUFRQyxHQUFHLENBQUNmLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSxrQ0FBaUM7b0JBQ3ZHa0Msa0JBQU8sQ0FBQ21DLEtBQUs7Z0JBQ2Y7WUFDRjtRQUNGO0lBQ0Y7SUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0EwQkMsR0FDREMsTUFBTUMsU0FBaUIsRUFBRUMsUUFBZ0IsRUFBRXBCLFVBQWdDLEVBQUU7UUFDM0UsSUFBSXZDLGlCQUFpQixVQUFVO1lBQzdCLENBQUM7UUFDSCxPQUFPO1lBQ0xiLGNBQWM7WUFDZCxJQUFJYSxpQkFBaUIsV0FBVyxRQUFRQSxpQkFBaUIsV0FBVyxPQUFRYixDQUFBQSxjQUFjLFNBQVMsVUFBVSxJQUFJLENBQUNzQixXQUFXLEFBQUQsR0FBSTtnQkFDOUgsSUFBSVQsaUJBQWlCLFVBQVU7b0JBQzdCLENBQUM7Z0JBQ0gsT0FBTztvQkFDTGIsY0FBYztvQkFDZDJCLFFBQVFDLEdBQUcsQ0FBQ2YsaUJBQWlCLFdBQVcsS0FBTWIsQ0FBQUEsY0FBYyxVQUFVLDBCQUF5QixHQUFJdUUsV0FBV0MsVUFBVXBCO29CQUN4SGxCLGtCQUFPLENBQUNvQyxLQUFLLENBQUNDLFdBQVdDLFVBQVVwQjtnQkFDckM7WUFDRjtRQUNGO0lBQ0Y7SUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXlCQyxHQUNEcUIsaUJBQWlCQyxJQUFZLEVBQVc7UUFDdEMsSUFBSTdELGlCQUFpQixVQUFVO1lBQzdCLENBQUM7UUFDSCxPQUFPO1lBQ0xiLGNBQWM7WUFDZCxJQUFJYSxpQkFBaUIsV0FBVyxRQUFRQSxpQkFBaUIsV0FBVyxPQUFRYixDQUFBQSxjQUFjLFNBQVMsVUFBVSxJQUFJLENBQUNzQixXQUFXLEFBQUQsR0FBSTtnQkFDOUgsSUFBSVQsaUJBQWlCLFVBQVU7b0JBQzdCLENBQUM7Z0JBQ0gsT0FBTztvQkFDTGIsY0FBYztvQkFDZCxNQUFNMkUsVUFBVTlELGlCQUFpQixXQUFXcUIsa0JBQU8sQ0FBQ3VDLGdCQUFnQixDQUFDQyxVQUFVLE9BQU83RCxpQkFBaUIsV0FBVyxRQUFRQSxpQkFBaUIsV0FBVyxPQUFRYixDQUFBQSxjQUFjLFNBQVMsU0FBUyxVQUFVa0Msa0JBQU8sQ0FBQ3VDLGdCQUFnQixDQUFDQyxVQUFXN0QsQ0FBQUEsaUJBQWlCLFdBQVcsUUFBU2IsQ0FBQUEsY0FBYyxVQUFVLElBQUcsQ0FBQyxDQUFDO29CQUM5UzJCLFFBQVFDLEdBQUcsQ0FBQ2YsaUJBQWlCLFdBQVcsQ0FBQyxDQUFDLEdBQUliLENBQUFBLGNBQWMsVUFBVSxDQUFDLHdCQUF3QixFQUFFMEUsS0FBSyxFQUFFLENBQUMsQUFBRCxHQUFJQztvQkFDNUcsT0FBT0E7Z0JBQ1Q7WUFDRjtZQUNBLE9BQU85RCxpQkFBaUIsV0FBVyxPQUFRYixDQUFBQSxjQUFjLFVBQVUsS0FBSSxHQUFJLGlEQUFpRDtRQUM5SDtJQUNGO0lBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTJCQyxHQUNENEUsZUFBZUYsSUFBWSxFQUFnQztRQUN6RCxJQUFJN0QsaUJBQWlCLFVBQVU7WUFDN0IsQ0FBQztRQUNILE9BQU87WUFDTGIsY0FBYztZQUNkLElBQUlhLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQVFiLENBQUFBLGNBQWMsU0FBUyxVQUFVLElBQUksQ0FBQ3NCLFdBQVcsQUFBRCxHQUFJO2dCQUM5SCxJQUFJVCxpQkFBaUIsVUFBVTtvQkFDN0IsQ0FBQztnQkFDSCxPQUFPO29CQUNMYixjQUFjO29CQUNkLE1BQU02RSxRQUFRM0Msa0JBQU8sQ0FBQzBDLGNBQWMsQ0FBQ0Y7b0JBQ3JDL0MsUUFBUUMsR0FBRyxDQUFDZixpQkFBaUIsV0FBVyxDQUFDLENBQUMsR0FBSWIsQ0FBQUEsY0FBYyxVQUFVLENBQUMsd0JBQXdCLEVBQUUwRSxLQUFLLFFBQVEsQ0FBQyxBQUFELEdBQUlHO29CQUNsSCxPQUFPQTtnQkFDVDtZQUNGO1lBQ0EsT0FBT2xGO1FBQ1Q7SUFDRjtJQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXVCQyxHQUNEbUYsU0FBUztRQUNQLElBQUlqRSxpQkFBaUIsVUFBVTtZQUM3QixDQUFDO1FBQ0gsT0FBTztZQUNMYixjQUFjO1lBQ2QsSUFBSWEsaUJBQWlCLFdBQVcsUUFBUUEsaUJBQWlCLFdBQVcsT0FBUWIsQ0FBQUEsY0FBYyxTQUFTLFVBQVUsSUFBSSxDQUFDc0IsV0FBVyxBQUFELEdBQUk7Z0JBQzlILElBQUlULGlCQUFpQixVQUFVO29CQUM3QixDQUFDO2dCQUNILE9BQU87b0JBQ0xiLGNBQWM7b0JBQ2QyQixRQUFRQyxHQUFHLENBQUNmLGlCQUFpQixXQUFXLEtBQU1iLENBQUFBLGNBQWMsVUFBVSxnREFBK0M7b0JBQ3JIa0Msa0JBQU8sQ0FBQzZDLGlCQUFpQjtnQkFDM0I7WUFDRjtRQUNGO0lBQ0Y7SUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBa0JDLEdBQ0RDLFFBQVE7UUFDTixJQUFJbkUsaUJBQWlCLFVBQVU7WUFDN0IsQ0FBQztRQUNILE9BQU87WUFDTGIsY0FBYztZQUNkLElBQUlhLGlCQUFpQixXQUFXLFFBQVFBLGlCQUFpQixXQUFXLE9BQVFiLENBQUFBLGNBQWMsU0FBUyxVQUFVLElBQUksQ0FBQ3NCLFdBQVcsQUFBRCxHQUFJO2dCQUM5SCxJQUFJVCxpQkFBaUIsVUFBVTtvQkFDN0IsQ0FBQztnQkFDSCxPQUFPO29CQUNMYixjQUFjO29CQUNkMkIsUUFBUUMsR0FBRyxDQUFDZixpQkFBaUIsV0FBVyxLQUFNYixDQUFBQSxjQUFjLFVBQVUsOENBQTZDO29CQUNuSGtDLGtCQUFPLENBQUMrQyxnQkFBZ0I7Z0JBQzFCO1lBQ0Y7UUFDRjtJQUNGO0lBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBaUJDLEdBQ0RDLGNBQXVCO1FBQ3JCLElBQUlyRSxpQkFBaUIsVUFBVTtZQUM3QixDQUFDO1FBQ0gsT0FBTztZQUNMYixjQUFjO1lBQ2QsSUFBSWEsaUJBQWlCLFdBQVcsUUFBUUEsaUJBQWlCLFdBQVcsT0FBUWIsQ0FBQUEsY0FBYyxTQUFTLFVBQVUsSUFBSSxDQUFDc0IsV0FBVyxBQUFELEdBQUk7Z0JBQzlILElBQUlULGlCQUFpQixVQUFVO29CQUM3QixDQUFDO2dCQUNILE9BQU87b0JBQ0xiLGNBQWM7b0JBQ2QsT0FBT2tDLGtCQUFPLENBQUNpRCx1QkFBdUI7Z0JBQ3hDO1lBQ0Y7WUFDQSxPQUFPdEUsaUJBQWlCLFdBQVcsT0FBUWIsQ0FBQUEsY0FBYyxVQUFVLEtBQUksR0FBSSxpREFBaUQ7UUFDOUg7SUFDRjs7UUEzb0JBOztHQUVDLFFBQ09zQixjQUFjVCxpQkFBaUIsV0FBVyxPQUFRYixDQUFBQSxjQUFjLFVBQVUsS0FBSSxFQUFJLGtDQUFrQzs7YUFDcEhtQyxhQUFhLEVBQUcsZ0NBQWdDOzthQUNoREcsYUFBYSxFQUFHLHdDQUF3Qzs7O0FBdW9CbEU7QUFhTyxNQUFNdkQsWUFBWSxJQUFJb0M7QUFvQnRCLE1BQU1sQyxhQUFhLENBQUNvRSxXQUFtQkQ7SUFDNUMsSUFBSXZDLGlCQUFpQixVQUFVO1FBQzdCLENBQUM7SUFDSCxPQUFPO1FBQ0xiLGNBQWM7UUFDZGpCLFVBQVUwRCxLQUFLLENBQUNZLFdBQVdEO0lBQzdCO0FBQ0Y7QUFjTyxNQUFNcEUsZUFBZSxDQUFDbUUsUUFBZ0JDO0lBQzNDLElBQUl2QyxpQkFBaUIsVUFBVTtRQUM3QixDQUFDO0lBQ0gsT0FBTztRQUNMYixjQUFjO1FBQ2RqQixVQUFVbUUsUUFBUSxDQUFDQyxRQUFRQztJQUM3QjtBQUNGO0FBYU8sTUFBTWxFLGdCQUFnQixDQUFDMEU7SUFDNUIsSUFBSS9DLGlCQUFpQixVQUFVO1FBQzdCLENBQUM7SUFDSCxPQUFPO1FBQ0xiLGNBQWM7UUFDZGpCLFVBQVVHLGFBQWEsQ0FBQzBFO0lBQzFCO0FBQ0Y7TUFHQSxXQUFlN0UifQ==