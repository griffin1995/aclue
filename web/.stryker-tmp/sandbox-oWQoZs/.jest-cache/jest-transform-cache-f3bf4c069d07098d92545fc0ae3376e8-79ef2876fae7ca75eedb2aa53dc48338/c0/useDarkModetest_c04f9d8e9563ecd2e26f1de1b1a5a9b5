e733cf59061f8e894e8c5319eedcdbef
// @ts-nocheck
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _useDarkMode = require("../useDarkMode");
// Mock localStorage
const mockLocalStorage = {
    getItem: jest.fn(),
    setItem: jest.fn(),
    removeItem: jest.fn(),
    clear: jest.fn()
};
Object.defineProperty(window, "localStorage", {
    value: mockLocalStorage
});
// Mock matchMedia
const mockMatchMedia = jest.fn();
Object.defineProperty(window, "matchMedia", {
    writable: true,
    value: mockMatchMedia
});
// Mock document.documentElement
const mockDocumentElement = {
    classList: {
        add: jest.fn(),
        remove: jest.fn()
    }
};
Object.defineProperty(document, "documentElement", {
    value: mockDocumentElement
});
describe("useDarkMode", ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        mockLocalStorage.getItem.mockReturnValue(null);
        // Default matchMedia mock
        mockMatchMedia.mockImplementation((query)=>({
                matches: false,
                media: query,
                addEventListener: jest.fn(),
                removeEventListener: jest.fn(),
                onchange: null,
                addListener: jest.fn(),
                removeListener: jest.fn(),
                dispatchEvent: jest.fn()
            }));
    });
    describe("Initial State", ()=>{
        it("initializes with system theme by default", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.theme).toBe("system");
            expect(result.current.isDark).toBe(false);
        });
        it("loads saved theme from localStorage", ()=>{
            mockLocalStorage.getItem.mockReturnValue("dark");
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.theme).toBe("dark");
            expect(result.current.isDark).toBe(true);
        });
        it("ignores invalid theme values from localStorage", ()=>{
            mockLocalStorage.getItem.mockReturnValue("invalid-theme");
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.theme).toBe("system");
        });
    });
    describe("Theme Setting", ()=>{
        it("sets light theme correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            (0, _react.act)(()=>{
                result.current.setTheme("light");
            });
            expect(result.current.theme).toBe("light");
            expect(result.current.isDark).toBe(false);
            expect(mockLocalStorage.setItem).toHaveBeenCalledWith("aclue_theme", "light");
            expect(mockDocumentElement.classList.remove).toHaveBeenCalledWith("dark");
        });
        it("sets dark theme correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            (0, _react.act)(()=>{
                result.current.setTheme("dark");
            });
            expect(result.current.theme).toBe("dark");
            expect(result.current.isDark).toBe(true);
            expect(mockLocalStorage.setItem).toHaveBeenCalledWith("aclue_theme", "dark");
            expect(mockDocumentElement.classList.add).toHaveBeenCalledWith("dark");
        });
        it("sets system theme correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            (0, _react.act)(()=>{
                result.current.setTheme("system");
            });
            expect(result.current.theme).toBe("system");
            expect(mockLocalStorage.setItem).toHaveBeenCalledWith("aclue_theme", "system");
        });
    });
    describe("System Theme Detection", ()=>{
        it("detects dark system preference", ()=>{
            mockMatchMedia.mockImplementation((query)=>({
                    matches: query === "(prefers-color-scheme: dark)",
                    media: query,
                    addEventListener: jest.fn(),
                    removeEventListener: jest.fn(),
                    onchange: null,
                    addListener: jest.fn(),
                    removeListener: jest.fn(),
                    dispatchEvent: jest.fn()
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.isDark).toBe(true);
            expect(mockDocumentElement.classList.add).toHaveBeenCalledWith("dark");
        });
        it("detects light system preference", ()=>{
            mockMatchMedia.mockImplementation((query)=>({
                    matches: false,
                    media: query,
                    addEventListener: jest.fn(),
                    removeEventListener: jest.fn(),
                    onchange: null,
                    addListener: jest.fn(),
                    removeListener: jest.fn(),
                    dispatchEvent: jest.fn()
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.isDark).toBe(false);
            expect(mockDocumentElement.classList.remove).toHaveBeenCalledWith("dark");
        });
        it("listens for system theme changes", ()=>{
            const mockAddEventListener = jest.fn();
            const mockRemoveEventListener = jest.fn();
            mockMatchMedia.mockImplementation(()=>({
                    matches: false,
                    media: "(prefers-color-scheme: dark)",
                    addEventListener: mockAddEventListener,
                    removeEventListener: mockRemoveEventListener,
                    onchange: null,
                    addListener: jest.fn(),
                    removeListener: jest.fn(),
                    dispatchEvent: jest.fn()
                }));
            const { unmount } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(mockAddEventListener).toHaveBeenCalledWith("change", expect.any(Function));
            unmount();
            expect(mockRemoveEventListener).toHaveBeenCalledWith("change", expect.any(Function));
        });
        it("updates theme when system preference changes", ()=>{
            let changeHandler;
            mockMatchMedia.mockImplementation(()=>({
                    matches: false,
                    media: "(prefers-color-scheme: dark)",
                    addEventListener: jest.fn((event, handler)=>{
                        if (event === "change") {
                            changeHandler = handler;
                        }
                    }),
                    removeEventListener: jest.fn(),
                    onchange: null,
                    addListener: jest.fn(),
                    removeListener: jest.fn(),
                    dispatchEvent: jest.fn()
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.isDark).toBe(false);
            // Simulate system theme change to dark
            (0, _react.act)(()=>{
                if (changeHandler) {
                    changeHandler({
                        matches: true
                    });
                }
            });
            expect(result.current.isDark).toBe(true);
        });
        it("ignores system changes when not on system theme", ()=>{
            let changeHandler;
            mockMatchMedia.mockImplementation(()=>({
                    matches: false,
                    media: "(prefers-color-scheme: dark)",
                    addEventListener: jest.fn((event, handler)=>{
                        if (event === "change") {
                            changeHandler = handler;
                        }
                    }),
                    removeEventListener: jest.fn(),
                    onchange: null,
                    addListener: jest.fn(),
                    removeListener: jest.fn(),
                    dispatchEvent: jest.fn()
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            // Set to manual dark mode
            (0, _react.act)(()=>{
                result.current.setTheme("dark");
            });
            expect(result.current.isDark).toBe(true);
            // Simulate system theme change - should be ignored
            (0, _react.act)(()=>{
                if (changeHandler) {
                    changeHandler({
                        matches: false
                    });
                }
            });
            expect(result.current.isDark).toBe(true); // Should remain dark
        });
    });
    describe("Theme Toggle", ()=>{
        it("toggles from light to dark", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            (0, _react.act)(()=>{
                result.current.setTheme("light");
            });
            (0, _react.act)(()=>{
                result.current.toggleTheme();
            });
            expect(result.current.theme).toBe("dark");
            expect(result.current.isDark).toBe(true);
        });
        it("toggles from dark to light", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            (0, _react.act)(()=>{
                result.current.setTheme("dark");
            });
            (0, _react.act)(()=>{
                result.current.toggleTheme();
            });
            expect(result.current.theme).toBe("light");
            expect(result.current.isDark).toBe(false);
        });
        it("toggles from system to opposite of current state", ()=>{
            // Mock system as light
            mockMatchMedia.mockImplementation((query)=>({
                    matches: false,
                    media: query,
                    addEventListener: jest.fn(),
                    removeEventListener: jest.fn(),
                    onchange: null,
                    addListener: jest.fn(),
                    removeListener: jest.fn(),
                    dispatchEvent: jest.fn()
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.theme).toBe("system");
            expect(result.current.isDark).toBe(false);
            (0, _react.act)(()=>{
                result.current.toggleTheme();
            });
            expect(result.current.theme).toBe("dark");
            expect(result.current.isDark).toBe(true);
        });
        it("toggles from system dark to light", ()=>{
            // Mock system as dark
            mockMatchMedia.mockImplementation((query)=>({
                    matches: query === "(prefers-color-scheme: dark)",
                    media: query,
                    addEventListener: jest.fn(),
                    removeEventListener: jest.fn(),
                    onchange: null,
                    addListener: jest.fn(),
                    removeListener: jest.fn(),
                    dispatchEvent: jest.fn()
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            expect(result.current.theme).toBe("system");
            expect(result.current.isDark).toBe(true);
            (0, _react.act)(()=>{
                result.current.toggleTheme();
            });
            expect(result.current.theme).toBe("light");
            expect(result.current.isDark).toBe(false);
        });
    });
    describe("DOM Updates", ()=>{
        it("adds dark class when dark mode is enabled", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            (0, _react.act)(()=>{
                result.current.setTheme("dark");
            });
            expect(mockDocumentElement.classList.add).toHaveBeenCalledWith("dark");
        });
        it("removes dark class when dark mode is disabled", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            (0, _react.act)(()=>{
                result.current.setTheme("light");
            });
            expect(mockDocumentElement.classList.remove).toHaveBeenCalledWith("dark");
        });
    });
    describe("Server-Side Rendering", ()=>{
        it("handles missing window object gracefully", ()=>{
            const originalWindow = global.window;
            // 
            delete global.window;
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useDarkMode.useDarkMode)());
            }).not.toThrow();
            global.window = originalWindow;
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2phY2svRG9jdW1lbnRzL2FjbHVlLXByZXByb2Qvd2ViLy5zdHJ5a2VyLXRtcC9zYW5kYm94LW9XUW9acy9zcmMvaG9va3MvX190ZXN0c19fL3VzZURhcmtNb2RlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgdXNlRGFya01vZGUgfSBmcm9tICcuLi91c2VEYXJrTW9kZSc7XG5cbi8vIE1vY2sgbG9jYWxTdG9yYWdlXG5jb25zdCBtb2NrTG9jYWxTdG9yYWdlID0ge1xuICBnZXRJdGVtOiBqZXN0LmZuKCksXG4gIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICBjbGVhcjogamVzdC5mbigpLFxufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XG4gIHZhbHVlOiBtb2NrTG9jYWxTdG9yYWdlLFxufSk7XG5cbi8vIE1vY2sgbWF0Y2hNZWRpYVxuY29uc3QgbW9ja01hdGNoTWVkaWEgPSBqZXN0LmZuKCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbWF0Y2hNZWRpYScsIHtcbiAgd3JpdGFibGU6IHRydWUsXG4gIHZhbHVlOiBtb2NrTWF0Y2hNZWRpYSxcbn0pO1xuXG4vLyBNb2NrIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuY29uc3QgbW9ja0RvY3VtZW50RWxlbWVudCA9IHtcbiAgY2xhc3NMaXN0OiB7XG4gICAgYWRkOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlOiBqZXN0LmZuKCksXG4gIH0sXG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCAnZG9jdW1lbnRFbGVtZW50Jywge1xuICB2YWx1ZTogbW9ja0RvY3VtZW50RWxlbWVudCxcbn0pO1xuXG5kZXNjcmliZSgndXNlRGFya01vZGUnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIG1vY2tMb2NhbFN0b3JhZ2UuZ2V0SXRlbS5tb2NrUmV0dXJuVmFsdWUobnVsbCk7XG4gICAgXG4gICAgLy8gRGVmYXVsdCBtYXRjaE1lZGlhIG1vY2tcbiAgICBtb2NrTWF0Y2hNZWRpYS5tb2NrSW1wbGVtZW50YXRpb24oKHF1ZXJ5KSA9PiAoe1xuICAgICAgbWF0Y2hlczogZmFsc2UsXG4gICAgICBtZWRpYTogcXVlcnksXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICBvbmNoYW5nZTogbnVsbCxcbiAgICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICByZW1vdmVMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgZGlzcGF0Y2hFdmVudDogamVzdC5mbigpLFxuICAgIH0pKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0luaXRpYWwgU3RhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ2luaXRpYWxpemVzIHdpdGggc3lzdGVtIHRoZW1lIGJ5IGRlZmF1bHQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdzeXN0ZW0nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0RhcmspLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2xvYWRzIHNhdmVkIHRoZW1lIGZyb20gbG9jYWxTdG9yYWdlJywgKCkgPT4ge1xuICAgICAgbW9ja0xvY2FsU3RvcmFnZS5nZXRJdGVtLm1vY2tSZXR1cm5WYWx1ZSgnZGFyaycpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdkYXJrJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNEYXJrKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2lnbm9yZXMgaW52YWxpZCB0aGVtZSB2YWx1ZXMgZnJvbSBsb2NhbFN0b3JhZ2UnLCAoKSA9PiB7XG4gICAgICBtb2NrTG9jYWxTdG9yYWdlLmdldEl0ZW0ubW9ja1JldHVyblZhbHVlKCdpbnZhbGlkLXRoZW1lJyk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudGhlbWUpLnRvQmUoJ3N5c3RlbScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGhlbWUgU2V0dGluZycsICgpID0+IHtcbiAgICBpdCgnc2V0cyBsaWdodCB0aGVtZSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuc2V0VGhlbWUoJ2xpZ2h0Jyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdsaWdodCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QobW9ja0xvY2FsU3RvcmFnZS5zZXRJdGVtKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnYWNsdWVfdGhlbWUnLCAnbGlnaHQnKTtcbiAgICAgIGV4cGVjdChtb2NrRG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdkYXJrJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2V0cyBkYXJrIHRoZW1lIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRUaGVtZSgnZGFyaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC50aGVtZSkudG9CZSgnZGFyaycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrTG9jYWxTdG9yYWdlLnNldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdhY2x1ZV90aGVtZScsICdkYXJrJyk7XG4gICAgICBleHBlY3QobW9ja0RvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZGFyaycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NldHMgc3lzdGVtIHRoZW1lIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRUaGVtZSgnc3lzdGVtJyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdzeXN0ZW0nKTtcbiAgICAgIGV4cGVjdChtb2NrTG9jYWxTdG9yYWdlLnNldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdhY2x1ZV90aGVtZScsICdzeXN0ZW0nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N5c3RlbSBUaGVtZSBEZXRlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ2RldGVjdHMgZGFyayBzeXN0ZW0gcHJlZmVyZW5jZScsICgpID0+IHtcbiAgICAgIG1vY2tNYXRjaE1lZGlhLm1vY2tJbXBsZW1lbnRhdGlvbigocXVlcnkpID0+ICh7XG4gICAgICAgIG1hdGNoZXM6IHF1ZXJ5ID09PSAnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScsXG4gICAgICAgIG1lZGlhOiBxdWVyeSxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICAgIG9uY2hhbmdlOiBudWxsLFxuICAgICAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICByZW1vdmVMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNEYXJrKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tEb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2RhcmsnKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXRlY3RzIGxpZ2h0IHN5c3RlbSBwcmVmZXJlbmNlJywgKCkgPT4ge1xuICAgICAgbW9ja01hdGNoTWVkaWEubW9ja0ltcGxlbWVudGF0aW9uKChxdWVyeSkgPT4gKHtcbiAgICAgICAgbWF0Y2hlczogZmFsc2UsXG4gICAgICAgIG1lZGlhOiBxdWVyeSxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICAgIG9uY2hhbmdlOiBudWxsLFxuICAgICAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICByZW1vdmVMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNEYXJrKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChtb2NrRG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdkYXJrJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnbGlzdGVucyBmb3Igc3lzdGVtIHRoZW1lIGNoYW5nZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQWRkRXZlbnRMaXN0ZW5lciA9IGplc3QuZm4oKTtcbiAgICAgIGNvbnN0IG1vY2tSZW1vdmVFdmVudExpc3RlbmVyID0gamVzdC5mbigpO1xuXG4gICAgICBtb2NrTWF0Y2hNZWRpYS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICAgICAgbWF0Y2hlczogZmFsc2UsXG4gICAgICAgIG1lZGlhOiAnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScsXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IG1vY2tBZGRFdmVudExpc3RlbmVyLFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBtb2NrUmVtb3ZlRXZlbnRMaXN0ZW5lcixcbiAgICAgICAgb25jaGFuZ2U6IG51bGwsXG4gICAgICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICAgIHJlbW92ZUxpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICAgIGRpc3BhdGNoRXZlbnQ6IGplc3QuZm4oKSxcbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBleHBlY3QobW9ja0FkZEV2ZW50TGlzdGVuZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdjaGFuZ2UnLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG5cbiAgICAgIHVubW91bnQoKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZW1vdmVFdmVudExpc3RlbmVyKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnY2hhbmdlJywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3VwZGF0ZXMgdGhlbWUgd2hlbiBzeXN0ZW0gcHJlZmVyZW5jZSBjaGFuZ2VzJywgKCkgPT4ge1xuICAgICAgbGV0IGNoYW5nZUhhbmRsZXI6ICgoZXZlbnQ6IGFueSkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG5cbiAgICAgIG1vY2tNYXRjaE1lZGlhLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgICAgICBtYXRjaGVzOiBmYWxzZSxcbiAgICAgICAgbWVkaWE6ICcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJyxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigoZXZlbnQsIGhhbmRsZXIpID0+IHtcbiAgICAgICAgICBpZiAoZXZlbnQgPT09ICdjaGFuZ2UnKSB7XG4gICAgICAgICAgICBjaGFuZ2VIYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgICAgIG9uY2hhbmdlOiBudWxsLFxuICAgICAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICByZW1vdmVMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNEYXJrKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gU2ltdWxhdGUgc3lzdGVtIHRoZW1lIGNoYW5nZSB0byBkYXJrXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBpZiAoY2hhbmdlSGFuZGxlcikge1xuICAgICAgICAgIGNoYW5nZUhhbmRsZXIoeyBtYXRjaGVzOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdpZ25vcmVzIHN5c3RlbSBjaGFuZ2VzIHdoZW4gbm90IG9uIHN5c3RlbSB0aGVtZScsICgpID0+IHtcbiAgICAgIGxldCBjaGFuZ2VIYW5kbGVyOiAoKGV2ZW50OiBhbnkpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuXG4gICAgICBtb2NrTWF0Y2hNZWRpYS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICAgICAgbWF0Y2hlczogZmFsc2UsXG4gICAgICAgIG1lZGlhOiAnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScsXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKGV2ZW50LCBoYW5kbGVyKSA9PiB7XG4gICAgICAgICAgaWYgKGV2ZW50ID09PSAnY2hhbmdlJykge1xuICAgICAgICAgICAgY2hhbmdlSGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICBvbmNoYW5nZTogbnVsbCxcbiAgICAgICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgZGlzcGF0Y2hFdmVudDogamVzdC5mbigpLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcblxuICAgICAgLy8gU2V0IHRvIG1hbnVhbCBkYXJrIG1vZGVcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnNldFRoZW1lKCdkYXJrJyk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZSh0cnVlKTtcblxuICAgICAgLy8gU2ltdWxhdGUgc3lzdGVtIHRoZW1lIGNoYW5nZSAtIHNob3VsZCBiZSBpZ25vcmVkXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBpZiAoY2hhbmdlSGFuZGxlcikge1xuICAgICAgICAgIGNoYW5nZUhhbmRsZXIoeyBtYXRjaGVzOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0RhcmspLnRvQmUodHJ1ZSk7IC8vIFNob3VsZCByZW1haW4gZGFya1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGhlbWUgVG9nZ2xlJywgKCkgPT4ge1xuICAgIGl0KCd0b2dnbGVzIGZyb20gbGlnaHQgdG8gZGFyaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRUaGVtZSgnbGlnaHQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC50b2dnbGVUaGVtZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC50aGVtZSkudG9CZSgnZGFyaycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCd0b2dnbGVzIGZyb20gZGFyayB0byBsaWdodCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRUaGVtZSgnZGFyaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnRvZ2dsZVRoZW1lKCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdsaWdodCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgndG9nZ2xlcyBmcm9tIHN5c3RlbSB0byBvcHBvc2l0ZSBvZiBjdXJyZW50IHN0YXRlJywgKCkgPT4ge1xuICAgICAgLy8gTW9jayBzeXN0ZW0gYXMgbGlnaHRcbiAgICAgIG1vY2tNYXRjaE1lZGlhLm1vY2tJbXBsZW1lbnRhdGlvbigocXVlcnkpID0+ICh7XG4gICAgICAgIG1hdGNoZXM6IGZhbHNlLFxuICAgICAgICBtZWRpYTogcXVlcnksXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICBvbmNoYW5nZTogbnVsbCxcbiAgICAgICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgZGlzcGF0Y2hFdmVudDogamVzdC5mbigpLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdzeXN0ZW0nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0RhcmspLnRvQmUoZmFsc2UpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC50b2dnbGVUaGVtZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC50aGVtZSkudG9CZSgnZGFyaycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCd0b2dnbGVzIGZyb20gc3lzdGVtIGRhcmsgdG8gbGlnaHQnLCAoKSA9PiB7XG4gICAgICAvLyBNb2NrIHN5c3RlbSBhcyBkYXJrXG4gICAgICBtb2NrTWF0Y2hNZWRpYS5tb2NrSW1wbGVtZW50YXRpb24oKHF1ZXJ5KSA9PiAoe1xuICAgICAgICBtYXRjaGVzOiBxdWVyeSA9PT0gJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyayknLFxuICAgICAgICBtZWRpYTogcXVlcnksXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgICAgICBvbmNoYW5nZTogbnVsbCxcbiAgICAgICAgYWRkTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgcmVtb3ZlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgICAgZGlzcGF0Y2hFdmVudDogamVzdC5mbigpLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdzeXN0ZW0nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0RhcmspLnRvQmUodHJ1ZSk7XG5cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnRvZ2dsZVRoZW1lKCk7XG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdsaWdodCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzRGFyaykudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdET00gVXBkYXRlcycsICgpID0+IHtcbiAgICBpdCgnYWRkcyBkYXJrIGNsYXNzIHdoZW4gZGFyayBtb2RlIGlzIGVuYWJsZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcblxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuc2V0VGhlbWUoJ2RhcmsnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja0RvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZGFyaycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3JlbW92ZXMgZGFyayBjbGFzcyB3aGVuIGRhcmsgbW9kZSBpcyBkaXNhYmxlZCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZURhcmtNb2RlKCkpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRUaGVtZSgnbGlnaHQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja0RvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZGFyaycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2VydmVyLVNpZGUgUmVuZGVyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdoYW5kbGVzIG1pc3Npbmcgd2luZG93IG9iamVjdCBncmFjZWZ1bGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxXaW5kb3cgPSBnbG9iYWwud2luZG93O1xuICAgICAgLy8gXG4gICAgICBkZWxldGUgZ2xvYmFsLndpbmRvdztcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcmVuZGVySG9vaygoKSA9PiB1c2VEYXJrTW9kZSgpKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG5cbiAgICAgIGdsb2JhbC53aW5kb3cgPSBvcmlnaW5hbFdpbmRvdztcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibmFtZXMiOlsibW9ja0xvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJqZXN0IiwiZm4iLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3aW5kb3ciLCJ2YWx1ZSIsIm1vY2tNYXRjaE1lZGlhIiwid3JpdGFibGUiLCJtb2NrRG9jdW1lbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZG9jdW1lbnQiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwibW9ja1JldHVyblZhbHVlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwicXVlcnkiLCJtYXRjaGVzIiwibWVkaWEiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uY2hhbmdlIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJpdCIsInJlc3VsdCIsInJlbmRlckhvb2siLCJ1c2VEYXJrTW9kZSIsImV4cGVjdCIsImN1cnJlbnQiLCJ0aGVtZSIsInRvQmUiLCJpc0RhcmsiLCJhY3QiLCJzZXRUaGVtZSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibW9ja0FkZEV2ZW50TGlzdGVuZXIiLCJtb2NrUmVtb3ZlRXZlbnRMaXN0ZW5lciIsInVubW91bnQiLCJhbnkiLCJGdW5jdGlvbiIsImNoYW5nZUhhbmRsZXIiLCJldmVudCIsImhhbmRsZXIiLCJ0b2dnbGVUaGVtZSIsIm9yaWdpbmFsV2luZG93IiwiZ2xvYmFsIiwibm90IiwidG9UaHJvdyJdLCJtYXBwaW5ncyI6IkFBQUEsY0FBYzs7Ozs7dUJBQ2tCOzZCQUNKO0FBRTVCLG9CQUFvQjtBQUNwQixNQUFNQSxtQkFBbUI7SUFDdkJDLFNBQVNDLEtBQUtDLEVBQUU7SUFDaEJDLFNBQVNGLEtBQUtDLEVBQUU7SUFDaEJFLFlBQVlILEtBQUtDLEVBQUU7SUFDbkJHLE9BQU9KLEtB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