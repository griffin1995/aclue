{"version":3,"sources":["/home/jack/Documents/aclue-preprod/web/.stryker-tmp/sandbox-oWQoZs/src/lib/affiliate.ts"],"sourcesContent":["/**\n * Amazon Affiliate Links Service\n * \n * Production-ready implementation for Amazon Associates UK affiliate link generation,\n * tracking, analytics, and revenue optimization. Implements industry-standard\n * practices for affiliate marketing compliance and performance tracking.\n */\n// @ts-nocheck\nfunction stryNS_9fa48() {\n  var g = typeof globalThis === 'object' && globalThis && globalThis.Math === Math && globalThis || new Function(\"return this\")();\n  var ns = g.__stryker__ || (g.__stryker__ = {});\n  if (ns.activeMutant === undefined && g.process && g.process.env && g.process.env.__STRYKER_ACTIVE_MUTANT__) {\n    ns.activeMutant = g.process.env.__STRYKER_ACTIVE_MUTANT__;\n  }\n  function retrieveNS() {\n    return ns;\n  }\n  stryNS_9fa48 = retrieveNS;\n  return retrieveNS();\n}\nstryNS_9fa48();\nfunction stryCov_9fa48() {\n  var ns = stryNS_9fa48();\n  var cov = ns.mutantCoverage || (ns.mutantCoverage = {\n    static: {},\n    perTest: {}\n  });\n  function cover() {\n    var c = cov.static;\n    if (ns.currentTestId) {\n      c = cov.perTest[ns.currentTestId] = cov.perTest[ns.currentTestId] || {};\n    }\n    var a = arguments;\n    for (var i = 0; i < a.length; i++) {\n      c[a[i]] = (c[a[i]] || 0) + 1;\n    }\n  }\n  stryCov_9fa48 = cover;\n  cover.apply(null, arguments);\n}\nfunction stryMutAct_9fa48(id) {\n  var ns = stryNS_9fa48();\n  function isActive(id) {\n    if (ns.activeMutant === id) {\n      if (ns.hitCount !== void 0 && ++ns.hitCount > ns.hitLimit) {\n        throw new Error('Stryker: Hit count limit reached (' + ns.hitCount + ')');\n      }\n      return true;\n    }\n    return false;\n  }\n  stryMutAct_9fa48 = isActive;\n  return isActive(id);\n}\nimport { amazonConfig, config } from '@/config';\nimport { analytics } from '@/lib/analytics';\nexport interface AffiliateClickEvent {\n  productId?: string;\n  asin?: string;\n  category?: string;\n  price?: number;\n  currency?: string;\n  affiliateUrl: string;\n  originalUrl?: string;\n  source: 'recommendation' | 'search' | 'category' | 'direct';\n  userId?: string;\n  sessionId?: string;\n  timestamp: number;\n  referrer?: string;\n  userAgent?: string;\n}\nexport interface AffiliateConversionEvent {\n  orderId: string;\n  productId?: string;\n  asin?: string;\n  revenue: number;\n  commission: number;\n  currency: string;\n  quantity: number;\n  category?: string;\n  affiliateUrl: string;\n  clickTimestamp: number;\n  conversionTimestamp: number;\n  userId?: string;\n  sessionId?: string;\n}\nexport interface AffiliateProduct {\n  id: string;\n  asin?: string;\n  title: string;\n  description?: string;\n  price?: number;\n  currency?: string;\n  category?: string;\n  imageUrl?: string;\n  originalUrl: string;\n  affiliateUrl?: string;\n  commissionRate?: number;\n  estimatedCommission?: number;\n  brand?: string;\n  availability?: string;\n  rating?: number;\n  reviewCount?: number;\n  features?: string[];\n  lastUpdated: Date;\n}\nexport interface AffiliateLinkOptions {\n  associateTag?: string;\n  ref?: string;\n  campaign?: string;\n  medium?: string;\n  source?: string;\n  term?: string;\n  content?: string;\n  customParameters?: Record<string, string>;\n}\nexport interface AffiliateAnalytics {\n  totalClicks: number;\n  totalConversions: number;\n  totalRevenue: number;\n  totalCommission: number;\n  conversionRate: number;\n  averageOrderValue: number;\n  clicksByCategory: Record<string, number>;\n  revenueByCategory: Record<string, number>;\n  topPerformingProducts: AffiliateProduct[];\n  performanceBySource: Record<string, {\n    clicks: number;\n    conversions: number;\n    revenue: number;\n    conversionRate: number;\n  }>;\n}\n\n/**\n * Comprehensive Amazon Affiliate Links Service\n * Handles link generation, tracking, analytics, and compliance\n */\nexport class AmazonAffiliateService {\n  private static instance: AmazonAffiliateService;\n  private clickEvents: AffiliateClickEvent[] = stryMutAct_9fa48(\"9759\") ? [\"Stryker was here\"] : (stryCov_9fa48(\"9759\"), []);\n  private conversionEvents: AffiliateConversionEvent[] = stryMutAct_9fa48(\"9760\") ? [\"Stryker was here\"] : (stryCov_9fa48(\"9760\"), []);\n  private constructor() {\n    if (stryMutAct_9fa48(\"9761\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9761\");\n      this.initializeTracking();\n    }\n  }\n  static getInstance(): AmazonAffiliateService {\n    if (stryMutAct_9fa48(\"9762\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9762\");\n      if (stryMutAct_9fa48(\"9765\") ? false : stryMutAct_9fa48(\"9764\") ? true : stryMutAct_9fa48(\"9763\") ? AmazonAffiliateService.instance : (stryCov_9fa48(\"9763\", \"9764\", \"9765\"), !AmazonAffiliateService.instance)) {\n        if (stryMutAct_9fa48(\"9766\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9766\");\n          AmazonAffiliateService.instance = new AmazonAffiliateService();\n        }\n      }\n      return AmazonAffiliateService.instance;\n    }\n  }\n\n  /**\n   * Initialize affiliate tracking and analytics\n   */\n  private initializeTracking(): void {\n    if (stryMutAct_9fa48(\"9767\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9767\");\n      if (stryMutAct_9fa48(\"9770\") ? typeof window === 'undefined' : stryMutAct_9fa48(\"9769\") ? false : stryMutAct_9fa48(\"9768\") ? true : (stryCov_9fa48(\"9768\", \"9769\", \"9770\"), typeof window !== (stryMutAct_9fa48(\"9771\") ? \"\" : (stryCov_9fa48(\"9771\"), 'undefined')))) {\n        if (stryMutAct_9fa48(\"9772\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9772\");\n          // Load existing events from localStorage\n          const storedClicks = localStorage.getItem(stryMutAct_9fa48(\"9773\") ? \"\" : (stryCov_9fa48(\"9773\"), 'aclue_affiliate_clicks'));\n          const storedConversions = localStorage.getItem(stryMutAct_9fa48(\"9774\") ? \"\" : (stryCov_9fa48(\"9774\"), 'aclue_affiliate_conversions'));\n          if (stryMutAct_9fa48(\"9776\") ? false : stryMutAct_9fa48(\"9775\") ? true : (stryCov_9fa48(\"9775\", \"9776\"), storedClicks)) {\n            if (stryMutAct_9fa48(\"9777\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9777\");\n              try {\n                if (stryMutAct_9fa48(\"9778\")) {\n                  {}\n                } else {\n                  stryCov_9fa48(\"9778\");\n                  this.clickEvents = JSON.parse(storedClicks);\n                }\n              } catch (error) {\n                if (stryMutAct_9fa48(\"9779\")) {\n                  {}\n                } else {\n                  stryCov_9fa48(\"9779\");\n                  console.error(stryMutAct_9fa48(\"9780\") ? \"\" : (stryCov_9fa48(\"9780\"), 'Error loading affiliate click events:'), error);\n                }\n              }\n            }\n          }\n          if (stryMutAct_9fa48(\"9782\") ? false : stryMutAct_9fa48(\"9781\") ? true : (stryCov_9fa48(\"9781\", \"9782\"), storedConversions)) {\n            if (stryMutAct_9fa48(\"9783\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9783\");\n              try {\n                if (stryMutAct_9fa48(\"9784\")) {\n                  {}\n                } else {\n                  stryCov_9fa48(\"9784\");\n                  this.conversionEvents = JSON.parse(storedConversions);\n                }\n              } catch (error) {\n                if (stryMutAct_9fa48(\"9785\")) {\n                  {}\n                } else {\n                  stryCov_9fa48(\"9785\");\n                  console.error(stryMutAct_9fa48(\"9786\") ? \"\" : (stryCov_9fa48(\"9786\"), 'Error loading affiliate conversion events:'), error);\n                }\n              }\n            }\n          }\n\n          // Clean up old events (older than 30 days)\n          this.cleanupOldEvents();\n\n          // Set up periodic cleanup\n          setInterval(stryMutAct_9fa48(\"9787\") ? () => undefined : (stryCov_9fa48(\"9787\"), () => this.cleanupOldEvents()), stryMutAct_9fa48(\"9788\") ? 24 * 60 * 60 / 1000 : (stryCov_9fa48(\"9788\"), (stryMutAct_9fa48(\"9789\") ? 24 * 60 / 60 : (stryCov_9fa48(\"9789\"), (stryMutAct_9fa48(\"9790\") ? 24 / 60 : (stryCov_9fa48(\"9790\"), 24 * 60)) * 60)) * 1000)); // Daily cleanup\n        }\n      }\n    }\n  }\n\n  /**\n   * Generate affiliate link with comprehensive tracking\n   */\n  generateAffiliateLink(productUrl: string, options: AffiliateLinkOptions = {}): string {\n    if (stryMutAct_9fa48(\"9791\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9791\");\n      try {\n        if (stryMutAct_9fa48(\"9792\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9792\");\n          const url = new URL(productUrl);\n\n          // Ensure we're using the correct Amazon domain\n          if (stryMutAct_9fa48(\"9795\") ? false : stryMutAct_9fa48(\"9794\") ? true : stryMutAct_9fa48(\"9793\") ? this.isValidAmazonUrl(productUrl) : (stryCov_9fa48(\"9793\", \"9794\", \"9795\"), !this.isValidAmazonUrl(productUrl))) {\n            if (stryMutAct_9fa48(\"9796\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9796\");\n              console.warn(stryMutAct_9fa48(\"9797\") ? \"\" : (stryCov_9fa48(\"9797\"), 'Invalid Amazon URL provided:'), productUrl);\n              return productUrl;\n            }\n          }\n\n          // Convert to UK domain if needed\n          if (stryMutAct_9fa48(\"9800\") ? false : stryMutAct_9fa48(\"9799\") ? true : stryMutAct_9fa48(\"9798\") ? url.hostname.includes('amazon.co.uk') : (stryCov_9fa48(\"9798\", \"9799\", \"9800\"), !url.hostname.includes(stryMutAct_9fa48(\"9801\") ? \"\" : (stryCov_9fa48(\"9801\"), 'amazon.co.uk')))) {\n            if (stryMutAct_9fa48(\"9802\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9802\");\n              url.hostname = stryMutAct_9fa48(\"9803\") ? \"\" : (stryCov_9fa48(\"9803\"), 'amazon.co.uk');\n            }\n          }\n\n          // Add associate tag\n          url.searchParams.set(stryMutAct_9fa48(\"9804\") ? \"\" : (stryCov_9fa48(\"9804\"), 'tag'), stryMutAct_9fa48(\"9807\") ? options.associateTag && amazonConfig.uk.associateTag : stryMutAct_9fa48(\"9806\") ? false : stryMutAct_9fa48(\"9805\") ? true : (stryCov_9fa48(\"9805\", \"9806\", \"9807\"), options.associateTag || amazonConfig.uk.associateTag));\n\n          // Add tracking parameters\n          if (stryMutAct_9fa48(\"9809\") ? false : stryMutAct_9fa48(\"9808\") ? true : (stryCov_9fa48(\"9808\", \"9809\"), options.ref)) {\n            if (stryMutAct_9fa48(\"9810\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9810\");\n              url.searchParams.set(stryMutAct_9fa48(\"9811\") ? \"\" : (stryCov_9fa48(\"9811\"), 'ref_'), options.ref);\n            }\n          }\n\n          // UTM parameters for analytics\n          if (stryMutAct_9fa48(\"9813\") ? false : stryMutAct_9fa48(\"9812\") ? true : (stryCov_9fa48(\"9812\", \"9813\"), options.campaign)) {\n            if (stryMutAct_9fa48(\"9814\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9814\");\n              url.searchParams.set(stryMutAct_9fa48(\"9815\") ? \"\" : (stryCov_9fa48(\"9815\"), 'utm_campaign'), options.campaign);\n            }\n          }\n          if (stryMutAct_9fa48(\"9817\") ? false : stryMutAct_9fa48(\"9816\") ? true : (stryCov_9fa48(\"9816\", \"9817\"), options.medium)) {\n            if (stryMutAct_9fa48(\"9818\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9818\");\n              url.searchParams.set(stryMutAct_9fa48(\"9819\") ? \"\" : (stryCov_9fa48(\"9819\"), 'utm_medium'), options.medium);\n            }\n          }\n          if (stryMutAct_9fa48(\"9821\") ? false : stryMutAct_9fa48(\"9820\") ? true : (stryCov_9fa48(\"9820\", \"9821\"), options.source)) {\n            if (stryMutAct_9fa48(\"9822\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9822\");\n              url.searchParams.set(stryMutAct_9fa48(\"9823\") ? \"\" : (stryCov_9fa48(\"9823\"), 'utm_source'), options.source);\n            }\n          }\n          if (stryMutAct_9fa48(\"9825\") ? false : stryMutAct_9fa48(\"9824\") ? true : (stryCov_9fa48(\"9824\", \"9825\"), options.term)) {\n            if (stryMutAct_9fa48(\"9826\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9826\");\n              url.searchParams.set(stryMutAct_9fa48(\"9827\") ? \"\" : (stryCov_9fa48(\"9827\"), 'utm_term'), options.term);\n            }\n          }\n          if (stryMutAct_9fa48(\"9829\") ? false : stryMutAct_9fa48(\"9828\") ? true : (stryCov_9fa48(\"9828\", \"9829\"), options.content)) {\n            if (stryMutAct_9fa48(\"9830\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9830\");\n              url.searchParams.set(stryMutAct_9fa48(\"9831\") ? \"\" : (stryCov_9fa48(\"9831\"), 'utm_content'), options.content);\n            }\n          }\n\n          // Add custom parameters\n          if (stryMutAct_9fa48(\"9833\") ? false : stryMutAct_9fa48(\"9832\") ? true : (stryCov_9fa48(\"9832\", \"9833\"), options.customParameters)) {\n            if (stryMutAct_9fa48(\"9834\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9834\");\n              Object.entries(options.customParameters).forEach(([key, value]) => {\n                if (stryMutAct_9fa48(\"9835\")) {\n                  {}\n                } else {\n                  stryCov_9fa48(\"9835\");\n                  url.searchParams.set(key, value);\n                }\n              });\n            }\n          }\n\n          // Add unique tracking identifier\n          const trackingId = this.generateTrackingId();\n          url.searchParams.set(stryMutAct_9fa48(\"9836\") ? \"\" : (stryCov_9fa48(\"9836\"), 'gs_track'), trackingId);\n\n          // Add timestamp\n          url.searchParams.set(stryMutAct_9fa48(\"9837\") ? \"\" : (stryCov_9fa48(\"9837\"), 'timestamp'), Date.now().toString());\n          return url.toString();\n        }\n      } catch (error) {\n        if (stryMutAct_9fa48(\"9838\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9838\");\n          console.error(stryMutAct_9fa48(\"9839\") ? \"\" : (stryCov_9fa48(\"9839\"), 'Error generating affiliate link:'), error);\n          return productUrl;\n        }\n      }\n    }\n  }\n\n  /**\n   * Generate Amazon search link with affiliate tracking\n   */\n  generateSearchLink(searchTerm: string, category?: string, options: AffiliateLinkOptions = {}): string {\n    if (stryMutAct_9fa48(\"9840\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9840\");\n      const baseUrl = stryMutAct_9fa48(\"9841\") ? \"\" : (stryCov_9fa48(\"9841\"), 'https://amazon.co.uk/s');\n      const url = new URL(baseUrl);\n\n      // Search parameters\n      url.searchParams.set(stryMutAct_9fa48(\"9842\") ? \"\" : (stryCov_9fa48(\"9842\"), 'k'), searchTerm);\n      url.searchParams.set(stryMutAct_9fa48(\"9843\") ? \"\" : (stryCov_9fa48(\"9843\"), 'tag'), stryMutAct_9fa48(\"9846\") ? options.associateTag && amazonConfig.uk.associateTag : stryMutAct_9fa48(\"9845\") ? false : stryMutAct_9fa48(\"9844\") ? true : (stryCov_9fa48(\"9844\", \"9845\", \"9846\"), options.associateTag || amazonConfig.uk.associateTag));\n\n      // Category filter\n      if (stryMutAct_9fa48(\"9849\") ? category || amazonConfig.productCategories[category] : stryMutAct_9fa48(\"9848\") ? false : stryMutAct_9fa48(\"9847\") ? true : (stryCov_9fa48(\"9847\", \"9848\", \"9849\"), category && amazonConfig.productCategories[category])) {\n        if (stryMutAct_9fa48(\"9850\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9850\");\n          url.searchParams.set(stryMutAct_9fa48(\"9851\") ? \"\" : (stryCov_9fa48(\"9851\"), 'i'), amazonConfig.productCategories[category]);\n        }\n      }\n\n      // Tracking parameters\n      if (stryMutAct_9fa48(\"9853\") ? false : stryMutAct_9fa48(\"9852\") ? true : (stryCov_9fa48(\"9852\", \"9853\"), options.ref)) {\n        if (stryMutAct_9fa48(\"9854\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9854\");\n          url.searchParams.set(stryMutAct_9fa48(\"9855\") ? \"\" : (stryCov_9fa48(\"9855\"), 'ref'), options.ref);\n        }\n      }\n\n      // UTM parameters\n      if (stryMutAct_9fa48(\"9857\") ? false : stryMutAct_9fa48(\"9856\") ? true : (stryCov_9fa48(\"9856\", \"9857\"), options.campaign)) url.searchParams.set(stryMutAct_9fa48(\"9858\") ? \"\" : (stryCov_9fa48(\"9858\"), 'utm_campaign'), options.campaign);\n      if (stryMutAct_9fa48(\"9860\") ? false : stryMutAct_9fa48(\"9859\") ? true : (stryCov_9fa48(\"9859\", \"9860\"), options.medium)) url.searchParams.set(stryMutAct_9fa48(\"9861\") ? \"\" : (stryCov_9fa48(\"9861\"), 'utm_medium'), options.medium);\n      if (stryMutAct_9fa48(\"9863\") ? false : stryMutAct_9fa48(\"9862\") ? true : (stryCov_9fa48(\"9862\", \"9863\"), options.source)) url.searchParams.set(stryMutAct_9fa48(\"9864\") ? \"\" : (stryCov_9fa48(\"9864\"), 'utm_source'), options.source);\n\n      // Add tracking identifier\n      const trackingId = this.generateTrackingId();\n      url.searchParams.set(stryMutAct_9fa48(\"9865\") ? \"\" : (stryCov_9fa48(\"9865\"), 'gs_track'), trackingId);\n      return url.toString();\n    }\n  }\n\n  /**\n   * Track affiliate link click with comprehensive analytics\n   */\n  async trackAffiliateClick(event: Omit<AffiliateClickEvent, 'timestamp'>): Promise<void> {\n    if (stryMutAct_9fa48(\"9866\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9866\");\n      const clickEvent: AffiliateClickEvent = stryMutAct_9fa48(\"9867\") ? {} : (stryCov_9fa48(\"9867\"), {\n        ...event,\n        timestamp: Date.now(),\n        userAgent: (stryMutAct_9fa48(\"9870\") ? typeof window === 'undefined' : stryMutAct_9fa48(\"9869\") ? false : stryMutAct_9fa48(\"9868\") ? true : (stryCov_9fa48(\"9868\", \"9869\", \"9870\"), typeof window !== (stryMutAct_9fa48(\"9871\") ? \"\" : (stryCov_9fa48(\"9871\"), 'undefined')))) ? navigator.userAgent : undefined,\n        referrer: (stryMutAct_9fa48(\"9874\") ? typeof window === 'undefined' : stryMutAct_9fa48(\"9873\") ? false : stryMutAct_9fa48(\"9872\") ? true : (stryCov_9fa48(\"9872\", \"9873\", \"9874\"), typeof window !== (stryMutAct_9fa48(\"9875\") ? \"\" : (stryCov_9fa48(\"9875\"), 'undefined')))) ? document.referrer : undefined\n      });\n\n      // Store event locally\n      this.clickEvents.push(clickEvent);\n      this.persistClickEvents();\n\n      // Send to analytics service\n      try {\n        if (stryMutAct_9fa48(\"9876\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9876\");\n          await analytics.track(stryMutAct_9fa48(\"9877\") ? \"\" : (stryCov_9fa48(\"9877\"), 'affiliate_link_clicked'), stryMutAct_9fa48(\"9878\") ? {} : (stryCov_9fa48(\"9878\"), {\n            affiliate_product_id: event.productId,\n            affiliate_asin: event.asin,\n            affiliate_category: event.category,\n            affiliate_price: event.price,\n            affiliate_currency: event.currency,\n            affiliate_source: event.source,\n            affiliate_url: event.affiliateUrl,\n            original_url: event.originalUrl,\n            user_id: event.userId,\n            session_id: event.sessionId\n          }));\n        }\n      } catch (error) {\n        if (stryMutAct_9fa48(\"9879\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9879\");\n          console.error(stryMutAct_9fa48(\"9880\") ? \"\" : (stryCov_9fa48(\"9880\"), 'Error sending affiliate click to analytics:'), error);\n        }\n      }\n\n      // Send to backend for server-side tracking\n      if (stryMutAct_9fa48(\"9882\") ? false : stryMutAct_9fa48(\"9881\") ? true : (stryCov_9fa48(\"9881\", \"9882\"), config.features.affiliateTracking)) {\n        if (stryMutAct_9fa48(\"9883\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9883\");\n          try {\n            if (stryMutAct_9fa48(\"9884\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9884\");\n              await fetch(stryMutAct_9fa48(\"9885\") ? `` : (stryCov_9fa48(\"9885\"), `${config.apiUrl}/api/v1/analytics/affiliate/click`), stryMutAct_9fa48(\"9886\") ? {} : (stryCov_9fa48(\"9886\"), {\n                method: stryMutAct_9fa48(\"9887\") ? \"\" : (stryCov_9fa48(\"9887\"), 'POST'),\n                headers: stryMutAct_9fa48(\"9888\") ? {} : (stryCov_9fa48(\"9888\"), {\n                  'Content-Type': stryMutAct_9fa48(\"9889\") ? \"\" : (stryCov_9fa48(\"9889\"), 'application/json')\n                }),\n                body: JSON.stringify(clickEvent)\n              }));\n            }\n          } catch (error) {\n            if (stryMutAct_9fa48(\"9890\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9890\");\n              console.error(stryMutAct_9fa48(\"9891\") ? \"\" : (stryCov_9fa48(\"9891\"), 'Error sending affiliate click to backend:'), error);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Track affiliate conversion (when user makes a purchase)\n   */\n  async trackAffiliateConversion(event: Omit<AffiliateConversionEvent, 'conversionTimestamp'>): Promise<void> {\n    if (stryMutAct_9fa48(\"9892\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9892\");\n      const conversionEvent: AffiliateConversionEvent = stryMutAct_9fa48(\"9893\") ? {} : (stryCov_9fa48(\"9893\"), {\n        ...event,\n        conversionTimestamp: Date.now()\n      });\n\n      // Store event locally\n      this.conversionEvents.push(conversionEvent);\n      this.persistConversionEvents();\n\n      // Send to analytics service\n      try {\n        if (stryMutAct_9fa48(\"9894\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9894\");\n          await analytics.track(stryMutAct_9fa48(\"9895\") ? \"\" : (stryCov_9fa48(\"9895\"), 'affiliate_conversion'), stryMutAct_9fa48(\"9896\") ? {} : (stryCov_9fa48(\"9896\"), {\n            affiliate_order_id: event.orderId,\n            affiliate_product_id: event.productId,\n            affiliate_asin: event.asin,\n            affiliate_revenue: event.revenue,\n            affiliate_commission: event.commission,\n            affiliate_currency: event.currency,\n            affiliate_quantity: event.quantity,\n            affiliate_category: event.category,\n            affiliate_url: event.affiliateUrl,\n            conversion_time_minutes: stryMutAct_9fa48(\"9897\") ? (conversionEvent.conversionTimestamp - event.clickTimestamp) * (1000 * 60) : (stryCov_9fa48(\"9897\"), (stryMutAct_9fa48(\"9898\") ? conversionEvent.conversionTimestamp + event.clickTimestamp : (stryCov_9fa48(\"9898\"), conversionEvent.conversionTimestamp - event.clickTimestamp)) / (stryMutAct_9fa48(\"9899\") ? 1000 / 60 : (stryCov_9fa48(\"9899\"), 1000 * 60))),\n            user_id: event.userId,\n            session_id: event.sessionId\n          }));\n        }\n      } catch (error) {\n        if (stryMutAct_9fa48(\"9900\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9900\");\n          console.error(stryMutAct_9fa48(\"9901\") ? \"\" : (stryCov_9fa48(\"9901\"), 'Error sending affiliate conversion to analytics:'), error);\n        }\n      }\n\n      // Send to backend\n      if (stryMutAct_9fa48(\"9903\") ? false : stryMutAct_9fa48(\"9902\") ? true : (stryCov_9fa48(\"9902\", \"9903\"), config.features.affiliateTracking)) {\n        if (stryMutAct_9fa48(\"9904\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9904\");\n          try {\n            if (stryMutAct_9fa48(\"9905\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9905\");\n              await fetch(stryMutAct_9fa48(\"9906\") ? `` : (stryCov_9fa48(\"9906\"), `${config.apiUrl}/api/v1/analytics/affiliate/conversion`), stryMutAct_9fa48(\"9907\") ? {} : (stryCov_9fa48(\"9907\"), {\n                method: stryMutAct_9fa48(\"9908\") ? \"\" : (stryCov_9fa48(\"9908\"), 'POST'),\n                headers: stryMutAct_9fa48(\"9909\") ? {} : (stryCov_9fa48(\"9909\"), {\n                  'Content-Type': stryMutAct_9fa48(\"9910\") ? \"\" : (stryCov_9fa48(\"9910\"), 'application/json')\n                }),\n                body: JSON.stringify(conversionEvent)\n              }));\n            }\n          } catch (error) {\n            if (stryMutAct_9fa48(\"9911\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9911\");\n              console.error(stryMutAct_9fa48(\"9912\") ? \"\" : (stryCov_9fa48(\"9912\"), 'Error sending affiliate conversion to backend:'), error);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Get comprehensive affiliate analytics\n   */\n  getAnalytics(timeframe: 'day' | 'week' | 'month' | 'year' | 'all' = stryMutAct_9fa48(\"9913\") ? \"\" : (stryCov_9fa48(\"9913\"), 'month')): AffiliateAnalytics {\n    if (stryMutAct_9fa48(\"9914\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"9914\");\n      const now = Date.now();\n      const timeframMs = stryMutAct_9fa48(\"9915\") ? {} : (stryCov_9fa48(\"9915\"), {\n        day: stryMutAct_9fa48(\"9916\") ? 24 * 60 * 60 / 1000 : (stryCov_9fa48(\"9916\"), (stryMutAct_9fa48(\"9917\") ? 24 * 60 / 60 : (stryCov_9fa48(\"9917\"), (stryMutAct_9fa48(\"9918\") ? 24 / 60 : (stryCov_9fa48(\"9918\"), 24 * 60)) * 60)) * 1000),\n        week: stryMutAct_9fa48(\"9919\") ? 7 * 24 * 60 * 60 / 1000 : (stryCov_9fa48(\"9919\"), (stryMutAct_9fa48(\"9920\") ? 7 * 24 * 60 / 60 : (stryCov_9fa48(\"9920\"), (stryMutAct_9fa48(\"9921\") ? 7 * 24 / 60 : (stryCov_9fa48(\"9921\"), (stryMutAct_9fa48(\"9922\") ? 7 / 24 : (stryCov_9fa48(\"9922\"), 7 * 24)) * 60)) * 60)) * 1000),\n        month: stryMutAct_9fa48(\"9923\") ? 30 * 24 * 60 * 60 / 1000 : (stryCov_9fa48(\"9923\"), (stryMutAct_9fa48(\"9924\") ? 30 * 24 * 60 / 60 : (stryCov_9fa48(\"9924\"), (stryMutAct_9fa48(\"9925\") ? 30 * 24 / 60 : (stryCov_9fa48(\"9925\"), (stryMutAct_9fa48(\"9926\") ? 30 / 24 : (stryCov_9fa48(\"9926\"), 30 * 24)) * 60)) * 60)) * 1000),\n        year: stryMutAct_9fa48(\"9927\") ? 365 * 24 * 60 * 60 / 1000 : (stryCov_9fa48(\"9927\"), (stryMutAct_9fa48(\"9928\") ? 365 * 24 * 60 / 60 : (stryCov_9fa48(\"9928\"), (stryMutAct_9fa48(\"9929\") ? 365 * 24 / 60 : (stryCov_9fa48(\"9929\"), (stryMutAct_9fa48(\"9930\") ? 365 / 24 : (stryCov_9fa48(\"9930\"), 365 * 24)) * 60)) * 60)) * 1000),\n        all: Infinity\n      });\n      const cutoff = stryMutAct_9fa48(\"9931\") ? now + timeframMs[timeframe] : (stryCov_9fa48(\"9931\"), now - timeframMs[timeframe]);\n\n      // Filter events by timeframe\n      const relevantClicks = stryMutAct_9fa48(\"9932\") ? this.clickEvents : (stryCov_9fa48(\"9932\"), this.clickEvents.filter(stryMutAct_9fa48(\"9933\") ? () => undefined : (stryCov_9fa48(\"9933\"), event => stryMutAct_9fa48(\"9937\") ? event.timestamp < cutoff : stryMutAct_9fa48(\"9936\") ? event.timestamp > cutoff : stryMutAct_9fa48(\"9935\") ? false : stryMutAct_9fa48(\"9934\") ? true : (stryCov_9fa48(\"9934\", \"9935\", \"9936\", \"9937\"), event.timestamp >= cutoff))));\n      const relevantConversions = stryMutAct_9fa48(\"9938\") ? this.conversionEvents : (stryCov_9fa48(\"9938\"), this.conversionEvents.filter(stryMutAct_9fa48(\"9939\") ? () => undefined : (stryCov_9fa48(\"9939\"), event => stryMutAct_9fa48(\"9943\") ? event.conversionTimestamp < cutoff : stryMutAct_9fa48(\"9942\") ? event.conversionTimestamp > cutoff : stryMutAct_9fa48(\"9941\") ? false : stryMutAct_9fa48(\"9940\") ? true : (stryCov_9fa48(\"9940\", \"9941\", \"9942\", \"9943\"), event.conversionTimestamp >= cutoff))));\n\n      // Calculate metrics\n      const totalClicks = relevantClicks.length;\n      const totalConversions = relevantConversions.length;\n      const totalRevenue = relevantConversions.reduce(stryMutAct_9fa48(\"9944\") ? () => undefined : (stryCov_9fa48(\"9944\"), (sum, event) => stryMutAct_9fa48(\"9945\") ? sum - event.revenue : (stryCov_9fa48(\"9945\"), sum + event.revenue)), 0);\n      const totalCommission = relevantConversions.reduce(stryMutAct_9fa48(\"9946\") ? () => undefined : (stryCov_9fa48(\"9946\"), (sum, event) => stryMutAct_9fa48(\"9947\") ? sum - event.commission : (stryCov_9fa48(\"9947\"), sum + event.commission)), 0);\n      const conversionRate = (stryMutAct_9fa48(\"9951\") ? totalClicks <= 0 : stryMutAct_9fa48(\"9950\") ? totalClicks >= 0 : stryMutAct_9fa48(\"9949\") ? false : stryMutAct_9fa48(\"9948\") ? true : (stryCov_9fa48(\"9948\", \"9949\", \"9950\", \"9951\"), totalClicks > 0)) ? stryMutAct_9fa48(\"9952\") ? totalConversions * totalClicks : (stryCov_9fa48(\"9952\"), totalConversions / totalClicks) : 0;\n      const averageOrderValue = (stryMutAct_9fa48(\"9956\") ? totalConversions <= 0 : stryMutAct_9fa48(\"9955\") ? totalConversions >= 0 : stryMutAct_9fa48(\"9954\") ? false : stryMutAct_9fa48(\"9953\") ? true : (stryCov_9fa48(\"9953\", \"9954\", \"9955\", \"9956\"), totalConversions > 0)) ? stryMutAct_9fa48(\"9957\") ? totalRevenue * totalConversions : (stryCov_9fa48(\"9957\"), totalRevenue / totalConversions) : 0;\n\n      // Clicks by category\n      const clicksByCategory: Record<string, number> = {};\n      relevantClicks.forEach(event => {\n        if (stryMutAct_9fa48(\"9958\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9958\");\n          if (stryMutAct_9fa48(\"9960\") ? false : stryMutAct_9fa48(\"9959\") ? true : (stryCov_9fa48(\"9959\", \"9960\"), event.category)) {\n            if (stryMutAct_9fa48(\"9961\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9961\");\n              clicksByCategory[event.category] = stryMutAct_9fa48(\"9962\") ? (clicksByCategory[event.category] || 0) - 1 : (stryCov_9fa48(\"9962\"), (stryMutAct_9fa48(\"9965\") ? clicksByCategory[event.category] && 0 : stryMutAct_9fa48(\"9964\") ? false : stryMutAct_9fa48(\"9963\") ? true : (stryCov_9fa48(\"9963\", \"9964\", \"9965\"), clicksByCategory[event.category] || 0)) + 1);\n            }\n          }\n        }\n      });\n\n      // Revenue by category\n      const revenueByCategory: Record<string, number> = {};\n      relevantConversions.forEach(event => {\n        if (stryMutAct_9fa48(\"9966\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9966\");\n          if (stryMutAct_9fa48(\"9968\") ? false : stryMutAct_9fa48(\"9967\") ? true : (stryCov_9fa48(\"9967\", \"9968\"), event.category)) {\n            if (stryMutAct_9fa48(\"9969\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9969\");\n              revenueByCategory[event.category] = stryMutAct_9fa48(\"9970\") ? (revenueByCategory[event.category] || 0) - event.revenue : (stryCov_9fa48(\"9970\"), (stryMutAct_9fa48(\"9973\") ? revenueByCategory[event.category] && 0 : stryMutAct_9fa48(\"9972\") ? false : stryMutAct_9fa48(\"9971\") ? true : (stryCov_9fa48(\"9971\", \"9972\", \"9973\"), revenueByCategory[event.category] || 0)) + event.revenue);\n            }\n          }\n        }\n      });\n\n      // Performance by source\n      const performanceBySource: Record<string, any> = {};\n      const clicksBySource: Record<string, number> = {};\n      const conversionsBySource: Record<string, number> = {};\n      const revenueBySource: Record<string, number> = {};\n      relevantClicks.forEach(event => {\n        if (stryMutAct_9fa48(\"9974\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9974\");\n          clicksBySource[event.source] = stryMutAct_9fa48(\"9975\") ? (clicksBySource[event.source] || 0) - 1 : (stryCov_9fa48(\"9975\"), (stryMutAct_9fa48(\"9978\") ? clicksBySource[event.source] && 0 : stryMutAct_9fa48(\"9977\") ? false : stryMutAct_9fa48(\"9976\") ? true : (stryCov_9fa48(\"9976\", \"9977\", \"9978\"), clicksBySource[event.source] || 0)) + 1);\n        }\n      });\n      relevantConversions.forEach(event => {\n        if (stryMutAct_9fa48(\"9979\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"9979\");\n          // Find corresponding click event\n          const clickEvent = relevantClicks.find(stryMutAct_9fa48(\"9980\") ? () => undefined : (stryCov_9fa48(\"9980\"), click => stryMutAct_9fa48(\"9983\") ? click.productId === event.productId || click.timestamp <= event.clickTimestamp : stryMutAct_9fa48(\"9982\") ? false : stryMutAct_9fa48(\"9981\") ? true : (stryCov_9fa48(\"9981\", \"9982\", \"9983\"), (stryMutAct_9fa48(\"9985\") ? click.productId !== event.productId : stryMutAct_9fa48(\"9984\") ? true : (stryCov_9fa48(\"9984\", \"9985\"), click.productId === event.productId)) && (stryMutAct_9fa48(\"9988\") ? click.timestamp > event.clickTimestamp : stryMutAct_9fa48(\"9987\") ? click.timestamp < event.clickTimestamp : stryMutAct_9fa48(\"9986\") ? true : (stryCov_9fa48(\"9986\", \"9987\", \"9988\"), click.timestamp <= event.clickTimestamp)))));\n          if (stryMutAct_9fa48(\"9990\") ? false : stryMutAct_9fa48(\"9989\") ? true : (stryCov_9fa48(\"9989\", \"9990\"), clickEvent)) {\n            if (stryMutAct_9fa48(\"9991\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"9991\");\n              conversionsBySource[clickEvent.source] = stryMutAct_9fa48(\"9992\") ? (conversionsBySource[clickEvent.source] || 0) - 1 : (stryCov_9fa48(\"9992\"), (stryMutAct_9fa48(\"9995\") ? conversionsBySource[clickEvent.source] && 0 : stryMutAct_9fa48(\"9994\") ? false : stryMutAct_9fa48(\"9993\") ? true : (stryCov_9fa48(\"9993\", \"9994\", \"9995\"), conversionsBySource[clickEvent.source] || 0)) + 1);\n              revenueBySource[clickEvent.source] = stryMutAct_9fa48(\"9996\") ? (revenueBySource[clickEvent.source] || 0) - event.revenue : (stryCov_9fa48(\"9996\"), (stryMutAct_9fa48(\"9999\") ? revenueBySource[clickEvent.source] && 0 : stryMutAct_9fa48(\"9998\") ? false : stryMutAct_9fa48(\"9997\") ? true : (stryCov_9fa48(\"9997\", \"9998\", \"9999\"), revenueBySource[clickEvent.source] || 0)) + event.revenue);\n            }\n          }\n        }\n      });\n      Object.keys(clicksBySource).forEach(source => {\n        if (stryMutAct_9fa48(\"10000\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"10000\");\n          const clicks = stryMutAct_9fa48(\"10003\") ? clicksBySource[source] && 0 : stryMutAct_9fa48(\"10002\") ? false : stryMutAct_9fa48(\"10001\") ? true : (stryCov_9fa48(\"10001\", \"10002\", \"10003\"), clicksBySource[source] || 0);\n          const conversions = stryMutAct_9fa48(\"10006\") ? conversionsBySource[source] && 0 : stryMutAct_9fa48(\"10005\") ? false : stryMutAct_9fa48(\"10004\") ? true : (stryCov_9fa48(\"10004\", \"10005\", \"10006\"), conversionsBySource[source] || 0);\n          const revenue = stryMutAct_9fa48(\"10009\") ? revenueBySource[source] && 0 : stryMutAct_9fa48(\"10008\") ? false : stryMutAct_9fa48(\"10007\") ? true : (stryCov_9fa48(\"10007\", \"10008\", \"10009\"), revenueBySource[source] || 0);\n          performanceBySource[source] = stryMutAct_9fa48(\"10010\") ? {} : (stryCov_9fa48(\"10010\"), {\n            clicks,\n            conversions,\n            revenue,\n            conversionRate: (stryMutAct_9fa48(\"10014\") ? clicks <= 0 : stryMutAct_9fa48(\"10013\") ? clicks >= 0 : stryMutAct_9fa48(\"10012\") ? false : stryMutAct_9fa48(\"10011\") ? true : (stryCov_9fa48(\"10011\", \"10012\", \"10013\", \"10014\"), clicks > 0)) ? stryMutAct_9fa48(\"10015\") ? conversions * clicks : (stryCov_9fa48(\"10015\"), conversions / clicks) : 0\n          });\n        }\n      });\n      return stryMutAct_9fa48(\"10016\") ? {} : (stryCov_9fa48(\"10016\"), {\n        totalClicks,\n        totalConversions,\n        totalRevenue,\n        totalCommission,\n        conversionRate,\n        averageOrderValue,\n        clicksByCategory,\n        revenueByCategory,\n        topPerformingProducts: stryMutAct_9fa48(\"10017\") ? [\"Stryker was here\"] : (stryCov_9fa48(\"10017\"), []),\n        // TODO: Implement based on conversion data\n        performanceBySource\n      });\n    }\n  }\n\n  /**\n   * Extract ASIN from Amazon product URL\n   */\n  extractASIN(productUrl: string): string | null {\n    if (stryMutAct_9fa48(\"10018\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"10018\");\n      try {\n        if (stryMutAct_9fa48(\"10019\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"10019\");\n          const asinPatterns = stryMutAct_9fa48(\"10020\") ? [] : (stryCov_9fa48(\"10020\"), [stryMutAct_9fa48(\"10022\") ? /\\/dp\\/([^A-Z0-9]{10})/ : stryMutAct_9fa48(\"10021\") ? /\\/dp\\/([A-Z0-9])/ : (stryCov_9fa48(\"10021\", \"10022\"), /\\/dp\\/([A-Z0-9]{10})/), stryMutAct_9fa48(\"10024\") ? /\\/gp\\/product\\/([^A-Z0-9]{10})/ : stryMutAct_9fa48(\"10023\") ? /\\/gp\\/product\\/([A-Z0-9])/ : (stryCov_9fa48(\"10023\", \"10024\"), /\\/gp\\/product\\/([A-Z0-9]{10})/), stryMutAct_9fa48(\"10026\") ? /\\/product\\/([^A-Z0-9]{10})/ : stryMutAct_9fa48(\"10025\") ? /\\/product\\/([A-Z0-9])/ : (stryCov_9fa48(\"10025\", \"10026\"), /\\/product\\/([A-Z0-9]{10})/), stryMutAct_9fa48(\"10028\") ? /\\/ASIN\\/([^A-Z0-9]{10})/ : stryMutAct_9fa48(\"10027\") ? /\\/ASIN\\/([A-Z0-9])/ : (stryCov_9fa48(\"10027\", \"10028\"), /\\/ASIN\\/([A-Z0-9]{10})/), stryMutAct_9fa48(\"10030\") ? /asin=([^A-Z0-9]{10})/i : stryMutAct_9fa48(\"10029\") ? /asin=([A-Z0-9])/i : (stryCov_9fa48(\"10029\", \"10030\"), /asin=([A-Z0-9]{10})/i), stryMutAct_9fa48(\"10033\") ? /\\/([A-Z0-9]{10})(?:\\/|\\?)/ : stryMutAct_9fa48(\"10032\") ? /\\/([^A-Z0-9]{10})(?:\\/|\\?|$)/ : stryMutAct_9fa48(\"10031\") ? /\\/([A-Z0-9])(?:\\/|\\?|$)/ : (stryCov_9fa48(\"10031\", \"10032\", \"10033\"), /\\/([A-Z0-9]{10})(?:\\/|\\?|$)/)]);\n          for (const pattern of asinPatterns) {\n            if (stryMutAct_9fa48(\"10034\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"10034\");\n              const match = productUrl.match(pattern);\n              if (stryMutAct_9fa48(\"10037\") ? match || match[1] : stryMutAct_9fa48(\"10036\") ? false : stryMutAct_9fa48(\"10035\") ? true : (stryCov_9fa48(\"10035\", \"10036\", \"10037\"), match && match[1])) {\n                if (stryMutAct_9fa48(\"10038\")) {\n                  {}\n                } else {\n                  stryCov_9fa48(\"10038\");\n                  return match[1];\n                }\n              }\n            }\n          }\n          return null;\n        }\n      } catch (error) {\n        if (stryMutAct_9fa48(\"10039\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"10039\");\n          console.error(stryMutAct_9fa48(\"10040\") ? \"\" : (stryCov_9fa48(\"10040\"), 'Error extracting ASIN:'), error);\n          return null;\n        }\n      }\n    }\n  }\n\n  /**\n   * Validate Amazon URL\n   */\n  isValidAmazonUrl(url: string): boolean {\n    if (stryMutAct_9fa48(\"10041\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"10041\");\n      try {\n        if (stryMutAct_9fa48(\"10042\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"10042\");\n          const urlObj = new URL(url);\n          const validDomains = stryMutAct_9fa48(\"10043\") ? [] : (stryCov_9fa48(\"10043\"), [stryMutAct_9fa48(\"10044\") ? \"\" : (stryCov_9fa48(\"10044\"), 'amazon.co.uk'), stryMutAct_9fa48(\"10045\") ? \"\" : (stryCov_9fa48(\"10045\"), 'amazon.com'), stryMutAct_9fa48(\"10046\") ? \"\" : (stryCov_9fa48(\"10046\"), 'amazon.de'), stryMutAct_9fa48(\"10047\") ? \"\" : (stryCov_9fa48(\"10047\"), 'amazon.fr'), stryMutAct_9fa48(\"10048\") ? \"\" : (stryCov_9fa48(\"10048\"), 'amazon.it'), stryMutAct_9fa48(\"10049\") ? \"\" : (stryCov_9fa48(\"10049\"), 'amazon.es'), stryMutAct_9fa48(\"10050\") ? \"\" : (stryCov_9fa48(\"10050\"), 'amazon.ca'), stryMutAct_9fa48(\"10051\") ? \"\" : (stryCov_9fa48(\"10051\"), 'amazon.com.au'), stryMutAct_9fa48(\"10052\") ? \"\" : (stryCov_9fa48(\"10052\"), 'amazon.co.jp'), stryMutAct_9fa48(\"10053\") ? \"\" : (stryCov_9fa48(\"10053\"), 'amazon.com.br'), stryMutAct_9fa48(\"10054\") ? \"\" : (stryCov_9fa48(\"10054\"), 'amazon.in'), stryMutAct_9fa48(\"10055\") ? \"\" : (stryCov_9fa48(\"10055\"), 'amazon.com.mx'), stryMutAct_9fa48(\"10056\") ? \"\" : (stryCov_9fa48(\"10056\"), 'amazon.cn'), stryMutAct_9fa48(\"10057\") ? \"\" : (stryCov_9fa48(\"10057\"), 'amazon.sg'), stryMutAct_9fa48(\"10058\") ? \"\" : (stryCov_9fa48(\"10058\"), 'amazon.ae'), stryMutAct_9fa48(\"10059\") ? \"\" : (stryCov_9fa48(\"10059\"), 'amazon.nl'), stryMutAct_9fa48(\"10060\") ? \"\" : (stryCov_9fa48(\"10060\"), 'amazon.se'), stryMutAct_9fa48(\"10061\") ? \"\" : (stryCov_9fa48(\"10061\"), 'amazon.pl')]);\n          return stryMutAct_9fa48(\"10062\") ? validDomains.every(domain => urlObj.hostname.includes(domain)) : (stryCov_9fa48(\"10062\"), validDomains.some(stryMutAct_9fa48(\"10063\") ? () => undefined : (stryCov_9fa48(\"10063\"), domain => urlObj.hostname.includes(domain))));\n        }\n      } catch (error) {\n        if (stryMutAct_9fa48(\"10064\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"10064\");\n          return stryMutAct_9fa48(\"10065\") ? true : (stryCov_9fa48(\"10065\"), false);\n        }\n      }\n    }\n  }\n\n  /**\n   * Get commission rate for product category\n   */\n  getCommissionRate(category: string): number {\n    if (stryMutAct_9fa48(\"10066\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"10066\");\n      const normalizedCategory = stryMutAct_9fa48(\"10067\") ? category.toUpperCase().replace(/\\s+/g, '') : (stryCov_9fa48(\"10067\"), category.toLowerCase().replace(stryMutAct_9fa48(\"10069\") ? /\\S+/g : stryMutAct_9fa48(\"10068\") ? /\\s/g : (stryCov_9fa48(\"10068\", \"10069\"), /\\s+/g), stryMutAct_9fa48(\"10070\") ? \"Stryker was here!\" : (stryCov_9fa48(\"10070\"), '')));\n      const categoryMappings: Record<string, keyof typeof amazonConfig.commissionRates> = stryMutAct_9fa48(\"10071\") ? {} : (stryCov_9fa48(\"10071\"), {\n        'electronics': stryMutAct_9fa48(\"10072\") ? \"\" : (stryCov_9fa48(\"10072\"), 'electronics'),\n        'computers': stryMutAct_9fa48(\"10073\") ? \"\" : (stryCov_9fa48(\"10073\"), 'electronics'),\n        'mobile': stryMutAct_9fa48(\"10074\") ? \"\" : (stryCov_9fa48(\"10074\"), 'electronics'),\n        'fashion': stryMutAct_9fa48(\"10075\") ? \"\" : (stryCov_9fa48(\"10075\"), 'fashion'),\n        'clothing': stryMutAct_9fa48(\"10076\") ? \"\" : (stryCov_9fa48(\"10076\"), 'fashion'),\n        'shoes': stryMutAct_9fa48(\"10077\") ? \"\" : (stryCov_9fa48(\"10077\"), 'fashion'),\n        'accessories': stryMutAct_9fa48(\"10078\") ? \"\" : (stryCov_9fa48(\"10078\"), 'fashion'),\n        'homeandgarden': stryMutAct_9fa48(\"10079\") ? \"\" : (stryCov_9fa48(\"10079\"), 'homeAndGarden'),\n        'home': stryMutAct_9fa48(\"10080\") ? \"\" : (stryCov_9fa48(\"10080\"), 'homeAndGarden'),\n        'garden': stryMutAct_9fa48(\"10081\") ? \"\" : (stryCov_9fa48(\"10081\"), 'homeAndGarden'),\n        'furniture': stryMutAct_9fa48(\"10082\") ? \"\" : (stryCov_9fa48(\"10082\"), 'homeAndGarden'),\n        'kitchen': stryMutAct_9fa48(\"10083\") ? \"\" : (stryCov_9fa48(\"10083\"), 'homeAndGarden'),\n        'sportsandoutdoors': stryMutAct_9fa48(\"10084\") ? \"\" : (stryCov_9fa48(\"10084\"), 'sportsAndOutdoors'),\n        'sports': stryMutAct_9fa48(\"10085\") ? \"\" : (stryCov_9fa48(\"10085\"), 'sportsAndOutdoors'),\n        'fitness': stryMutAct_9fa48(\"10086\") ? \"\" : (stryCov_9fa48(\"10086\"), 'sportsAndOutdoors'),\n        'outdoor': stryMutAct_9fa48(\"10087\") ? \"\" : (stryCov_9fa48(\"10087\"), 'sportsAndOutdoors'),\n        'books': stryMutAct_9fa48(\"10088\") ? \"\" : (stryCov_9fa48(\"10088\"), 'books'),\n        'ebooks': stryMutAct_9fa48(\"10089\") ? \"\" : (stryCov_9fa48(\"10089\"), 'books'),\n        'kindle': stryMutAct_9fa48(\"10090\") ? \"\" : (stryCov_9fa48(\"10090\"), 'books'),\n        'toys': stryMutAct_9fa48(\"10091\") ? \"\" : (stryCov_9fa48(\"10091\"), 'toys'),\n        'toysgames': stryMutAct_9fa48(\"10092\") ? \"\" : (stryCov_9fa48(\"10092\"), 'toys'),\n        'games': stryMutAct_9fa48(\"10093\") ? \"\" : (stryCov_9fa48(\"10093\"), 'toys'),\n        'videogames': stryMutAct_9fa48(\"10094\") ? \"\" : (stryCov_9fa48(\"10094\"), 'toys'),\n        'beauty': stryMutAct_9fa48(\"10095\") ? \"\" : (stryCov_9fa48(\"10095\"), 'beautyAndPersonalCare'),\n        'beautyandpersonalcare': stryMutAct_9fa48(\"10096\") ? \"\" : (stryCov_9fa48(\"10096\"), 'beautyAndPersonalCare'),\n        'personalcare': stryMutAct_9fa48(\"10097\") ? \"\" : (stryCov_9fa48(\"10097\"), 'beautyAndPersonalCare'),\n        'health': stryMutAct_9fa48(\"10098\") ? \"\" : (stryCov_9fa48(\"10098\"), 'beautyAndPersonalCare'),\n        'automotive': stryMutAct_9fa48(\"10099\") ? \"\" : (stryCov_9fa48(\"10099\"), 'automotive'),\n        'car': stryMutAct_9fa48(\"10100\") ? \"\" : (stryCov_9fa48(\"10100\"), 'automotive'),\n        'motorcycle': stryMutAct_9fa48(\"10101\") ? \"\" : (stryCov_9fa48(\"10101\"), 'automotive'),\n        'industrial': stryMutAct_9fa48(\"10102\") ? \"\" : (stryCov_9fa48(\"10102\"), 'industrial'),\n        'tools': stryMutAct_9fa48(\"10103\") ? \"\" : (stryCov_9fa48(\"10103\"), 'industrial'),\n        'business': stryMutAct_9fa48(\"10104\") ? \"\" : (stryCov_9fa48(\"10104\"), 'industrial')\n      });\n      const mappedCategory = categoryMappings[normalizedCategory];\n      return stryMutAct_9fa48(\"10107\") ? amazonConfig.commissionRates[mappedCategory] && amazonConfig.commissionRates.default : stryMutAct_9fa48(\"10106\") ? false : stryMutAct_9fa48(\"10105\") ? true : (stryCov_9fa48(\"10105\", \"10106\", \"10107\"), amazonConfig.commissionRates[mappedCategory] || amazonConfig.commissionRates.default);\n    }\n  }\n\n  /**\n   * Generate unique tracking identifier\n   */\n  private generateTrackingId(): string {\n    if (stryMutAct_9fa48(\"10108\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"10108\");\n      const timestamp = Date.now().toString(36);\n      const random = stryMutAct_9fa48(\"10109\") ? Math.random().toString(36) : (stryCov_9fa48(\"10109\"), Math.random().toString(36).substr(2, 9));\n      return stryMutAct_9fa48(\"10110\") ? `` : (stryCov_9fa48(\"10110\"), `gs_${timestamp}_${random}`);\n    }\n  }\n\n  /**\n   * Persist click events to localStorage\n   */\n  private persistClickEvents(): void {\n    if (stryMutAct_9fa48(\"10111\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"10111\");\n      if (stryMutAct_9fa48(\"10114\") ? typeof window === 'undefined' : stryMutAct_9fa48(\"10113\") ? false : stryMutAct_9fa48(\"10112\") ? true : (stryCov_9fa48(\"10112\", \"10113\", \"10114\"), typeof window !== (stryMutAct_9fa48(\"10115\") ? \"\" : (stryCov_9fa48(\"10115\"), 'undefined')))) {\n        if (stryMutAct_9fa48(\"10116\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"10116\");\n          try {\n            if (stryMutAct_9fa48(\"10117\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"10117\");\n              localStorage.setItem(stryMutAct_9fa48(\"10118\") ? \"\" : (stryCov_9fa48(\"10118\"), 'aclue_affiliate_clicks'), JSON.stringify(this.clickEvents));\n            }\n          } catch (error) {\n            if (stryMutAct_9fa48(\"10119\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"10119\");\n              console.error(stryMutAct_9fa48(\"10120\") ? \"\" : (stryCov_9fa48(\"10120\"), 'Error persisting affiliate click events:'), error);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Persist conversion events to localStorage\n   */\n  private persistConversionEvents(): void {\n    if (stryMutAct_9fa48(\"10121\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"10121\");\n      if (stryMutAct_9fa48(\"10124\") ? typeof window === 'undefined' : stryMutAct_9fa48(\"10123\") ? false : stryMutAct_9fa48(\"10122\") ? true : (stryCov_9fa48(\"10122\", \"10123\", \"10124\"), typeof window !== (stryMutAct_9fa48(\"10125\") ? \"\" : (stryCov_9fa48(\"10125\"), 'undefined')))) {\n        if (stryMutAct_9fa48(\"10126\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"10126\");\n          try {\n            if (stryMutAct_9fa48(\"10127\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"10127\");\n              localStorage.setItem(stryMutAct_9fa48(\"10128\") ? \"\" : (stryCov_9fa48(\"10128\"), 'aclue_affiliate_conversions'), JSON.stringify(this.conversionEvents));\n            }\n          } catch (error) {\n            if (stryMutAct_9fa48(\"10129\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"10129\");\n              console.error(stryMutAct_9fa48(\"10130\") ? \"\" : (stryCov_9fa48(\"10130\"), 'Error persisting affiliate conversion events:'), error);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Clean up old events (older than 30 days)\n   */\n  private cleanupOldEvents(): void {\n    if (stryMutAct_9fa48(\"10131\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"10131\");\n      const thirtyDaysAgo = stryMutAct_9fa48(\"10132\") ? Date.now() + 30 * 24 * 60 * 60 * 1000 : (stryCov_9fa48(\"10132\"), Date.now() - (stryMutAct_9fa48(\"10133\") ? 30 * 24 * 60 * 60 / 1000 : (stryCov_9fa48(\"10133\"), (stryMutAct_9fa48(\"10134\") ? 30 * 24 * 60 / 60 : (stryCov_9fa48(\"10134\"), (stryMutAct_9fa48(\"10135\") ? 30 * 24 / 60 : (stryCov_9fa48(\"10135\"), (stryMutAct_9fa48(\"10136\") ? 30 / 24 : (stryCov_9fa48(\"10136\"), 30 * 24)) * 60)) * 60)) * 1000)));\n      this.clickEvents = stryMutAct_9fa48(\"10137\") ? this.clickEvents : (stryCov_9fa48(\"10137\"), this.clickEvents.filter(stryMutAct_9fa48(\"10138\") ? () => undefined : (stryCov_9fa48(\"10138\"), event => stryMutAct_9fa48(\"10142\") ? event.timestamp < thirtyDaysAgo : stryMutAct_9fa48(\"10141\") ? event.timestamp > thirtyDaysAgo : stryMutAct_9fa48(\"10140\") ? false : stryMutAct_9fa48(\"10139\") ? true : (stryCov_9fa48(\"10139\", \"10140\", \"10141\", \"10142\"), event.timestamp >= thirtyDaysAgo))));\n      this.conversionEvents = stryMutAct_9fa48(\"10143\") ? this.conversionEvents : (stryCov_9fa48(\"10143\"), this.conversionEvents.filter(stryMutAct_9fa48(\"10144\") ? () => undefined : (stryCov_9fa48(\"10144\"), event => stryMutAct_9fa48(\"10148\") ? event.conversionTimestamp < thirtyDaysAgo : stryMutAct_9fa48(\"10147\") ? event.conversionTimestamp > thirtyDaysAgo : stryMutAct_9fa48(\"10146\") ? false : stryMutAct_9fa48(\"10145\") ? true : (stryCov_9fa48(\"10145\", \"10146\", \"10147\", \"10148\"), event.conversionTimestamp >= thirtyDaysAgo))));\n      this.persistClickEvents();\n      this.persistConversionEvents();\n    }\n  }\n}\n\n// Export singleton instance\nexport const affiliateService = AmazonAffiliateService.getInstance();\n\n// Export convenience functions\nexport const generateAffiliateLink = stryMutAct_9fa48(\"10149\") ? () => undefined : (stryCov_9fa48(\"10149\"), (() => {\n  const generateAffiliateLink = (url: string, options?: AffiliateLinkOptions) => affiliateService.generateAffiliateLink(url, options);\n  return generateAffiliateLink;\n})());\nexport const generateSearchLink = stryMutAct_9fa48(\"10150\") ? () => undefined : (stryCov_9fa48(\"10150\"), (() => {\n  const generateSearchLink = (searchTerm: string, category?: string, options?: AffiliateLinkOptions) => affiliateService.generateSearchLink(searchTerm, category, options);\n  return generateSearchLink;\n})());\nexport const trackAffiliateClick = stryMutAct_9fa48(\"10151\") ? () => undefined : (stryCov_9fa48(\"10151\"), (() => {\n  const trackAffiliateClick = (event: Omit<AffiliateClickEvent, 'timestamp'>) => affiliateService.trackAffiliateClick(event);\n  return trackAffiliateClick;\n})());\nexport const trackAffiliateConversion = stryMutAct_9fa48(\"10152\") ? () => undefined : (stryCov_9fa48(\"10152\"), (() => {\n  const trackAffiliateConversion = (event: Omit<AffiliateConversionEvent, 'conversionTimestamp'>) => affiliateService.trackAffiliateConversion(event);\n  return trackAffiliateConversion;\n})());\nexport const extractASIN = stryMutAct_9fa48(\"10153\") ? () => undefined : (stryCov_9fa48(\"10153\"), (() => {\n  const extractASIN = (url: string) => affiliateService.extractASIN(url);\n  return extractASIN;\n})());\nexport const isValidAmazonUrl = stryMutAct_9fa48(\"10154\") ? () => undefined : (stryCov_9fa48(\"10154\"), (() => {\n  const isValidAmazonUrl = (url: string) => affiliateService.isValidAmazonUrl(url);\n  return isValidAmazonUrl;\n})());\nexport const getCommissionRate = stryMutAct_9fa48(\"10155\") ? () => undefined : (stryCov_9fa48(\"10155\"), (() => {\n  const getCommissionRate = (category: string) => affiliateService.getCommissionRate(category);\n  return getCommissionRate;\n})());\nexport const getAffiliateAnalytics = stryMutAct_9fa48(\"10156\") ? () => undefined : (stryCov_9fa48(\"10156\"), (() => {\n  const getAffiliateAnalytics = (timeframe?: 'day' | 'week' | 'month' | 'year' | 'all') => affiliateService.getAnalytics(timeframe);\n  return getAffiliateAnalytics;\n})());"],"names":["AmazonAffiliateService","affiliateService","extractASIN","generateAffiliateLink","generateSearchLink","getAffiliateAnalytics","getCommissionRate","isValidAmazonUrl","trackAffiliateClick","trackAffiliateConversion","stryNS_9fa48","g","globalThis","Math","Function","ns","__stryker__","activeMutant","undefined","process","env","__STRYKER_ACTIVE_MUTANT__","retrieveNS","stryCov_9fa48","cov","mutantCoverage","static","perTest","cover","c","currentTestId","a","arguments","i","length","apply","stryMutAct_9fa48","id","isActive","hitCount","hitLimit","Error","clickEvents","conversionEvents","initializeTracking","getInstance","instance","window","storedClicks","localStorage","getItem","storedConversions","JSON","parse","error","console","cleanupOldEvents","setInterval","productUrl","options","url","URL","warn","hostname","includes","searchParams","set","associateTag","amazonConfig","uk","ref","campaign","medium","source","term","content","customParameters","Object","entries","forEach","key","value","trackingId","generateTrackingId","Date","now","toString","searchTerm","category","baseUrl","productCategories","event","clickEvent","timestamp","userAgent","navigator","referrer","document","push","persistClickEvents","analytics","track","affiliate_product_id","productId","affiliate_asin","asin","affiliate_category","affiliate_price","price","affiliate_currency","currency","affiliate_source","affiliate_url","affiliateUrl","original_url","originalUrl","user_id","userId","session_id","sessionId","config","features","affiliateTracking","fetch","apiUrl","method","headers","body","stringify","conversionEvent","conversionTimestamp","persistConversionEvents","affiliate_order_id","orderId","affiliate_revenue","revenue","affiliate_commission","commission","affiliate_quantity","quantity","conversion_time_minutes","clickTimestamp","getAnalytics","timeframe","timeframMs","day","week","month","year","all","Infinity","cutoff","relevantClicks","filter","relevantConversions","totalClicks","totalConversions","totalRevenue","reduce","sum","totalCommission","conversionRate","averageOrderValue","clicksByCategory","revenueByCategory","performanceBySource","clicksBySource","conversionsBySource","revenueBySource","find","click","keys","clicks","conversions","topPerformingProducts","asinPatterns","pattern","match","urlObj","validDomains","every","domain","some","normalizedCategory","toUpperCase","replace","toLowerCase","categoryMappings","mappedCategory","commissionRates","default","random","substr","setItem","thirtyDaysAgo"],"mappings":"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"}