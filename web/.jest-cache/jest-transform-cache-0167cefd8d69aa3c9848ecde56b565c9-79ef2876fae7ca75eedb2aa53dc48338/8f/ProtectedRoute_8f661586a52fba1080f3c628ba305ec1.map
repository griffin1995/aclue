{"version":3,"names":["ProtectedRoute","cov_1xgifej96u","f","s","default","_default","children","redirectTo","b","fallback","requireAuth","isAuthenticated","isInitialized","isLoading","_AuthContext","useAuth","router","_router","useRouter","_jsxruntime","jsx","_PageLoader","PageLoader","text","currentPath","asPath","loginUrl","encodeURIComponent","replace","Fragment"],"sources":["/home/jack/Documents/aclue-preprod/web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["import React, { ReactNode } from 'react';\nimport { useRouter } from 'next/router';\nimport { useAuth } from '@/context/AuthContext';\nimport { PageLoader } from '@/components/ui/PageLoader';\n\ninterface ProtectedRouteProps {\n  children: ReactNode;\n  redirectTo?: string;\n  fallback?: ReactNode;\n  requireAuth?: boolean;\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({\n  children,\n  redirectTo = '/auth/login',\n  fallback,\n  requireAuth = true,\n}) => {\n  const { isAuthenticated, isInitialized, isLoading } = useAuth();\n  const router = useRouter();\n\n  // Show loading state while initializing\n  if (!isInitialized || isLoading) {\n    return fallback || <PageLoader text=\"Checking authentication...\" />;\n  }\n\n  // If auth is required but user is not authenticated\n  if (requireAuth && !isAuthenticated) {\n    // Redirect to login with the specified redirect path\n    const currentPath = router.asPath;\n    const loginUrl = `${redirectTo}?redirect=${encodeURIComponent(currentPath)}`;\n    router.replace(loginUrl);\n    return <PageLoader text=\"Redirecting to login...\" />;\n  }\n\n  // If user is authenticated but shouldn't be (e.g., login page)\n  if (!requireAuth && isAuthenticated) {\n    // Redirect authenticated users away from auth pages\n    router.replace('/dashboard');\n    return <PageLoader text=\"Redirecting to dashboard...\" />;\n  }\n\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute;"],"mappings":"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","ignoreList":[]}