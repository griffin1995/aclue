{"version":3,"names":["PWAManager","cov_2jskj2iv2i","f","s","default","_default","className","b","deferredPrompt","setDeferredPrompt","_react","useState","showInstallPrompt","setShowInstallPrompt","isInstalled","setIsInstalled","isStandalone","setIsStandalone","useEffect","checkStandalone","window","isStandaloneMode","matchMedia","matches","navigator","standalone","document","referrer","includes","handleBeforeInstallPrompt","e","preventDefault","promptEvent","setTimeout","handleAppInstalled","gtag","method","handleDisplayModeChange","addEventListener","mediaQuery","removeEventListener","handleInstallClick","prompt","choiceResult","userChoice","outcome","console","log","platform","error","handleDismiss","sessionStorage","setItem","dismissed","getItem","_jsxruntime","jsxs","jsx","_framermotion","AnimatePresence","motion","div","initial","opacity","y","animate","exit","_lucidereact","Smartphone","onClick","Download","title","X","test","userAgent","Monitor"],"sources":["/home/jack/Documents/aclue-preprod/web/src/components/pwa/PWAManager.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Download, Smartphone, Monitor } from 'lucide-react';\n\ninterface PWAManagerProps {\n  className?: string;\n}\n\ninterface BeforeInstallPromptEvent extends Event {\n  readonly platforms: string[];\n  readonly userChoice: Promise<{\n    outcome: 'accepted' | 'dismissed';\n    platform: string;\n  }>;\n  prompt(): Promise<void>;\n}\n\nexport const PWAManager: React.FC<PWAManagerProps> = ({ className = '' }) => {\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [showInstallPrompt, setShowInstallPrompt] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [isStandalone, setIsStandalone] = useState(false);\n\n  useEffect(() => {\n    // Check if app is already installed/standalone\n    const checkStandalone = () => {\n      if (typeof window !== 'undefined') {\n        const isStandaloneMode = window.matchMedia('(display-mode: standalone)').matches ||\n                                 (window.navigator as any).standalone ||\n                                 document.referrer.includes('android-app://');\n        \n        setIsStandalone(isStandaloneMode);\n        setIsInstalled(isStandaloneMode);\n      }\n    };\n\n    checkStandalone();\n\n    // Listen for the beforeinstallprompt event\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      const promptEvent = e as BeforeInstallPromptEvent;\n      setDeferredPrompt(promptEvent);\n      \n      // Show install prompt after a delay (if not already installed)\n      if (!isInstalled) {\n        setTimeout(() => {\n          setShowInstallPrompt(true);\n        }, 10000); // Show after 10 seconds\n      }\n    };\n\n    // Listen for app installed event\n    const handleAppInstalled = () => {\n      setIsInstalled(true);\n      setShowInstallPrompt(false);\n      setDeferredPrompt(null);\n      \n      // Track installation\n      if (typeof window !== 'undefined' && (window as any).gtag) {\n        (window as any).gtag('event', 'pwa_install', {\n          method: 'browser_prompt'\n        });\n      }\n    };\n\n    // Listen for display mode changes\n    const handleDisplayModeChange = (e: MediaQueryListEvent) => {\n      setIsStandalone(e.matches);\n    };\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.addEventListener('appinstalled', handleAppInstalled);\n      \n      const mediaQuery = window.matchMedia('(display-mode: standalone)');\n      mediaQuery.addEventListener('change', handleDisplayModeChange);\n\n      return () => {\n        window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n        window.removeEventListener('appinstalled', handleAppInstalled);\n        mediaQuery.removeEventListener('change', handleDisplayModeChange);\n      };\n    }\n  }, [isInstalled]);\n\n  const handleInstallClick = async () => {\n    if (!deferredPrompt) return;\n\n    try {\n      await deferredPrompt.prompt();\n      const choiceResult = await deferredPrompt.userChoice;\n      \n      if (choiceResult.outcome === 'accepted') {\n        console.log('User accepted the install prompt');\n        setShowInstallPrompt(false);\n        \n        // Track installation attempt\n        if (typeof window !== 'undefined' && (window as any).gtag) {\n          (window as any).gtag('event', 'pwa_install_accepted', {\n            platform: choiceResult.platform\n          });\n        }\n      } else {\n        console.log('User dismissed the install prompt');\n        \n        // Track dismissal\n        if (typeof window !== 'undefined' && (window as any).gtag) {\n          (window as any).gtag('event', 'pwa_install_dismissed', {\n            platform: choiceResult.platform\n          });\n        }\n      }\n      \n      setDeferredPrompt(null);\n    } catch (error) {\n      console.error('Error during install:', error);\n    }\n  };\n\n  const handleDismiss = () => {\n    setShowInstallPrompt(false);\n    \n    // Don't show again for this session\n    if (typeof window !== 'undefined') {\n      sessionStorage.setItem('pwa-install-dismissed', 'true');\n    }\n\n    // Track dismissal\n    if (typeof window !== 'undefined' && (window as any).gtag) {\n      (window as any).gtag('event', 'pwa_install_banner_dismissed');\n    }\n  };\n\n  // Don't show if already dismissed this session\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const dismissed = sessionStorage.getItem('pwa-install-dismissed');\n      if (dismissed) {\n        setShowInstallPrompt(false);\n      }\n    }\n  }, []);\n\n  // Don't render if standalone or no prompt available\n  if (isStandalone || !deferredPrompt) {\n    return null;\n  }\n\n  return (\n    <div className={className}>\n      <AnimatePresence>\n        {showInstallPrompt && (\n          <motion.div\n            initial={{ opacity: 0, y: 50 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 50 }}\n            className=\"fixed bottom-4 left-4 right-4 z-50 mx-auto max-w-sm\"\n          >\n            <div className=\"bg-white border border-gray-200 rounded-2xl shadow-2xl p-4\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-12 h-12 bg-primary-100 rounded-xl flex items-center justify-center\">\n                    <Smartphone className=\"w-6 h-6 text-primary-600\" />\n                  </div>\n                </div>\n                \n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"text-sm font-semibold text-gray-900 mb-1\">\n                    Install aclue\n                  </h3>\n                  <p className=\"text-xs text-gray-600 mb-3\">\n                    Add to your home screen for quick access and offline browsing\n                  </p>\n                  \n                  <div className=\"flex items-center gap-2\">\n                    <button\n                      onClick={handleInstallClick}\n                      className=\"flex-1 bg-primary-600 text-white text-xs font-medium px-3 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center gap-1\"\n                    >\n                      <Download className=\"w-3 h-3\" />\n                      Install\n                    </button>\n                    <button\n                      onClick={handleDismiss}\n                      className=\"text-gray-400 hover:text-gray-600 transition-colors p-1\"\n                      title=\"Dismiss\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* iOS Safari specific install instructions */}\n      <AnimatePresence>\n        {showInstallPrompt && typeof window !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && (\n          <motion.div\n            initial={{ opacity: 0, y: 50 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 50 }}\n            className=\"fixed bottom-4 left-4 right-4 z-50 mx-auto max-w-sm\"\n          >\n            <div className=\"bg-white border border-gray-200 rounded-2xl shadow-2xl p-4\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"flex-shrink-0\">\n                  <div className=\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\">\n                    <Monitor className=\"w-6 h-6 text-blue-600\" />\n                  </div>\n                </div>\n                \n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"text-sm font-semibold text-gray-900 mb-1\">\n                    Install aclue\n                  </h3>\n                  <p className=\"text-xs text-gray-600 mb-3\">\n                    Tap the share button <span className=\"inline-block\">ðŸ“¤</span> and select \"Add to Home Screen\"\n                  </p>\n                  \n                  <button\n                    onClick={handleDismiss}\n                    className=\"w-full bg-blue-600 text-white text-xs font-medium px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n                  >\n                    Got it\n                  </button>\n                </div>\n                \n                <button\n                  onClick={handleDismiss}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors p-1\"\n                  title=\"Dismiss\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default PWAManager;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}